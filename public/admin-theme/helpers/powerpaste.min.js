!function(){if(this.ephox)var a=this.ephox.bolt;var b={},d=function(a){for(var c=b[a].dependencies,d=b[a].definition,e=[],g=0;g<c.length;++g)e.push(f(c[g]));if(b[a].instance=d.apply(null,e),void 0===b[a].instance)throw"required module ["+a+"] could not be defined (definition function returned undefined)"},e=function(a,c,d){if("string"!=typeof a)throw"invalid module definition, module id must be defined and be a string";if(void 0===c)throw"invalid module definition, dependencies must be specified";if(void 0===d)throw"invalid module definition, definition function must be specified";b[a]={dependencies:c,definition:d,instance:void 0}},f=function(a){if(void 0===b[a])throw"required module ["+a+"] is not defined";return void 0===b[a].instance&&d(a),b[a].instance},g=function(a,b){for(var c=[],d=0;d<a.length;++d)c.push(f(a[d]));b.apply(null,b)},h=this.ephox||{};h.bolt={module:{api:{define:e,require:g,demand:f}}};h.bolt.module.api.define("global!document",[],function(){return document}),function(a,b,c){a("ephox.powerpaste.util.NodeUtil",["global!document"],function(a){var b=function(b){var c=a.createElement("div");c.appendChild(b.cloneNode(!0));var d=c.innerHTML;return c=b=null,d};return{nodeToString:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!tinymce",[],function(){return tinymce}),function(a,b,c){a("ephox.powerpaste.i18n.I18n",["global!tinymce"],function(a){var b=function(){return"Your browser security settings may be preventing images from being imported."},c=function(){return a.Env.mac&&a.Env.webkit?b()+' <a href="https://support.ephox.com/entries/59328357-Safari-6-1-and-7-Flash-Sandboxing" style="text-decoration: underline">More information on paste for Safari</a>':b()},d={"cement.dialog.paste.title":"Paste Formatting Options","cement.dialog.paste.instructions":"Choose to keep or remove formatting in the pasted content.","cement.dialog.paste.merge":"Keep Formatting","cement.dialog.paste.clean":"Remove Formatting","cement.dialog.flash.title":"Local Image Import","cement.dialog.flash.trigger-paste":"Trigger paste again from the keyboard to paste content with images.","cement.dialog.flash.missing":'Adobe Flash is required to import images from Microsoft Office. Install the <a href="http://get.adobe.com/flashplayer/" target="_blank">Adobe Flash Player</a>.',"cement.dialog.flash.press-escape":'Press <span class="ephox-polish-help-kbd">ESC</span> to ignore local images and continue editing.',"loading.wait":"Please wait...","flash.clipboard.no.rtf":c(),"safari.imagepaste":'Safari does not support direct paste of images. <a href="https://support.ephox.com/entries/88543243-Safari-Direct-paste-of-images-does-not-work" style="text-decoration: underline">More information on image pasting for Safari</a>',"error.code.images.not.found":"The images service was not found: (","error.imageupload":"Image failed to upload: (","error.full.stop":").","errors.local.images.disallowed":"Local image paste has been disabled. Local images have been removed from pasted content."},e=function(a){return d[a]},f=function(b){return a.translate(e(b))};return{translate:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.alien.Once",[],function(){return function(a){var b=!1;return function(){b||(b=!0,a.apply(null,arguments))}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!Array",[],function(){return Array}),h.bolt.module.api.define("global!String",[],function(){return String}),function(a,b,c){a("ephox.compass.Arr",["global!Array","global!String"],function(a,b){var c=function(a){return function(b){return a===b}},d=c(!0),e=function(a,b){return v(a,c(b))},f=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},g=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];c.push(b(e,d,a))}return c},h=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];b(d,c,a)}},i=function(a,b){for(var c=[],d=[],e=0;e<a.length;e++){var f=a[e],g=b(f,e,a)?c:d;g.push(f)}return{pass:c,fail:d}},j=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];b(e,d,a)&&c.push(e)}return c},k=function(a,b){if(0===a.length)return[];var c=b(a[0]),d=[],e=[];return h(a,function(a){var f=b(a);f!==c&&(d.push(e),e=[]),c=f,e.push(a)}),0!==e.length&&d.push(e),d},l=function(a,b){if(2!==arguments.length)throw"Expected 2 arguments to indexOf";return r(a,c(b))},m=function(a,b,c){return n(x(a),b,c)},n=function(a,b,c){return h(a,function(a){c=b(c,a)}),c},o=function(a,b){if(2!==arguments.length)throw"Expected 2 arguments to find";for(var c=0;c<a.length;c++){var d=a[c];if(b(d,c,a))return d}},p=function(a,b,c){var d=o(a,b);return void 0!==d?d:c},q=function(a,c,d){var e=o(a,c);if(void 0===e)throw d||"Could not find element in array: "+b(a);return e},r=function(a,b){for(var c=b||d,e=0;e<a.length;++e)if(c(a[e])===!0)return e;return-1},s=function(a){for(var b=[],c=0;c<a.length;++c)b=b.concat(a[c]);return b},t=function(a,b){var c=g(a,b);return s(c)},u=function(a,b){for(var c=b||d,e=0;e<a.length;++e)if(c(a[e],e)!==!0)return!1;return!0},v=function(a,b){for(var c=b||d,e=0;e<a.length;++e)if(c(a[e])===!0)return!0;return!1},w=function(a,b){return a.length===b.length&&u(a,function(a,c){return a===b[c]})},x=function(b){var c=a.prototype.slice.call(b,0);return c.reverse(),c},y=function(a,b){return j(a,function(a){return!e(b,a)})},z=function(a,c){var d={};return h(a,function(a,e){d[b(a)]=c(a,e)}),d};return{map:g,each:h,partition:i,filter:j,groupBy:k,indexOf:l,foldr:m,foldl:n,find:o,findIndex:r,findOr:p,findOrDie:q,flatten:s,bind:t,forall:u,exists:v,contains:e,equal:w,reverse:x,chunk:f,difference:y,mapToObject:z}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.peanut.Fun",["global!Array"],function(a){var b=function(){},c=function(a,b){return function(){return a(b.apply(null,arguments))}},d=function(a){return function(){return a}},e=function(a){return a},f=function(a,b){return a===b},g=function(b){var c=a.prototype.slice,d=c.call(arguments,1);return function(){var a=d.concat(c.call(arguments,0));return b.apply(null,a)}},h=function(a){return function(){return!a.apply(null,arguments)}},i=function(a){return function(){throw a}},j=function(a){return a()};return{noop:b,compose:c,constant:d,identity:e,tripleEquals:f,curry:g,not:h,die:i,apply:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.perhaps.Option",["ephox.peanut.Fun"],function(a){var b=function(a){return e(function(b,c){return c(a)})},c=function(){return e(function(a,b){return a()})},d=function(a){return null===a||void 0===a?c():b(a)},e=function(d){var e=function(b){return d(a.constant(!1),function(a){return a===b})},f=function(){return d(a.constant(!1),a.constant(!0))},g=a.not(f),h=function(b){return d(a.constant(b),a.identity)},i=function(b){return d(b,a.identity)},j=function(b){return d(a.die(b||"error: getOrDie called on none."),a.identity)},k=function(c){return d(a.constant(c),b)},l=function(a){return d(a,b)},m=function(a){return p(function(c){return b(a(c))})},n=function(a){return d(c,function(d){return a.fold(c,function(a){return b(a(d))})})},o=m,p=function(a){return d(c,a)},q=function(){return d(c,a.identity)},r=function(b){return d(a.constant(!1),b)},s=function(b){return d(a.constant(!0),b)},t=function(a){return d(c,function(d){return a(d)?b(d):c()})},u=function(a){return d(a.isNone,a.is)},v=function(b,c){return d(b.isNone,function(d){return b.fold(a.constant(!1),a.curry(c,d))})},w=function(){return d(a.constant([]),function(a){return[a]})},x=function(){return d(a.constant("none()"),function(a){return"some("+a+")"})};return{is:e,isSome:f,isNone:g,getOr:h,getOrThunk:i,getOrDie:j,or:k,orThunk:l,fold:d,map:m,each:o,bind:p,ap:n,flatten:q,exists:r,forall:s,equals:u,equals_:v,filter:t,toArray:w,toString:x}},f=function(a,b){return a.equals(b)},g=function(a,b,c){return a.equals_(b,c)};return{some:b,none:c,from:d,equals:f,equals_:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.imageupload.TinyUploader",["ephox.compass.Arr","ephox.peanut.Fun"],function(a,b){return function(c){var d=function(){c.uploadImages()},e=function(d){a.each(d,function(d){d.fold(function(b,d,e,f){a.each(c.dom.select('img[src="'+e+'"]'),function(a){c.dom.setAttrib(a,"src",f.result)})},b.noop)})},f=function(a,b,c,d){return d.result};return{uploadImages:d,prepareImages:e,getLocalURL:f}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.ErrorDialog",[],function(){return{showDialog:function(a,b){var c=function(){win.close()},d=[{text:"Ok",onclick:c}],e={title:"Error",spacing:10,padding:10,items:[{type:"container",html:b}],buttons:d};win=a.windowManager.open(e)}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.imageupload.UploadError",["ephox.powerpaste.alien.Once","ephox.powerpaste.i18n.I18n","ephox.powerpaste.tinymce.ErrorDialog"],function(a,b,c){return function(d,e){var f=function(){return b.translate("error.code.images.not.found")+e+b.translate("error.full.stop")},g=function(){return b.translate("error.imageupload")+e+b.translate("error.full.stop")},h=function(a){var b=a.status(),e=0===b||b>=400||b<500,h=e?f:g;c.showDialog(d,h())},i=function(){return a(h)};return{instance:i}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.flour.style.Resolver",["ephox.compass.Arr"],function(a){var b=function(b){var e=c(b),f=function(b){var c=b.split(" "),f=a.map(c,function(a){return d(e,a)});return f.join(" ")};return{resolve:f}},c=function(a){return a.replace(/\./g,"-")},d=function(a,b){return a+"-"+b};return{create:b,cssNamespace:c,cssClass:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.style.Styles",["ephox.flour.style.Resolver"],function(a){var b=a.create("ephox-salmon");return{resolve:b.resolve}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.classify.Type",["global!Array","global!String"],function(a,b){var c=function(c){if(null===c)return"null";var d=typeof c;return"object"===d&&a.prototype.isPrototypeOf(c)?"array":"object"===d&&b.prototype.isPrototypeOf(c)?"string":d},d=function(a){return function(b){return c(b)===a}};return{isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.compass.Obj",[],function(){var a=function(a,b){for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];b(d,c,a)}},b=function(a,b){return c(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},c=function(b,c){var d={};return a(b,function(a,e){var f=c(a,e,b);d[f.k]=f.v}),d},d=function(b,c){var d={},e={};return a(b,function(a,b){var f=c(a,b)?d:e;f[b]=a}),{t:d,f:e}},e=function(b,c){var d=[];return a(b,function(a,b){d.push(c(a,b))}),d},f=function(a,b){for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(b(d,c,a))return d}},g=function(a){return e(a,function(a,b){return b})},h=function(a){return e(a,function(a,b){return a})},i=function(a){return h(a).length};return{bifilter:d,each:a,map:b,mapToArray:e,tupleMap:c,find:f,keys:g,values:h,size:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!Error",[],function(){return Error}),h.bolt.module.api.define("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),function(a,b,c){a("ephox.sugar.api.Attr",["ephox.classify.Type","ephox.compass.Arr","ephox.compass.Obj","global!Error","global!console"],function(a,b,c,d,e){var f=function(b,c,f){if(!(a.isString(f)||a.isBoolean(f)||a.isNumber(f)))throw e.error("Invalid call to Attr.set. Key ",c,":: Value ",f,":: Element ",b),new d("Attribute value was not simple");b.setAttribute(c,f+"")},g=function(a,b,c){f(a.dom(),b,c)},h=function(a,b){var d=a.dom();c.each(b,function(a,b){f(d,b,a)})},i=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},j=function(a,b){var c=a.dom();return!(!c||!c.hasAttribute)&&c.hasAttribute(b)},k=function(a,b){a.dom().removeAttribute(b)},l=function(a){var b=a.dom().attributes;return void 0===b||null===b||0===b.length},m=function(a){return b.foldl(a.dom().attributes,function(a,b){return a[b.name]=b.value,a},{})};return{clone:m,set:g,setAll:h,get:i,has:j,remove:k,hasNone:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.scullion.Immutable2",["ephox.compass.Arr","ephox.compass.Obj","ephox.peanut.Fun"],function(a,b,c){var d=function(a){return Array.prototype.slice.call(a)},e=function(e,f){var g=function(){var b=d(arguments);if(e.length!==b.length)throw'Wrong number of arguments to struct. Expected "['+e.length+']", got '+b.length+" arguments";var f={};return a.each(e,function(a,d){f[a]=c.constant(b[d])}),f},h=function(a,b){for(var d=0;d<e.length;d++){var g=f&&f[d]||c.tripleEquals,h=e[d];if(!g(a[h](),b[h]()))return!1}return!0},i=function(a){return b.map(a,function(a){return a()})};return{nu:g,eq:h,evaluate:i}};return{product:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.scullion.Immutable",["ephox.scullion.Immutable2"],function(a){return function(){return a.product(arguments).nu}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.scullion.BagUtils",["ephox.classify.Type","ephox.compass.Arr"],function(a,b){var c=function(a){return a.slice(0).sort()},d=function(a,b){throw"All required keys ("+c(a).join(", ")+") were not specified. Specified keys were: "+c(b).join(", ")+"."},e=function(a){throw"Unsupported keys for object: "+c(a).join(", ")},f=function(c,d){if(!a.isArray(d))throw"The "+c+" fields must be an array. Was: "+d+".";b.each(d,function(b){if(!a.isString(b))throw"The value "+b+" in the "+c+" fields was not a string."})},g=function(a,b){throw"All values need to be of type: "+b+". Keys ("+c(a).join(", ")+") were not."},h=function(a){var d=c(a),e=b.find(d,function(a,b){return b<d.length-1&&a===d[b+1]});if(void 0!==e&&null!==e)throw"The field: "+e+" occurs more than once in the combined fields: ["+d.join(", ")+"]."};return{sort:c,reqMessage:d,unsuppMessage:e,validateStrArr:f,invalidTypeMessage:g,checkDupes:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!Object",[],function(){return Object}),function(a,b,c){a("ephox.scullion.MixedBag",["ephox.compass.Arr","ephox.compass.Obj","ephox.peanut.Fun","ephox.perhaps.Option","ephox.scullion.BagUtils","global!Object"],function(a,b,c,d,e,f){return function(g,h){var i=g.concat(h);if(0===i.length)throw"You must specify at least one required or optional field.";return e.validateStrArr("required",g),e.validateStrArr("optional",h),e.checkDupes(i),function(j){var k=b.keys(j),l=a.forall(g,function(b){return a.contains(k,b)});l||e.reqMessage(g,k);var m=a.filter(k,function(b){return!a.contains(i,b)});m.length>0&&e.unsuppMessage(m);var n={};return a.each(g,function(a){n[a]=c.constant(j[a])}),a.each(h,function(a){n[a]=c.constant(f.prototype.hasOwnProperty.call(j,a)?d.some(j[a]):d.none())}),n}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.scullion.Struct",["ephox.scullion.Immutable","ephox.scullion.Immutable2","ephox.scullion.MixedBag"],function(a,b,c){return{immutable:a,immutable2:b,immutableBag:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.alien.Recurse",[],function(){var a=function(a,b){var c=[],d=function(a){return c.push(a),b(a)},e=b(a);do e=e.bind(d);while(e.isSome());return c};return{toArray:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.bud.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Element",["ephox.peanut.Fun","global!Error","global!console","global!document"],function(a,b,c,d){var e=function(a,b){var e=b||d,f=e.createElement("div");if(f.innerHTML=a,!f.hasChildNodes()||f.childNodes.length>1)throw c.error("HTML does not have a single root node",a),"HTML must have a single root node";return h(f.childNodes[0])},f=function(a,b){var c=b||d,e=c.createElement(a);return h(e)},g=function(a,b){var c=b||d,e=c.createTextNode(a);return h(e)},h=function(c){if(null===c||void 0===c)throw new b("Node cannot be not null or undefined");return{dom:a.constant(c)}};return{fromHtml:e,fromTag:f,fromText:g,fromDom:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Selectors",["ephox.bud.NodeTypes","ephox.compass.Arr","ephox.perhaps.Option","ephox.sugar.api.Element","global!Error","global!document"],function(a,b,c,d,e,f){var g=0,h=1,i=2,j=3,k=function(){var a=f.createElement("span");return void 0!==a.matches?g:void 0!==a.msMatchesSelector?h:void 0!==a.webkitMatchesSelector?i:void 0!==a.mozMatchesSelector?j:-1}(),l=a.ELEMENT,m=a.DOCUMENT,n=function(a,b){var c=a.dom();if(c.nodeType!==l)return!1;if(k===g)return c.matches(b);if(k===h)return c.msMatchesSelector(b);if(k===i)return c.webkitMatchesSelector(b);if(k===j)return c.mozMatchesSelector(b);throw new e("Browser lacks native selectors")},o=function(a){return a.nodeType!==l&&a.nodeType!==m||0===a.childElementCount},p=function(a,c){var e=void 0===c?f:c.dom();return o(e)?[]:b.map(e.querySelectorAll(a),d.fromDom)},q=function(a,b){var e=void 0===b?f:b.dom();return o(e)?c.none():c.from(e.querySelector(a)).map(d.fromDom)};return{all:p,is:n,one:q}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Compare",["ephox.compass.Arr","ephox.peanut.Fun","ephox.sugar.api.Selectors"],function(a,b,c){var d=function(a,b){return a.dom()===b.dom()},e=function(c,e){return a.exists(e,b.curry(d,c))};return{eq:d,member:e,is:c.is}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Traverse",["ephox.classify.Type","ephox.compass.Arr","ephox.peanut.Fun","ephox.perhaps.Option","ephox.scullion.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.Compare","ephox.sugar.api.Element"],function(a,b,c,d,e,f,g,h){var i=function(a){return h.fromDom(a.dom().ownerDocument)},j=function(a){var b=i(a);return h.fromDom(b.dom().documentElement)},k=function(a){var b=a.dom(),c=b.ownerDocument.defaultView;return h.fromDom(c)},l=function(a){var b=a.dom();return d.from(b.parentNode).map(h.fromDom)},m=function(a){return l(a).bind(function(c){var e=v(c),f=b.findIndex(e,function(b){return g.eq(a,b)});return f>-1?d.some(f):d.none()})},n=function(b,d){var e=a.isFunction(d)?d:c.constant(!1);return o(b,e)},o=function(a,b){return l(a).fold(function(){return[]},function(a){var c=[a];return b(a)?c:c.concat(o(a,b))})},p=function(a){var c=function(c){return b.filter(c,function(b){return!g.eq(a,b)})};return l(a).map(v).map(c).getOr([])},q=function(a){var b=a.dom();return d.from(b.offsetParent).map(h.fromDom)},r=function(a){var b=a.dom();return d.from(b.previousSibling).map(h.fromDom)},s=function(a){var b=a.dom();return d.from(b.nextSibling).map(h.fromDom)},t=function(a){return b.reverse(f.toArray(a,r))},u=function(a){return f.toArray(a,s)},v=function(a){var c=a.dom();return b.map(c.childNodes,h.fromDom)},w=function(a,b){var c=a.dom().childNodes;return d.from(c[b]).map(h.fromDom)},x=function(a){return w(a,0)},y=function(a){return w(a,a.dom().childNodes.length-1)},z=e.immutable("element","offset"),A=function(a,b){var c=v(a);return c.length>0&&b<c.length?z(c[b],0):z(a,b)};return{owner:i,defaultView:k,documentElement:j,parent:l,findIndex:m,parents:n,siblings:p,prevSibling:r,offsetParent:q,prevSiblings:t,nextSibling:s,nextSiblings:u,children:v,child:w,firstChild:x,lastChild:y,leaf:A}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Insert",["ephox.sugar.api.Traverse"],function(a){var b=function(b,c){var d=a.parent(b);d.each(function(a){a.dom().insertBefore(c.dom(),b.dom())})},c=function(c,d){var f=a.nextSibling(c);f.fold(function(){var b=a.parent(c);b.each(function(a){e(a,d)})},function(a){b(a,d)})},d=function(b,c){var d=a.firstChild(b);d.fold(function(){e(b,c)},function(a){b.dom().insertBefore(c.dom(),a.dom())})},e=function(a,b){a.dom().appendChild(b.dom())},f=function(c,d,f){a.child(c,f).fold(function(){e(c,d)},function(a){b(a,d)})},g=function(a,c){b(a,c),e(c,a)};return{before:b,after:c,prepend:d,append:e,appendAt:f,wrap:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.InsertAll",["ephox.compass.Arr","ephox.sugar.api.Insert"],function(a,b){var c=function(c,d){a.each(d,function(a){b.before(c,a)})},d=function(c,d){a.each(d,function(a,e){var f=0===e?c:d[e-1];b.after(f,a)})},e=function(c,d){a.each(d.slice().reverse(),function(a){b.prepend(c,a)})},f=function(c,d){a.each(d,function(a){b.append(c,a)})};return{before:c,after:d,prepend:e,append:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Remove",["ephox.sugar.api.InsertAll","ephox.sugar.api.Traverse"],function(a,b){var c=function(a){a.dom().textContent=""},d=function(a){var b=a.dom();null!==b.parentNode&&b.parentNode.removeChild(b)},e=function(c){var e=b.children(c);e.length>0&&a.before(c,e),d(c)};return{empty:c,remove:d,unwrap:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.peanut.Thunk",[],function(){var a=function(a){var c,b=!1;return function(){return b||(b=!0,c=a.apply(null,arguments)),c}};return{cached:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Node",["ephox.bud.NodeTypes"],function(a){var b=function(a){var b=a.dom().nodeName;return b.toLowerCase()},c=function(a){return a.dom().nodeType},d=function(a){return a.dom().nodeValue},e=function(a){return function(b){return c(b)===a}},f=function(d){return c(d)===a.COMMENT||"#comment"===b(d)},g=e(a.ELEMENT),h=e(a.TEXT),i=e(a.DOCUMENT);return{name:b,type:c,value:d,isElement:g,isText:h,isDocument:i,isComment:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Body",["ephox.peanut.Thunk","ephox.sugar.api.Element","ephox.sugar.api.Node","global!document"],function(a,b,c,d){var e=function(a){var b=c.isText(a)?a.dom().parentNode:a.dom();return void 0!==b&&null!==b&&b.ownerDocument.body.contains(b)},f=a.cached(function(){var a=d.body;if(null===a||void 0===a)throw"Body is not available yet";return b.fromDom(a)});return{body:f,inBody:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.PredicateFilter",["ephox.compass.Arr","ephox.sugar.api.Body","ephox.sugar.api.Traverse"],function(a,b,c){var d=function(a){return h(b.body(),a)},e=function(b,d,e){return a.filter(c.parents(b,e),d)},f=function(b,d){return a.filter(c.siblings(b),d)},g=function(b,d){return a.filter(c.children(b),d)},h=function(b,d){var e=[];return a.each(c.children(b),function(a){d(a)&&(e=e.concat([a])),e=e.concat(h(a,d))}),e};return{all:d,ancestors:e,siblings:f,children:g,descendants:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.SelectorFilter",["ephox.sugar.api.PredicateFilter","ephox.sugar.api.Selectors"],function(a,b){var c=function(a){return b.all(a)},d=function(c,d,e){return a.ancestors(c,function(a){return b.is(a,d)},e)},e=function(c,d){return a.siblings(c,function(a){return b.is(a,d)})},f=function(c,d){return a.children(c,function(a){return b.is(a,d)})},g=function(a,c){return b.all(c,a)};return{all:c,ancestors:d,siblings:e,children:f,descendants:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.impl.ClosestOrAncestor",["ephox.classify.Type","ephox.perhaps.Option"],function(a,b){return function(c,d,e,f,g){return c(e,f)?b.some(e):a.isFunction(g)&&g(e)?b.none():d(e,f,g)}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.SelectorFind",["ephox.perhaps.Option","ephox.sugar.api.SelectorFilter","ephox.sugar.api.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(a,b,c,d){var e=function(c){return a.from(b.all(c)[0])},f=function(c,d,e){return a.from(b.ancestors(c,d,e)[0])},g=function(c,d){return a.from(b.siblings(c,d)[0])},h=function(c,d){return a.from(b.children(c,d)[0])},i=function(c,d){return a.from(b.descendants(c,d)[0])},j=function(a,b,e){return d(c.is,f,a,b,e)};return{first:e,ancestor:f,sibling:g,child:h,descendant:i,closest:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.api.Ephemera",["ephox.peanut.Fun","ephox.salmon.style.Styles","ephox.sugar.api.Attr","ephox.sugar.api.Remove","ephox.sugar.api.SelectorFind"],function(a,b,c,d,e){var f=b.resolve("upload-image-container"),g="data-"+b.resolve("image-blob"),h=function(a){e.child(a,"img").each(i),d.unwrap(a)},i=function(a){c.remove(a,"class")};return{uploadContainer:a.constant(f),blobId:a.constant(g),cleanup:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Elements",["ephox.compass.Arr","ephox.sugar.api.Element","ephox.sugar.api.Traverse","global!document"],function(a,b,c,d){var e=function(a,e){var f=e||d,g=f.createElement("div");return g.innerHTML=a,c.children(b.fromDom(g))},f=function(c,d){return a.map(c,function(a){return b.fromTag(a,d)})},g=function(c,d){return a.map(c,function(a){return b.fromText(a,d)})},h=function(c){return a.map(c,b.fromDom)};return{fromHtml:e,fromTags:f,fromText:g,fromDom:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.UndoRewriter",["ephox.compass.Arr","ephox.salmon.api.Ephemera","ephox.sugar.api.Element","ephox.sugar.api.Elements","ephox.sugar.api.InsertAll","ephox.sugar.api.SelectorFilter"],function(a,b,c,d,e,f){var g=function(g){for(var h=0;h<g.undoManager.data.length;h++){var i=g.undoManager.data[h].content,j=c.fromTag("div");e.append(j,d.fromHtml(i));var k=f.descendants(j,"."+b.uploadContainer());a.each(k,b.cleanup),g.undoManager.data[h].content=j.dom().innerHTML}},h=function(a,b,c){for(var d=0;d<a.undoManager.data.length;d++)a.undoManager.data[d].content=a.undoManager.data[d].content.split(b.objurl()).join(c.location)};return{unwrapHistory:g,resrcHistory:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.epithet.Global",[],function(){return Function("return this;")()})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.epithet.Resolve",["ephox.epithet.Global"],function(a){var b=function(b,c){for(var d=c||a,e=0;e<b.length&&void 0!==d&&null!==d;++e)d=d[b[e]];return d},c=function(a,c){var d=a.split(".");return b(d,c)};return{path:b,resolve:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.core.Global",["ephox.epithet.Resolve"],function(a){var b=function(b,c){return a.resolve(b,c)},c=function(a,c){var d=b(a,c);if(void 0===d)throw a+" not available on this browser";return d};return{getOrDie:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.api.URL",["ephox.numerosity.core.Global"],function(a){var b=function(){return a.getOrDie("URL")},c=function(a){return b().createObjectURL(a)},d=function(a){b().revokeObjectURL(a)};return{createObjectURL:c,revokeObjectURL:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.api.BlobCache",["ephox.compass.Obj","ephox.numerosity.api.URL","ephox.perhaps.Option","ephox.scullion.Struct"],function(a,b,c,d){var e=d.immutable("id","blob","objurl","data");return function(){var d={},f=function(a,b,c,f){var g=e(a,b,c,f);return d[a]=g,g},g=function(a){return c.from(d[a])},h=function(a){b.revokeObjectURL(a.objurl())},i=function(b){return c.from(a.find(d,function(a){return a.data().result===b}))},j=function(a){var b=d[a];delete d[a],void 0!==b&&h(b)},k=function(){a.each(d,h),d={}};return{add:f,get:g,remove:j,lookupByData:i,destroy:k}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.porkbun.Event",["ephox.compass.Arr","ephox.scullion.Struct"],function(a,b){return function(c){var d=b.immutable.apply(null,c),e=[],f=function(a){if(void 0===a)throw"Event bind error: undefined handler";e.push(a)},g=function(b){var c=a.indexOf(e,b);c!==-1&&e.splice(c,1)},h=function(){var b=d.apply(null,arguments);a.each(e,function(a){a(b)})};return{bind:f,unbind:g,trigger:h}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.porkbun.Events",["ephox.compass.Obj"],function(a){var b=function(b){var c=a.map(b,function(a){return{bind:a.bind,unbind:a.unbind}}),d=a.map(b,function(a){return a.trigger});return{registry:c,trigger:d}};return{create:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.api.ImageTracker",["ephox.compass.Arr","ephox.salmon.style.Styles","ephox.salmon.api.Ephemera","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sugar.api.Attr","ephox.sugar.api.SelectorFilter"],function(a,b,c,d,e,f,g){var h="data-"+b.resolve("image-upload"),i=function(a,b){return g.descendants(a,"img["+h+'="'+b+'"]')},j=function(a){return g.descendants(a,"img:not(["+h+"])["+c.blobId()+"]")};return function(){var b=[],c=[],g=e.create({complete:d(["response"])}),k=function(a,c){f.set(a,h,c),b.push(c)},l=function(c){b=a.filter(b,function(a,b){return a!==c}),p()===!1&&o()},m=function(a,b){c.push({success:a,element:b.dom()})},n=function(b,c,d){a.each(c,function(a){f.remove(a,h),m(d,a)}),l(b)},o=function(){g.trigger.complete(c),c=[]},p=function(){return b.length>0},q=function(c){return a.contains(b,c)};return{findById:i,findAll:j,register:k,report:n,inProgress:p,isActive:q,events:g.registry}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.highway.Merger",["ephox.classify.Type"],function(a){var b=function(a,b){return b},c=function(b,c){var d=a.isObject(b)&&a.isObject(c);return d?e(b,c):c},d=function(a){return function(){var b=Array.prototype.slice.call(arguments,0);if(0===b.length)throw"Can't merge zero objects";for(var c={},d=0;d<b.length;d++){var e=b[d];for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]=a(c[f],e[f]))}return c}},e=d(c),f=d(b);return{deepMerge:e,merge:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.scullion.ADT",["ephox.classify.Type","ephox.compass.Arr","ephox.compass.Obj","ephox.peanut.Fun","global!Array"],function(a,b,c,d,e){var f=function(d){if(!a.isArray(d))throw"cases must be an array";if(0===d.length)throw"there must be at least one case";var f={};return b.each(d,function(b,g){var h=c.keys(b);if(1!==h.length)throw"one and only one name per case";var i=h[0],j=b[i];
if(void 0!==f[i])throw"duplicate key detected:"+i;if("cata"===i)throw"cannot have a case named cata (sorry)";if(!a.isArray(j))throw"case arguments must be an array";f[i]=function(){var a=e.prototype.slice.call(arguments);if(a.length!==j.length)throw"Wrong number of arguments to case "+i+". Expected "+j.length+" ("+j+"), got "+a.length;return{fold:function(){if(arguments.length!==d.length)throw"Wrong number of arguments to fold. Expected "+d.length+", got "+arguments.length;var b=arguments[g];return b.apply(null,a)}}}}),f};return{generate:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.hermes.api.ImageAsset",["ephox.highway.Merger","ephox.scullion.ADT"],function(a,b){var c=b.generate([{blob:["id","blob","objurl","data"]},{url:["id","url","raw"]}]),d=function(a,b,c){return a.fold(b,c)};return a.merge(c,{cata:d})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.perhaps.Result",["ephox.peanut.Fun","ephox.perhaps.Option"],function(a,b){var c=function(a){return e(function(b,c){return c(a)})},d=function(a){return e(function(b,c){return b(a)})},e=function(e){var f=function(b){return e(a.constant(!1),function(a){return a===b})},g=function(){return e(a.constant(!1),a.constant(!0))},h=a.not(g),i=function(b){return e(a.constant(b),a.identity)},j=function(b){return e(b,a.identity)},k=function(){return e(function(b){a.die(b)()},a.identity)},l=function(b){return e(a.constant(b),c)},m=function(a){return e(a,c)},n=function(a){return p(function(b){return c(a(b))})},o=n,p=function(a){return e(d,a)},q=function(b){return e(a.constant(!1),b)},r=function(b){return e(a.constant(!0),b)},s=function(){return e(b.none,b.some)};return{is:f,isValue:g,isError:h,getOr:i,getOrThunk:j,getOrDie:k,or:l,orThunk:m,fold:e,map:n,each:o,bind:p,exists:q,forall:r,toOption:s}};return{value:c,error:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.alien.Toggler",[],function(){return function(a,b,c){var d=c||!1,e=function(){b(),d=!0},f=function(){a(),d=!1},g=function(){var a=d?f:e;a()},h=function(){return d};return{on:e,off:f,toggle:g,isOn:h}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Class",["ephox.sugar.alien.Toggler","ephox.sugar.api.Attr"],function(a,b){var c=function(a,b){a.dom().classList.add(b)},d=function(a,c){var d=a.dom().classList;d.remove(c),0===d.length&&b.remove(a,"class")},e=function(a,b){return a.dom().classList.toggle(b)},f=function(b,c){var d=b.dom().classList,e=function(){d.remove(c)},f=function(){d.add(c)};return a(e,f,g(b,c))},g=function(a,b){var c=a.dom().classList;return void 0!==c&&c.contains(b)};return{add:c,remove:d,toggle:e,toggler:f,has:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.ui.UploadUi",["ephox.salmon.api.Ephemera","ephox.sugar.api.Class","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.InsertAll","ephox.sugar.api.Remove","ephox.sugar.api.SelectorFind","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f,g,h){var i=function(b){g.ancestor(b,"."+a.uploadContainer()).each(function(a){var b=h.children(a);e.before(a,b),f.remove(a)})},j=function(e){var f=c.fromTag("div");b.add(f,a.uploadContainer()),d.before(e,f),d.append(f,e)};return{removeUi:i,addUi:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.api.UploadUtils",["ephox.compass.Arr","ephox.hermes.api.ImageAsset","ephox.peanut.Fun","ephox.perhaps.Option","ephox.perhaps.Result","ephox.salmon.api.Ephemera","ephox.salmon.ui.UploadUi","ephox.scullion.ADT","ephox.scullion.Struct","ephox.sugar.api.Attr","ephox.sugar.api.SelectorFind","global!console"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.immutable("image","blobInfo"),n=h.generate([{failure:["error"]},{success:["result","images","blob"]}]),o=function(a,b,c){var e=a.isActive(b);return a.register(c,b),g.addUi(c),e?d.none():d.some(b)},p=function(b,c,d,e){return a.each(c,function(a){j.set(a,"src",e.location),j.remove(a,f.blobId())}),t(b,d,c)},q=function(b,d,e,f,h,i,j){var k=function(){l.error("Internal error with blob cache",h),j(n.failure({status:c.constant(666)}))};b.upload(i,h,function(b){var c=d.findById(f,h);a.each(c,g.removeUi),b.fold(function(a){j(n.failure(a))},function(a){p(e,c,h,a).fold(k,function(b){j(n.success(a,c,b))})}),d.report(h,c,b.isValue())})},r=function(a,b,c,d,g,h){var i=a.lookupByData(g.result).getOrThunk(function(){return a.add(b,c,d,g)});return j.set(h,f.blobId(),i.id()),e.value(m(h,i))},s=function(a,b){var c=j.get(b,f.blobId());return a.get(c).fold(function(){return e.error(c)},function(a){return e.value(m(b,a))})},t=function(a,b,c){return a.get(b).fold(function(){return e.error("Internal error with blob cache")},function(c){return a.remove(b),e.value(c)})},u=function(d,f,g){return a.bind(g,function(a){return b.cata(a,function(a,b,c,g){var h=k.descendant(f,'img[src="'+c+'"]');return h.fold(function(){return[e.error("Image that was just inserted could not be found: "+c)]},function(e){return[r(d,a,b,c,g,e)]})},c.constant([]))})},v=function(b,c,d){var e=b.findAll(d);return b.inProgress()?[]:a.map(e,function(a){return s(c,a)})};return{prepareForUpload:o,handleUpload:q,registerAssets:u,findBlobs:v}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.api.FormData",["ephox.numerosity.core.Global"],function(a){return function(){var b=a.getOrDie("FormData");return new b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!Math",[],function(){return Math}),h.bolt.module.api.define("global!isFinite",[],function(){return isFinite}),h.bolt.module.api.define("global!isNaN",[],function(){return isNaN}),h.bolt.module.api.define("global!parseFloat",[],function(){return parseFloat}),function(a,b,c){a("ephox.violin.util.Validate",["global!Math","global!isFinite","global!isNaN","global!parseFloat"],function(a,b,c,d){var e=function(a){return function(b,c){var d=typeof c;if(d!==a)throw b+" was not a "+a+". Was: "+c+" ("+d+")"}},f=e("string"),g=function(a,b){f(a,b);var c=b.length;if(1!==c)throw a+" was not a single char. Was: "+b},h=e("number"),i=function(b,c){if(h(b,c),c!==a.abs(c))throw b+" was not an integer. Was: "+c},j=function(a){return!c(d(a))&&b(a)},k=function(a,b){if(i(a,b),b<0)throw a+" was not a natural number. Was: "+b};return{vString:f,vChar:g,vInt:i,vNat:k,pNum:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.violin.Strings",["ephox.violin.util.Validate"],function(a){var b=function(a,b,c){if(""===b)return!0;if(a.length<b.length)return!1;var d=a.substr(c,c+b.length);return d===b},c=function(a,b){var c=function(a){var b=typeof a;return"string"===b||"number"===b};return a.replace(/\${([^{}]*)}/g,function(a,d){var e=b[d];return c(e)?e:a})},d=function(a){var b=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c};return function(){var c=b(arguments,function(a){return"string"==typeof a?a.toLowerCase():a});return a.apply(this,c)}},e=function(a,c){return b(a,c,0)},f=d(e),g=function(a,c){return b(a,c,a.length-c.length)},h=d(g),i=function(a,b){return a.substr(0,b)},j=function(a,b){return a.substr(a.length-b,a.length)},k=function(a,b){return function(c,d){return a(c,d)?b(c,c.length-d.length):c}},l=k(e,j),m=k(g,i),n=function(a,b){return a+b},o=function(a,b){return b+a},p=function(a,b){return function(c,d){return a(c,d)?c:b(c,d)}},q=p(e,o),r=p(g,n),s=function(a){return a.replace(/^\s+|\s+$/g,"")},t=function(a){return a.replace(/^\s+/g,"")},u=function(a){return a.replace(/\s+$/g,"")},v=function(a,b){return a.indexOf(b)!=-1},w=d(v),x=function(a){return a.replace(/\"/gm,"&quot;")},y=function(a,b){return a===b},z=d(y),A=function(a){if(""===a)throw"head on empty string";return a.substr(0,1)},B=function(a){if(""===a)throw"toe on empty string";return a.substr(a.length-1,a.length)},C=function(a){if(""===a)throw"tail on empty string";return a.substr(1,a.length-1)},D=function(a){if(""===a)throw"torso on empty string";return a.substr(0,a.length-1)},E=function(a){return""===a?a:A(a).toUpperCase()+C(a)},F=function(b,c){a.vString("str",b),a.vNat("num",c);for(var d="",e=0;e<c;e++)d+=b;return d},G=function(b){return function(c,d,e){a.vString("str",c),a.vChar("c",d),a.vNat("width",e);var f=c.length;return f>=e?c:b(c,F(d,e-f))}},H=G(function(a,b){return b+a}),I=G(function(a,b){return a+b});return{supplant:c,startsWith:e,startsWithIgnoringCase:f,endsWith:g,endsWithIgnoringCase:h,first:i,last:j,removeLeading:l,removeTrailing:m,ensureLeading:q,ensureTrailing:r,trim:s,lTrim:t,rTrim:u,contains:v,containsIgnoringCase:w,htmlEncodeDoubleQuotes:x,equals:y,equalsIgnoringCase:z,head:A,repead:F,padLeft:H,padRight:I,toe:B,tail:C,torso:D,capitalize:E}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.services.UploadCommon",["ephox.classify.Type","ephox.compass.Arr","ephox.numerosity.api.FormData","ephox.scullion.Struct","ephox.violin.Strings"],function(a,b,c,d,e){var f=d.immutable("message","status","contents"),g=["jpg","png","gif","jpeg"],h=function(c,d){if(a.isString(c.type)&&e.startsWith(c.type,"image/")){var f=c.type.substr("image/".length);return b.contains(g,f)?d+"."+f:d}return d},i=function(b,c){var d=a.isString(b.name)&&!e.endsWith(b.name,".tmp");return d?b.name:h(b,c)},j=function(a,b,d){var e=c();return e.append(a,b,d),{data:e,contentType:!1,processData:!1}};return{failureObject:f,getFilename:i,buildExtra:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.api.XMLHttpRequest",["ephox.numerosity.core.Global"],function(a){return function(){var b=a.getOrDie("XMLHttpRequest");return new b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.jax.base.Ajax",["ephox.classify.Type","ephox.compass.Obj","ephox.highway.Merger","ephox.numerosity.api.XMLHttpRequest","ephox.perhaps.Result","ephox.violin.Strings","global!console"],function(a,b,c,d,e,f,g){var h={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},i=function(i,j,k,l){var m={url:i,contentType:"application/json",processData:!1,type:"GET"},n=c.merge(m,l),o=d();o.open(n.type.toUpperCase(),n.url,!0),a.isString(n.contentType)&&o.setRequestHeader("Content-Type",n.contentType);var p=n.dataType,q=a.isString(p)&&"*"!==p?h[p]+", "+h["*"]+"; q=0.01":h["*"];o.setRequestHeader("Accept",q),void 0!==n.xhrFields&&n.xhrFields.withCredentials===!0&&(o.withCredentials=!0),a.isObject(n.headers)&&b.each(n.headers,function(b,c){a.isString(c)||a.isString(b)?o.setRequestHeader(c,b):g.error("Request header data was not a string: ",c," -> ",b)});var r=function(a,b,c){j(a)},s=function(a){k('Could not load url "'+i+'": '+a.status+" "+a.statusText,a.status,a.responseText)},t=function(a){try{return e.value(JSON.parse(a.response))}catch(b){return e.error({status:a.status,statusText:"Response was not JSON",responseText:a.responseText})}},u=function(a){var b="json"===n.dataType?t(a):e.value(a.response);b.fold(s,function(b){r(b,a.statusText,a)})},v=function(){0===o.status?f.startsWith(n.url,"file:")?u(o):k("Unknown HTTP error (possible cross-domain request)",o.status,o.responseText):o.status<100||o.status>=400?s(o):u(o)};o.onerror=s,o.onload=v,void 0===n.data?o.send():o.send(n.data)};return{ajax:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.api.JSON",["ephox.numerosity.core.Global"],function(a){var b=function(){return a.getOrDie("JSON")},c=function(a){return b().parse(a)},d=function(a){return b().stringify(a)};return{parse:c,stringify:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.jax.plain.Ajax",["ephox.highway.Merger","ephox.jax.base.Ajax","ephox.numerosity.api.JSON"],function(a,b,c){var d=function(c,d,e,f){b.ajax(c,d,e,a.merge({dataType:"text",type:"GET"},f))},e=function(d,e,f,g,h){b.ajax(d,f,g,a.merge({dataType:"text",data:c.stringify(e),type:"POST"},h))};return{get:d,post:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.yuri.resolve.Recompose",[],function(){var a=function(a){var b="";return""!==a.protocol&&(b+=a.protocol,b+=":"),""!==a.authority&&(b+="//",b+=a.authority),b+=a.path,""!==a.query&&(b+="?",b+=a.query),""!==a.anchor&&(b+="#",b+=a.anchor),b};return{recompose:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.yuri.api.Parser",["ephox.highway.Merger"],function(a){var b={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},c=function(a,b){for(var c=b,d=c.parser[c.strictMode?"strict":"loose"].exec(a),e={},f=14;f--;)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e},d=function(d,e){var f=a.merge(b,e);return c(d,f)};return{parse:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.yuri.normalize.Dots",["ephox.violin.Strings"],function(a){var b=function(b){return a.removeTrailing(b,d(b))},c=function(a){return a.match(/(^\/?.*?)(\/|$)/)[1]},d=function(a){return a.substring(a.lastIndexOf("/"))},e=function(d){for(var e=d,f="";""!==e;)if(a.startsWith(e,"../"))e=a.removeLeading(e,"../");else if(a.startsWith(e,"./"))e=a.removeLeading(e,"./");else if(a.startsWith(e,"/./"))e="/"+a.removeLeading(e,"/./");else if("/."===e)e="/";else if(a.startsWith(e,"/../"))e="/"+a.removeLeading(e,"/../"),f=b(f);else if("/.."===e)e="/",f=b(f);else if("."===e||".."===e)e="";else{var g=c(e);e=a.removeLeading(e,g),f+=g}return f};return{remove:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.yuri.resolve.Merge",["ephox.violin.Strings"],function(a){var b=function(b,c,d){if(""!==d&&""===b)return"/"+c;var e=b.substring(b.lastIndexOf("/")+1);return a.removeTrailing(b,e)+c};return{merge:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.yuri.resolve.Transform",["ephox.violin.Strings","ephox.yuri.api.Parser","ephox.yuri.normalize.Dots","ephox.yuri.resolve.Merge"],function(a,b,c,d){var e=function(e,f){var g={strictMode:!0},h=b.parse(e,g),i=b.parse(f,g),j={};return""!==i.protocol?(j.protocol=i.protocol,j.authority=i.authority,j.path=c.remove(i.path),j.query=i.query):(""!==i.authority?(j.authority=i.authority,j.path=c.remove(i.path),j.query=i.query):(""===i.path?(j.path=h.path,""!==i.query?j.query=i.query:j.query=h.query):(a.startsWith(i.path,"/")?j.path=c.remove(i.path):(j.path=d.merge(h.path,i.path,e.authority),j.path=c.remove(j.path)),j.query=i.query),j.authority=h.authority),j.protocol=h.protocol),j.anchor=i.anchor,j};return{transform:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.yuri.api.Resolver",["ephox.yuri.resolve.Recompose","ephox.yuri.resolve.Transform"],function(a,b){var c=function(c,d){var e=b.transform(c,d);return a.recompose(e)};return{resolve:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.services.UploadDirect",["ephox.classify.Type","ephox.highway.Merger","ephox.jax.plain.Ajax","ephox.numerosity.api.JSON","ephox.perhaps.Result","ephox.salmon.services.UploadCommon","ephox.violin.Strings","ephox.yuri.api.Resolver"],function(a,b,c,d,e,f,g,h){return function(i){var j=function(){var a=i.url,b=a.lastIndexOf("/"),c=b>0?a.substr(0,b):a,d=void 0===i.basePath?c:i.basePath;return g.endsWith(d,"/")?d:d+"/"},k=j(),l=function(a,b){var c=a.split(/\s+/),d=1===c.length&&""!==c[0]?c[0]:b;return h.resolve(k,d)},m=function(g,h,j){var k=g.blob(),m=function(a,b,c){j(e.error(f.failureObject(a,b,c)))},n=f.getFilename(k,h),o=i.credentials!==!0?{}:{xhrFields:{withCredentials:!0}},p=b.merge(o,f.buildExtra("image",k,n)),q=function(b){var c;try{var f=d.parse(b);if(!a.isString(f.location))return void m("JSON response did not contain a string location",500,b);c=f.location}catch(a){c=b}var g=l(c,n);j(e.value({location:g}))};c.post(i.url,{},q,m,p)};return{upload:m}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!setTimeout",[],function(){return setTimeout}),function(a,b,c){a("ephox.salmon.services.UploadFunction",["ephox.classify.Type","ephox.perhaps.Result","ephox.salmon.services.UploadCommon","ephox.scullion.Struct","global!console","global!setTimeout"],function(a,b,c,d,e,f){var g=d.immutable("id","filename","blob","base64");return function(d){var h=function(h,i,j){var k=function(a){j(b.error(a))},l=function(c){a.isString(c)?j(b.value({location:c})):(e.error("Image upload result was not a string"),k(""))},m=c.getFilename(h.blob(),i),n=g(i,m,h.blob(),h.data().result);f(function(){d(n,l,k)},0)};return{upload:h}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.salmon.api.Uploaders",["ephox.salmon.services.UploadCommon","ephox.salmon.services.UploadDirect","ephox.salmon.services.UploadFunction"],function(a,b,c){var d=function(a){return b(a)},e=function(a){return c(a)},f=function(b,c,d){return a.failureObject(b,c,d)},g=function(b,c){return a.getFilename(b,c)},h=function(b,c,d){return a.buildExtra(b,c,d)};return{direct:d,custom:e,failureObject:f,getFilename:g,buildExtra:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.imageupload.EphoxUploader",["ephox.compass.Arr","ephox.peanut.Fun","ephox.perhaps.Option","ephox.powerpaste.imageupload.TinyUploader","ephox.powerpaste.imageupload.UploadError","ephox.powerpaste.tinymce.UndoRewriter","ephox.salmon.api.BlobCache","ephox.salmon.api.ImageTracker","ephox.salmon.api.UploadUtils","ephox.salmon.api.Uploaders","ephox.sugar.api.Attr","ephox.sugar.api.Element"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(d,m){var n=g(),o=h(),q=(e(),e(d,m.url)),r=j.direct(m),s=function(){return l.fromDom(d.getBody())},t=function(b,c,e){a.each(c,function(a){k.set(a,"data-mce-src",b.location)}),f.resrcHistory(d,e,b)};o.events.complete.bind(function(a){f.unwrapHistory(d)});var u=function(a,b,c){i.handleUpload(r,o,n,s(),a,b,function(a){a.fold(function(a){c(a)},t)})},v=function(a,b){i.prepareForUpload(o,a.blobInfo().id(),a.image()).each(function(c){u(c,a.blobInfo(),b)})},w=function(b){var c=q.instance(),d=i.registerAssets(n,s(),b);a.each(d,function(a){a.fold(function(a){console.error(a)},function(a){v(a,c)})})},x=function(){var b=q.instance(),d=i.findBlobs(o,n,s());a.each(d,function(a){a.fold(function(a){o.report(a,c.none(),!1)},function(a){v(a,b)})})},y=function(a){x(),w(a)},z=function(a,b,c,d){return c};return{uploadImages:y,prepareImages:b.noop,getLocalURL:z}},n=function(a){var c=d(a);return{uploadImages:b.noop,prepareImages:c.prepareImages,getLocalURL:c.getLocalURL}};return function(a,b){return b?m(a,b):n(a)}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.imageupload.UploaderFactory",["ephox.powerpaste.imageupload.EphoxUploader","ephox.powerpaste.imageupload.TinyUploader"],function(a,b){return function(c){var d=!c.uploadImages&&c.settings.images_upload_url?{url:c.settings.images_upload_url,basePath:c.settings.images_upload_base_path,credentials:c.settings.images_upload_credentials}:null;return c.uploadImages?b(c):a(c,d)}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.tinymce.Util",[],function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a){return a.ownerDocument.defaultView?a.ownerDocument.defaultView.getComputedStyle(a,null):a.currentStyle||{}},c=function(a){"undefined"!=typeof console&&console.log&&console.log(a)},d=function(a){var b=Array.prototype.slice.call(a).reverse();return function(a){for(var c=a,d=0;d<b.length;d++){var e=b[d];c=e(c)}return c}},e=function(a){return tinymce.each(Array.prototype.slice.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a};return{each:tinymce.each,trim:tinymce.trim,bind:a,extend:e,ephoxGetComputedStyle:b,log:c,compose:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.tinymce.Clipboard",["ephox.powerpaste.legacy.tinymce.Util"],function(a){var c=(tinymce.each,function(b,c,d){var e,f,g,k,h=b.selection,i=b.dom,j=b.getBody();if(d.clipboardData&&d.clipboardData.getData("text/html")){d.preventDefault();var l=d.clipboardData.getData("text/html"),m=l.match(/<html[\s\S]+<\/html>/i),n=null===m?l:m[0];return c(n)}if(!i.get("_mcePaste")){if(e=i.add(j,"div",{id:"_mcePaste",class:"mcePaste"},'\ufeff<br _mce_bogus="1">'),k=j!=b.getDoc().body?i.getPos(b.selection.getStart(),j).y:j.scrollTop,i.setStyles(e,{position:"absolute",left:-1e4,top:k,width:1,height:1,overflow:"hidden"}),tinymce.isIE)return g=i.doc.body.createTextRange(),g.moveToElementText(e),g.execCommand("Paste"),i.remove(e),"\ufeff"===e.innerHTML?(b.execCommand("mcePasteWord"),void d.preventDefault()):(c(e.innerHTML),tinymce.dom.Event.cancel(d));var o=function(a){a.preventDefault()};i.bind(b.getDoc(),"mousedown",o),i.bind(b.getDoc(),"keydown",o),tinymce.isGecko&&(g=b.selection.getRng(!0),g.startContainer==g.endContainer&&3==g.startContainer.nodeType&&(nodes=i.select("p,h1,h2,h3,h4,h5,h6,pre",e),1==nodes.length&&i.remove(nodes.reverse(),!0))),f=b.selection.getRng(),e=e.firstChild,g=b.getDoc().createRange(),g.setStart(e,0),g.setEnd(e,1),h.setRng(g),window.setTimeout(function(){var d="",e=i.select("div.mcePaste");a.each(e,function(b){var c=b.firstChild;c&&"DIV"==c.nodeName&&c.style.marginTop&&c.style.backgroundColor&&i.remove(c,1),a.each(i.select("div.mcePaste",b),function(a){i.remove(a,1)}),a.each(i.select("span.Apple-style-span",b),function(a){i.remove(a,1)}),a.each(i.select("br[_mce_bogus]",b),function(a){i.remove(a)}),d+=b.innerHTML}),a.each(e,function(a){i.remove(a)}),f&&h.setRng(f),c(d),i.unbind(b.getDoc(),"mousedown",o),i.unbind(b.getDoc(),"keydown",o)},0)}}),d=function(a,b){return function(d){c(a,b,d)}},e=function(a,b){return function(d){(tinymce.isOpera||navigator.userAgent.indexOf("Firefox/2")>0)&&((tinymce.isMac?d.metaKey:d.ctrlKey)&&86==d.keyCode||d.shiftKey&&45==d.keyCode)&&c(a,b,d)}};return{getOnPasteFunction:d,getOnKeyDownFunction:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.data.Insert",[],function(){var a=function(a,b){var d,c=b.getDoc(),e="ephoxInsertMarker",f=b.selection,g=b.dom;f.setContent('<span id="'+e+'">&nbsp;</span>'),d=g.get(e);for(var h=c.createDocumentFragment();a.firstChild&&!g.isBlock(a.firstChild);)h.appendChild(a.firstChild);for(var i=c.createDocumentFragment();a.lastChild&&!g.isBlock(a.lastChild);)i.appendChild(a.lastChild);if(d.parentNode.insertBefore(h,d),g.insertAfter(i,d),a.firstChild){if(g.isBlock(a.firstChild)){for(;!g.isBlock(d.parentNode)&&d.parentNode!==g.getRoot();)d=g.split(d.parentNode,d);g.is(d.parentNode,"td,th")||d.parentNode===g.getRoot()||(d=g.split(d.parentNode,d))}g.replace(a,d)}else g.remove(d)};return{insert:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.tinymce.Settings",["ephox.powerpaste.legacy.tinymce.Util"],function(a){var b={strip_class_attributes:"all",retain_style_properties:"none"},c={strip_class_attributes:"none",retain_style_properties:"valid"},d=function(a,d){if(a&&"string"!=typeof a)return a;switch(a){case"clean":return b;case"merge":return c;default:return d}},e=function(b,c,e){var f=d(b,c);return f=a.extend(f,{base_64_images:e})},f=function(a,d,f){var g=e(a,b,f),h=e(d,c,f),i=h,j=function(a){i=a?g:h},k=function(a){return i[a]};return{setWordContent:j,get:k}};return{create:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.data.tokens.Attributes",["ephox.powerpaste.legacy.tinymce.Util"],function(a){var b=function(a){return a.specified!==!1||"name"===a.nodeName&&""!==a.value},c=function(a,b){return a&&b?function(c,d){return b(c,a(c,d))}:a||b},d=function(d){var f,h,e=0,g=function(){return f},i=function(){return h()};h=function(){return f={},e=0,a.each(d.attributes,function(a){var c=a.nodeName,d=a.value;b(a)&&null!==d&&void 0!==d&&(f[c]=d,e++)}),void 0===f.style&&d.style.cssText&&(f.style=d.style.cssText,e++),h=g,f};var k,l,j=function(){return h(),e},m=function(a){k||(l=h),k=c(k,a),h=function(){return h=l,o(function(a,b){var c=k(a,b);null===c?(d.removeAttribute(a),delete f[a],e--):c!==b&&("class"===a?d.className=c:d.setAttribute(a,c),f[a]=c)}),h=g,f}},n=function(a){return h()[a]},o=function(b){a.each(h(),function(a,c){b(c,a)})};return{get:n,each:o,filter:m,getAttributes:i,getAttributeCount:j}};return{manager:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.data.tokens.Token",["ephox.powerpaste.legacy.data.tokens.Attributes","ephox.powerpaste.legacy.tinymce.Util"],function(a,b,c){var d="startElement",e="endElement",f="text",g="comment",h=a.manager,i=function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},j=function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},k=!1,l=function(a,c,d){var g,h,i;a.style.length;i=c||a.getAttribute("style"),void 0!==i&&null!==i&&i.split||(i=a.style.cssText),b.each(i.split(";"),function(a){var c=a.indexOf(":");c>0&&(g=b.trim(a.substring(0,c)),g.toUpperCase()===g&&(g=g.toLowerCase()),g=j(g),h=b.trim(a.substring(c+1)),k||(k=0===g.indexOf("mso-")),d(g,h))}),k||(h=a.style["mso-list"],h&&d("mso-list",h))},m=function(a,c,j){var k,m,n,o,p;switch(a.nodeType){case 1:c?k=e:(k=d,o=h(a),p={},l(a,j,function(a,b){p[a]=b})),m="HTML"!==a.scopeName&&a.scopeName&&a.tagName&&a.tagName.indexOf(":")<=0?(a.scopeName+":"+a.tagName).toUpperCase():a.tagName;break;case 3:k=f,n=a.nodeValue;break;case 8:k=g,n=a.nodeValue;break;default:b.log("WARNING: Unsupported node type encountered: "+a.nodeType)}var q=function(){return o&&o.getAttributes(),a},r=function(){return m},s=function(){return k},t=function(){return n},u=function(){return"Type: "+k+", Tag: "+m+" Text: "+n},v=function(a){return o.get(a.toLowerCase())},w=function(a){k===d&&o.filter(a)},x=function(c){if(s()===d){var e="";b.each(p,function(b,d){var f=c(d,b);null===f?(a.style.removeProperty?a.style.removeProperty(i(d)):a.style.removeAttribute(i(d)),delete p[d]):(e+=d+": "+f+"; ",p[d]=f)}),e=e?e:null,w(function(a,b){return"style"===a?e:b}),a.style.cssText=e}},y=function(){return o.getAttributeCount()},z=function(a){o.each(a)},A=function(a){return p[a]},B=function(a){b.each(p,function(b,c){a(c,b)})},C=function(){return b.ephoxGetComputedStyle(a)},D=function(){return k===f&&/^[\s\u00A0]*$/.test(n)};return{getNode:q,tag:r,type:s,text:t,toString:u,getAttribute:v,filterAttributes:w,filterStyles:x,getAttributeCount:y,attributes:z,getStyle:A,styles:B,getComputedStyle:C,isWhitespace:D}},n=function(a,c,d,e){var f=e.createElement(a),g="";return b.each(c,function(a,b){f.setAttribute(b,a)}),b.each(d,function(a,b){g+=b+":"+a+";",f.style[i(b)]=a}),m(f,!1,""!==g?g:null)},o=function(a,b){return m(b.createElement(a),!0)},p=function(a,b){return m(b.createComment(a),!1)},q=function(a,b){return m(b.createTextNode(a))},r=o("HTML",window.document);return{START_ELEMENT_TYPE:d,END_ELEMENT_TYPE:e,TEXT_TYPE:f,COMMENT_TYPE:g,FINISHED:r,token:m,createStartElement:n,createEndElement:o,createComment:p,createText:q}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.data.tokens.Serializer",["ephox.powerpaste.legacy.data.tokens.Token"],function(a){var b=function(b){var c=b.createDocumentFragment(),d=c,e=function(a){g(a),c=a},f=function(){c=c.parentNode},g=function(a){c.appendChild(a)},h=function(c){var d=function(a){var b=a.getNode().cloneNode(!1);e(b)},h=function(a,c){var d=b.createTextNode(a.text());g(d)};switch(c.type()){case a.START_ELEMENT_TYPE:d(c);break;case a.TEXT_TYPE:h(c);break;case a.END_ELEMENT_TYPE:f();break;case a.COMMENT_TYPE:break;default:throw{message:"Unsupported token type: "+c.type()}}};return{dom:d,receive:h}};return{create:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.data.tokens.Tokenizer",["ephox.powerpaste.legacy.data.tokens.Token"],function(a){var b=function(b,c){var d;c=c||window.document,d=c.createElement("div"),c.body.appendChild(d),d.style.position="absolute",d.style.left="-10000px",d.innerHTML=b,nextNode=d.firstChild||a.FINISHED;var e=[];endNode=!1;var f=function(b,c){return b===a.FINISHED?b:b?a.token(b,c):void 0},g=function(){var b=nextNode,g=endNode;return!endNode&&nextNode.firstChild?(e.push(nextNode),nextNode=nextNode.firstChild):endNode||1!==nextNode.nodeType?nextNode.nextSibling?(nextNode=nextNode.nextSibling,endNode=!1):(nextNode=e.pop(),endNode=!0):endNode=!0,b===a.FINISHED||nextNode||(c.body.removeChild(d),nextNode=a.FINISHED),f(b,g)},h=function(){return void 0!==nextNode};return{hasNext:h,next:g}};return{tokenize:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.data.tokens.Filter",["ephox.powerpaste.legacy.data.tokens.Token","ephox.powerpaste.legacy.tinymce.Util"],function(a,b){var c=function(c,d){var e=function(e,f,g){var h,i,j,k=!1,l=function(){d&&d(w),k=!1,i=[],j=[]},m=function(a){b.each(a,function(a){e.receive(a)})},n=function(a){k?j.push(a):e.receive(a)},o=function(b){d&&i.push(b),c(w,b),b===a.FINISHED&&r()},p=function(){k=!0},q=function(){m(i),l()},r=function(){u(),m(j),l()},s=function(a){h=h||[],h.push(a)},t=function(){return h&&h.length>0},u=function(){b.each(h,function(a){n(a)}),v()},v=function(){h=[]},w={document:g||window.document,settings:f||{},emit:n,receive:o,startTransaction:p,rollback:q,commit:r,defer:s,hasDeferred:t,emitDeferred:u,dropDeferred:v};return l(),w};return e},d=function(a){return c(function(c,d){d.filterAttributes(b.bind(a,c)),c.emit(d)})};return{createFilter:c,createAttributeFilter:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.Text",["ephox.powerpaste.legacy.data.tokens.Filter","ephox.powerpaste.legacy.data.tokens.Token"],function(a,b){var c=/^(P|H[1-6]|T[DH]|LI|DIV|BLOCKQUOTE|PRE|ADDRESS|FIELDSET|DD|DT|CENTER)$/,d=function(a){return c.test(a.tag())},e=function(){return null},f=!1;return a.createFilter(function(a,c){var g=function(){f||(a.emit(b.createStartElement("P",{},{},a.document)),f=!0)};switch(c.type()){case b.TEXT_TYPE:g(),a.emit(c);break;case b.END_ELEMENT_TYPE:f&&(d(c)||c===b.FINISHED)?(a.emit(b.createEndElement("P",a.document)),f=!1):"BR"===c.tag()&&a.emit(c);break;case b.START_ELEMENT_TYPE:"BR"===c.tag()?(c.filterAttributes(e),c.filterStyles(e),a.emit(c)):"IMG"===c.tag()&&c.getAttribute("alt")&&(g(),a.emit(b.createText(c.getAttribute("alt"),a.document)))}c===b.FINISHED&&a.emit(c)})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),
function(a,b,c){a("ephox.powerpaste.legacy.data.tokens.Helper",["ephox.powerpaste.legacy.data.tokens.Token"],function(a){var b=function(){if(navigator.userAgent.indexOf("Gecko")>0&&navigator.userAgent.indexOf("WebKit")<0)return!1;var b=document.createElement("div");try{b.innerHTML='<p style="mso-list: Ignore;">&nbsp;</p>'}catch(a){return!1}return"Ignore"===a.token(b.firstChild).getStyle("mso-list")},c=b(),d=function(a){return"A"===a.tag()||"SPAN"===a.tag()},e=function(a){var b=a.getStyle("mso-list");return b&&"skip"!==b},f=function(b,c){return b.type()===a.START_ELEMENT_TYPE?0===b.getAttributeCount()||c&&1===b.getAttributeCount()&&null!==b.getAttribute("style")&&void 0!==b.getAttribute("style"):b.type()===a.END_ELEMENT_TYPE};return{hasNoAttributes:f,supportsCustomStyles:c,spanOrA:d,hasMsoListStyle:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.list.ListTypes",["ephox.powerpaste.legacy.data.tokens.Token","ephox.powerpaste.legacy.tinymce.Util"],function(a,b){var c=[{regex:/^\(?[dc][\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[DC][\.\)]$/,type:{tag:"OL",type:"upper-alpha"}},{regex:/^\(?M*(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})[\.\)]$/,type:{tag:"OL",type:"upper-roman"}},{regex:/^\(?m*(cm|cd|d?c{0,3})(xc|xl|l?x{0,3})(ix|iv|v?i{0,3})[\.\)]$/,type:{tag:"OL",type:"lower-roman"}},{regex:/^\(?[0-9]+[\.\)]$/,type:{tag:"OL"}},{regex:/^([0-9]+\.)*[0-9]+\.?$/,type:{tag:"OL",variant:"outline"}},{regex:/^\(?[a-z]+[\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[A-Z]+[\.\)]$/,type:{tag:"OL",type:"upper-alpha"}}],d={"•":{tag:"UL",type:"disc"},"·":{tag:"UL",type:"disc"},"§":{tag:"UL",type:"square"}},e={o:{tag:"UL",type:"circle"},"-":{tag:"UL",type:"disc"},"●":{tag:"UL",type:"disc"}},f=function(a,b){var c={tag:a.tag,type:a.type,variant:b};return a.start&&(c.start=a.start),a.type||delete c.type,c},g=function(a,g,i){var k,l,m,j=null;return a&&(k=a.text,l=a.symbolFont),k=b.trim(k),j=e[k],j?j=f(j,k):l?(j=d[k],j=j?f(j,k):{tag:"UL",variant:k}):(b.each(c,function(a){if(a.regex.test(k)){if(g&&h(a.type,g,!0))return j=a.type,j.start=parseInt(k),!1;j||(j=a.type),j.start=parseInt(k)}}),j&&!j.variant&&(m="("===k.charAt(0)?"()":")"===k.charAt(k.length-1)?")":".",j=f(j,m))),j&&"OL"===j.tag&&i&&("P"!==i.tag()||/^MsoHeading/.test(i.getAttribute("class")))&&(j=null),j},h=function(a,b,c){return a===b||a&&b&&a.tag===b.tag&&a.type===b.type&&(c||a.variant===b.variant)},i=function(b,c){return b.type()==a.START_ELEMENT_TYPE&&(font=b.getStyle("font-family"),font?c="Wingdings"===font||"Symbol"===font:/^(P|H[1-6]|DIV)$/.test(b.tag())&&(c=!1)),c};return{guessListType:g,eqListType:h,checkFont:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.list.CommentHeuristics",["ephox.powerpaste.legacy.data.tokens.Token","ephox.powerpaste.legacy.filters.list.ListTypes","ephox.powerpaste.legacy.tinymce.Util"],function(a,b,c){var d=function(d,e){var h,j,k,i=!1,l=function(a){var b=a.style.fontFamily;b&&(i="Wingdings"===b||"Symbol"===b)};if(d.type()===a.START_ELEMENT_TYPE&&e.openedTag&&"SPAN"===d.tag()){for(h=e.openedTag.getNode(),l(h),h.childNodes.length>1&&"A"===h.firstChild.tagName&&""===h.firstChild.textContent&&(h=h.childNodes[1]);h.firstChild&&("SPAN"===h.firstChild.tagName||"A"===h.firstChild.tagName);)h=h.firstChild,l(h);if(h=h.firstChild,!h||3!==h.nodeType)return h&&"IMG"===h.tagName;if(j=h.value,c.trim(j)||(h=h.parentNode.nextSibling,j=h?h.value:""),!h||c.trim(h.parentNode.textContent)!=j)return!1;if(k=b.guessListType({text:j,symbolFont:i},null,e.originalToken))return h.nextSibling&&"SPAN"===h.nextSibling.tagName&&/^[\u00A0\s]/.test(h.nextSibling.firstChild.value)&&("P"===e.openedTag.tag()||"UL"===k.tag)}return!1},e=function(a,b){var c,e=0;for(c=a.parentNode;null!==c&&void 0!==c&&c!==b.parentNode;)e+=c.offsetLeft,c=c.offsetParent;return e},f=function(a){var b={};return function(c,d){var e,f=c+","+d;return b.hasOwnProperty(f)?b[f]:(e=a.call(null,c,d),b[f]=e,e)}},g=function(a){var b=a.indexOf(".");if(b>=0&&c.trim(a.substring(b+1))===className)return match=results[2],!1},h=f(function(a,b){var d,f,h,i,e=/([^{]+){([^}]+)}/g;for(e.lastIndex=0;null!==(d=e.exec(a))&&!f;)c.each(d[1].split(","),g(selector));return!!f&&(h=document.createElement("p"),h.setAttribute("style",f),i=c.ephoxGetComputedStyle(h),!!i&&""+i.marginLeft)}),i=function(){var a,b,c=function(c,d,f,g){var i,j,l=1;return g&&/^([0-9]+\.)+[0-9]+\.?$/.test(g.text)?g.text.replace(/([0-9]+|\.$)/g,"").length+1:(i=b||parseInt(h(f,d.getAttribute("class"))),j=e(c.getNode(),d.getNode()),i?a?j+=a:0===j&&(a=i,j+=i):i=48,b=i=Math.min(j,i),l=Math.max(1,Math.floor(j/i))||1)};return{guessIndentLevel:c}},j=function(){var b=!1,c="",d=function(d){return b&&d.type()===a.TEXT_TYPE?(c+=d.text(),!0):d.type()===a.START_ELEMENT_TYPE&&"STYLE"===d.tag()?(b=!0,!0):d.type()===a.END_ELEMENT_TYPE&&"STYLE"===d.tag()&&(b=!1,!0)};return{check:d}};return{isListWithoutCommentsOrStyles:d,indentGuesser:i,styles:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.list.Emitter",["ephox.powerpaste.legacy.data.tokens.Token","ephox.powerpaste.legacy.filters.list.ListTypes"],function(a,b){var c=["disc","circle","square"],d=function(a,b){return"UL"===a.tag&&c[b-1]===a.type&&(a={tag:"UL"}),a};return function(c,e){var i,f=[],g=[],h=0,j=function(b,d){var g={},j={};h++,d&&b.type&&(g={"list-style-type":b.type}),b.start&&b.start>1&&(j={start:b.start}),f.push(b),c.emit(a.createStartElement(b.tag,j,g,e)),i=b},k=function(){c.emit(a.createEndElement(f.pop().tag,e)),h--,i=f[f.length-1]},l=function(){for(;h>0;)m(),k();c.commit()},m=function(){var b=g?g.pop():"P";"P"!=b&&c.emit(a.createEndElement(b,e)),c.emit(a.createEndElement("LI",e))},n=function(d,f,h){var l={};if(d){var m=d.getStyle("margin-left");void 0!==m&&(l["margin-left"]=m)}else l["list-style-type"]="none";i&&!b.eqListType(i,f)&&(k(),h&&(c.emit(a.createStartElement("P",{},{},e)),c.emit(a.createText(" ",e)),c.emit(a.createEndElement("P",e))),j(f,!0)),c.emit(a.createStartElement("LI",{},l,e)),d&&"P"!=d.tag()?(g.push(d.tag()),d.filterStyles(function(){return null}),c.emit(d)):g.push("P")},o=function(b,f,i,l){if(i){for(h||(h=0);h>b;)m(),k();if(i=d(i,b),h==b)m(),n(f,i,l);else for(b>1&&g.length>0&&"P"!==g[g.length-1]&&(c.emit(a.createEndElement(g[g.length-1],e)),g[g.length-1]="P");h<b;)j(i,h==b-1),n(h==b?f:void 0,i)}},p=function(){return h},q=function(){return i};return{openList:j,closelist:k,closeAllLists:l,closeItem:m,openLI:n,openItem:o,getCurrentListType:q,getCurrentLevel:p}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.list.ListStates",["ephox.powerpaste.legacy.data.tokens.Helper","ephox.powerpaste.legacy.data.tokens.Token","ephox.powerpaste.legacy.filters.list.CommentHeuristics","ephox.powerpaste.legacy.filters.list.ListTypes","ephox.powerpaste.legacy.tinymce.Util"],function(a,b,c,d,e){var f=function(a,b){e.log("Unexpected token in list conversion: "+b.toString()),a.rollback()},g=function(a,b,c){return b==c?a:null},h=function(c,d,f){f.type()===b.TEXT_TYPE&&""===e.trim(f.text())?c.defer(f):d.skippedPara||f.type()!==b.START_ELEMENT_TYPE||"P"!==f.tag()||a.hasMsoListStyle(f)?k(c,d,f):(d.openedTag=f,c.defer(f),d.nextFilter=i)},i=function(d,e,f){f.type()!==b.START_ELEMENT_TYPE||"SPAN"!==f.tag()||0!==e.spanCount.length||!a.supportsCustomStyles&&c.isListWithoutCommentsOrStyles(f,e)||a.hasMsoListStyle(f)?f.type()===b.END_ELEMENT_TYPE?"SPAN"===f.tag()?(d.defer(f),e.spanCount.pop()):"P"===f.tag()?(d.defer(f),e.skippedPara=!0,e.openedTag=null,e.nextFilter=h):(e.nextFilter=k,e.nextFilter(d,e,f)):f.isWhitespace()?d.defer(f):(e.nextFilter=k,e.nextFilter(d,e,f)):(d.defer(f),e.spanCount.push(f))},k=function(d,e,f){var g=function(){e.emitter.closeAllLists(),d.emitDeferred(),e.openedTag=null,d.emit(f),e.nextFilter=k};if(f.type()===b.START_ELEMENT_TYPE&&a.hasMsoListStyle(f)&&"LI"!==f.tag()){var i=(f.getStyle("mso-list"),/ level([0-9]+)/.exec(f.getStyle("mso-list")));i&&i[1]?(e.itemLevel=parseInt(i[1],10)+e.styleLevelAdjust,e.nextFilter===k?d.emitDeferred():d.dropDeferred(),e.nextFilter=m,d.startTransaction(),e.originalToken=f,e.commentMode=!1):g()}else!a.supportsCustomStyles&&(f.type()===b.COMMENT_TYPE&&"[if !supportLists]"===f.text()||c.isListWithoutCommentsOrStyles(f,d))?(f.type()===b.START_ELEMENT_TYPE&&"SPAN"===f.tag()&&e.spanCount.push(f),e.nextFilter=m,d.startTransaction(),e.originalToken=e.openedTag,e.commentMode=!0,e.openedTag=null,d.dropDeferred()):f.type()===b.END_ELEMENT_TYPE&&a.spanOrA(f)?(d.defer(f),e.spanCount.pop()):f.type()===b.START_ELEMENT_TYPE?a.spanOrA(f)?(d.defer(f),e.spanCount.push(f)):(e.openedTag&&(e.emitter.closeAllLists(),d.emitDeferred()),e.openedTag=f,d.defer(f)):g()},l=function(a,c,d){d.type()===b.END_ELEMENT_TYPE&&c.originalToken.tag()===d.tag()&&(c.nextFilter=h,c.styleLevelAdjust=-1),a.emit(d)},m=function(a,c,d){if(d.type()==b.START_ELEMENT_TYPE&&"Ignore"===d.getStyle("mso-list")&&(c.nextFilter=n),d.type()===b.START_ELEMENT_TYPE&&"SPAN"===d.tag())c.spanCount.push(d),(c.commentMode&&""===d.getAttribute("style")||null===d.getAttribute("style"))&&(c.nextFilter=n);else if("A"===d.tag())d.type()===b.START_ELEMENT_TYPE?c.spanCount.push(d):c.spanCount.pop();else if(d.type()===b.TEXT_TYPE)if(c.commentMode)c.nextFilter=n,c.nextFilter(a,c,d);else{var g=c.originalToken,h=c.spanCount;c.emitter.closeAllLists(),a.emit(g),e.each(h,e.bind(a.emit,a)),a.emit(d),a.commit(),c.originalToken=g,c.nextFilter=l}else(c.commentMode||d.type()!==b.COMMENT_TYPE)&&f(a,d)},n=function(c,d,e){e.type()===b.TEXT_TYPE?e.isWhitespace()||(d.nextFilter=o,d.bulletInfo={text:e.text(),symbolFont:d.symbolFont}):a.spanOrA(e)?e.type()===b.START_ELEMENT_TYPE?d.spanCount.push(e):d.spanCount.pop():e.type()===b.START_ELEMENT_TYPE&&"IMG"===e.tag()?(d.nextFilter=o,d.bulletInfo={text:"∂",symbolFont:!0}):f(c,e)},o=function(c,d,e){e.type()===b.START_ELEMENT_TYPE&&a.spanOrA(e)?(d.spanCount.push(e),d.nextFilter=p):e.type()===b.END_ELEMENT_TYPE&&a.spanOrA(e)?(d.spanCount.pop(),d.nextFilter=q):e.type()===b.END_ELEMENT_TYPE&&"IMG"===e.tag()||f(c,e)},p=function(c,d,e){e.type()===b.END_ELEMENT_TYPE&&(a.spanOrA(e)&&d.spanCount.pop(),d.nextFilter=q)},q=function(c,h,i){var j=function(a){if(h.nextFilter=r,h.commentMode&&(h.itemLevel=h.indentGuesser.guessIndentLevel(i,h.originalToken,h.styles.styles,h.bulletInfo)),h.listType=d.guessListType(h.bulletInfo,g(h.emitter.getCurrentListType(),h.emitter.getCurrentLevel(),h.itemLevel),h.originalToken),h.listType){for(h.emitter.openItem(h.itemLevel,h.originalToken,h.listType,h.skippedPara),c.emitDeferred();h.spanCount.length>0;)c.emit(h.spanCount.shift());a&&c.emit(i)}else e.log("Unknown list type: "+h.bulletInfo.text+" Symbol font? "+h.bulletInfo.symbolFont),c.rollback()};i.type()===b.TEXT_TYPE||i.type()===b.START_ELEMENT_TYPE?j(!0):i.type()===b.COMMENT_TYPE?j("[endif]"!==i.text()):i.type()===b.END_ELEMENT_TYPE?a.spanOrA(i)&&h.spanCount.pop():f(c,i)},r=function(a,c,d){d.type()===b.END_ELEMENT_TYPE&&d.tag()===c.originalToken.tag()?(c.nextFilter=h,c.skippedPara=!1):a.emit(d)},s=k;return{initial:s}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.list.Lists",["ephox.powerpaste.legacy.data.tokens.Filter","ephox.powerpaste.legacy.data.tokens.Helper","ephox.powerpaste.legacy.data.tokens.Token","ephox.powerpaste.legacy.filters.list.CommentHeuristics","ephox.powerpaste.legacy.filters.list.Emitter","ephox.powerpaste.legacy.filters.list.ListStates","ephox.powerpaste.legacy.filters.list.ListTypes","ephox.powerpaste.legacy.tinymce.Util"],function(a,b,c,d,e,f,g,h){var i={},j=function(a){i.nextFilter=f.initial,i.itemLevel=0,i.originalToken=null,i.commentMode=!1,i.openedTag=null,i.symbolFont=!1,i.listType=null,i.indentGuesser=d.indentGuesser(),i.emitter=e(a,a.document),i.styles=d.styles(),i.spanCount=[],i.skippedPara=!1,i.styleLevelAdjust=0,i.bulletInfo=void 0};j({});var k=function(a){j(a)},l=function(a,b){i.styles.check(b)||(i.symbolFont=g.checkFont(b,i.symbolFont),i.nextFilter(a,i,b))};return a.createFilter(l,k)})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.tinymce.BrowserFilters",["ephox.powerpaste.legacy.tinymce.Util"],function(a){var b=function(a){var b=a,c=65279===b.charCodeAt(b.length-1);return c?b.substring(0,b.length-1):a},c=function(a){return/<(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)/.test(a)?a.replace(/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"):a},d=function(a){return a.replace(/<br><br>/g,"<BR><BR>")},e=function(a){return a.replace(/<br>/g," ")},f=function(a){return a.replace(/<BR><BR>/g,"<br>")},g=[b],h=tinymce.isIE&&document.documentMode>=9?[f,e,d,c].concat(g):g,i=a.compose(h);return{all:i,textOnly:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.FilterInlineStyles",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){var b=/^(mso-.*|tab-stops|tab-interval|language|text-underline|text-effect|text-line-through|font-color|horiz-align|list-image-[0-9]+|separator-image|table-border-color-(dark|light)|vert-align|vnd\..*)$/,c=function(a){return function(c,d){var e=!1;switch(a){case"all":case"*":e=!0;break;case"valid":e=!b.test(c);break;case void 0:case"none":e="list-style-type"===c;break;default:e=(","+a+",").indexOf(","+c+",")>=0}return e?d:null}};return a.createFilter(function(a,b){var d=a.settings.get("retain_style_properties");b.filterStyles(c(d)),a.emit(b)})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.InferListTags",["ephox.powerpaste.legacy.data.tokens.Filter","ephox.powerpaste.legacy.data.tokens.Token"],function(a,b){return a.createFilter(function(a,c){a.seenList?a.emit(c):a.inferring?("LI"===c.tag()&&(c.type()===b.START_ELEMENT_TYPE?a.inferring++:(a.inferring--,a.inferring||(a.needsClosing=!0))),a.emit(c)):("OL"===c.tag()||"UL"===c.tag()?a.seenList=!0:"LI"===c.tag()&&(a.inferring=1,a.needsClosing||a.emit(b.createStartElement("UL",{},{},a.document))),!a.needsClosing||a.inferring||c.isWhitespace()||(a.needsClosing=!1,a.emit(b.createEndElement("UL",a.document))),a.emit(c))})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripBookmarks",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createAttributeFilter(function(a,b){return"name"===a||"id"===a?null:b})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripClassAttributes",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createAttributeFilter(function(a,b){var c;if("class"===a)switch(c=this.settings.get("strip_class_attributes")){case"mso":return 0===b.indexOf("Mso")?null:b;case"none":return b;default:return null}return b})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripEmptyInlineElements",["ephox.powerpaste.legacy.data.tokens.Filter","ephox.powerpaste.legacy.data.tokens.Helper","ephox.powerpaste.legacy.data.tokens.Token"],function(a,b,c){var d=[],e=[],f=!1,g=function(a,b){var e,f,g=1;for(e=b+1;e<a;e++)if(f=d[e],f&&"SPAN"===f.tag())if(f.type()===c.START_ELEMENT_TYPE)g++;else if(f.type()===c.END_ELEMENT_TYPE&&(g--,0===g))return void(d[e]=null)},h=function(a){if(f){var h,j,i=d.length;for(j=0;j<i;j++)h=d[j],h&&(h.type()===c.START_ELEMENT_TYPE&&"SPAN"===h.tag()&&b.hasNoAttributes(h)?g(i,j):a.emit(h))}d=[],e=[],f=!1},i=function(a,b){if(d.push(b),e=e||[],b.type()===c.START_ELEMENT_TYPE)e.push(b);else if(b.type()===c.END_ELEMENT_TYPE&&(e.pop(),0===e.length))return void h(a,b)};return a.createFilter(function(a,e){var g=",FONT,EM,STRONG,SAMP,ACRONYM,CITE,CODE,DFN,KBD,TT,B,I,U,S,SUB,SUP,INS,DEL,VAR,SPAN,";d=d||[];var h=function(a){return!(g.indexOf(","+a.tag()+",")>=0&&b.hasNoAttributes(a,!0))};0===d.length?e.type()===c.START_ELEMENT_TYPE?h(e)?a.emit(e):i(a,e):a.emit(e):(f||(f=h(e)),i(a,e))})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripEmptyStyleAttributes",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createAttributeFilter(function(a,b){return"style"===a&&""===b?null:b})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripLangAttribute",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createAttributeFilter(function(a,b){return"lang"===a?null:b})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripImages",["ephox.powerpaste.legacy.data.tokens.Filter","ephox.powerpaste.legacy.data.tokens.Token"],function(a,b){return a.createFilter(function(a,c){if("IMG"===c.tag()){if(c.type()===b.END_ELEMENT_TYPE&&a.skipEnd)return void(a.skipEnd=!1);if(c.type()===b.START_ELEMENT_TYPE){if(/^file:/.test(c.getAttribute("src")))return void(a.skipEnd=!0);if(a.settings.get("base_64_images")&&/^data:image\/.*;base64/.test(c.getAttribute("src")))return void(a.skipEnd=!0)}}a.emit(c)})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripMetaAndLinkElements",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createFilter(function(a,b){"META"!==b.tag()&&"LINK"!==b.tag()&&a.emit(b)})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripNoAttributeA",["ephox.powerpaste.legacy.data.tokens.Filter","ephox.powerpaste.legacy.data.tokens.Helper","ephox.powerpaste.legacy.data.tokens.Token"],function(a,b,c){var d=function(a){return!b.hasNoAttributes(a)&&!/^OLE_LINK/.test(a.getAttribute("name"))},e=[];return a.createFilter(function(a,b){var f;b.type()===c.START_ELEMENT_TYPE&&"A"===b.tag()?(e.push(b),d(b)&&a.defer(b)):b.type()===c.END_ELEMENT_TYPE&&"A"===b.tag()?(f=e.pop(),d(f)&&a.defer(b),0===e.length&&a.emitDeferred()):a.hasDeferred()?a.defer(b):a.emit(b)})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripScripts",["ephox.powerpaste.legacy.data.tokens.Filter","ephox.powerpaste.legacy.data.tokens.Token"],function(a,b){var c=!1;return a.createFilter(function(a,d){"SCRIPT"===d.tag()?c=d.type()===b.START_ELEMENT_TYPE:c||(d.filterAttributes(function(a,b){return/^on/.test(a)||"language"===a?null:b}),a.emit(d))})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.wordimport.CommonFilters",["ephox.powerpaste.legacy.filters.FilterInlineStyles","ephox.powerpaste.legacy.filters.InferListTags","ephox.powerpaste.legacy.filters.StripBookmarks","ephox.powerpaste.legacy.filters.StripClassAttributes","ephox.powerpaste.legacy.filters.StripEmptyInlineElements","ephox.powerpaste.legacy.filters.StripEmptyStyleAttributes","ephox.powerpaste.legacy.filters.StripLangAttribute","ephox.powerpaste.legacy.filters.StripImages","ephox.powerpaste.legacy.filters.StripMetaAndLinkElements","ephox.powerpaste.legacy.filters.StripNoAttributeA","ephox.powerpaste.legacy.filters.StripScripts"],function(a,b,c,d,e,f,g,h,i,j,k){return[k,c,h,a,g,f,d,j,e,i,b]})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripFormattingAttributes",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createFilter(function(a,b){b.filterAttributes(function(a,c){return"align"===a?null:"UL"!==b.tag()&&"OL"!==b.tag()||"type"!==a?c:null}),a.emit(b)})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripNamespaceDeclarations",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createAttributeFilter(function(a,b){return/^xmlns(:|$)/.test(a)?null:b})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripOPTags",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createFilter(function(a,b){b.tag&&/^([OVWXP]|U[0-9]+|ST[0-9]+):/.test(b.tag())||a.emit(b)})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripTocLinks",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createAttributeFilter(function(a,b){return"href"===a&&(b.indexOf("#_Toc")>=0||b.indexOf("#_mso")>=0)?null:b})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.filters.StripVMLAttributes",["ephox.powerpaste.legacy.data.tokens.Filter"],function(a){return a.createAttributeFilter(function(a,b){return/^v:/.test(a)?null:b})})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.wordimport.WordOnlyFilters",["ephox.powerpaste.legacy.filters.StripFormattingAttributes","ephox.powerpaste.legacy.filters.StripNamespaceDeclarations","ephox.powerpaste.legacy.filters.StripOPTags","ephox.powerpaste.legacy.filters.StripTocLinks","ephox.powerpaste.legacy.filters.StripVMLAttributes","ephox.powerpaste.legacy.filters.list.Lists"],function(a,b,c,d,e,f){return[c,f,d,e,b,a]})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.legacy.wordimport.WordImport",["ephox.powerpaste.legacy.data.tokens.Serializer","ephox.powerpaste.legacy.data.tokens.Tokenizer","ephox.powerpaste.legacy.filters.Text","ephox.powerpaste.legacy.filters.list.Lists","ephox.powerpaste.legacy.tinymce.BrowserFilters","ephox.powerpaste.legacy.wordimport.CommonFilters","ephox.powerpaste.legacy.wordimport.WordOnlyFilters"],function(a,b,c,d,e,f,g){var h=function(a,b,c,d){var e,f=b;for(e=a.length-1;e>=0;e--)f=a[e](f,c,d);return f},i=function(c,d,e,f){var g=a.create(e),i=b.tokenize(c,e);for(pipeline=h(f,g,d,e);i.hasNext();)pipeline.receive(i.next());return g.dom},j=function(a,b,c){var d=e.all(a),h=l(d);b.setWordContent(h);var j=f;return h&&(j=g.concat(f)),i(d,b,c,j)},k=function(a,b,d){var f=e.textOnly(a);return i(f,b,d,[c])},l=function(a){return a.indexOf("<o:p>")>=0||a.indexOf("p.MsoNormal, li.MsoNormal, div.MsoNormal")>=0||a.indexOf("MsoListParagraphCxSpFirst")>=0||a.indexOf("<w:WordDocument>")>=0};return{filter:j,filterPlainText:k,isWordContent:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.LegacyTinyDialog",["ephox.powerpaste.legacy.data.Insert","ephox.powerpaste.legacy.tinymce.Settings","ephox.powerpaste.legacy.wordimport.WordImport","global!setTimeout"],function(a,b,c,d){return function(e,f){var g=function(g){var h=function(d){var f={content:g};e.fire("PastePreProcess",f);var h=b.create(d||e.settings.powerpaste_word_import,d||e.settings.powerpaste_html_import,!0),i=c.filter(f.content,h,e.getDoc());e.fire("PastePostProcess",i),e.undoManager.transact(function(){a.insert(i,e)})},i=function(a){return"clean"===a||"merge"===a},j=function(){var a,b=function(){a.close(),h("clean")},c=function(){a.close(),h("merge")},g=[{text:f("cement.dialog.paste.clean"),onclick:b},{text:f("cement.dialog.paste.merge"),onclick:c}],i={title:f("cement.dialog.paste.title"),spacing:10,padding:10,items:[{type:"container",html:f("cement.dialog.paste.instructions")}],buttons:g};a=e.windowManager.open(i),d(function(){a&&a.getEl().focus()},1)};c.isWordContent(g)&&!i(e.settings.powerpaste_word_import)?j():i(e.settings.powerpaste_html_import)?h():j()};return{showDialog:g}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.LegacyPowerPaste",["ephox.powerpaste.i18n.I18n","ephox.powerpaste.legacy.tinymce.Clipboard","ephox.powerpaste.tinymce.LegacyTinyDialog"],function(a,b,c){return function(d,e){var g,h,f=this,i=c(d,a.translate),j=function(a){return function(b){a(b)}};g=b.getOnPasteFunction(d,i.showDialog),d.on("paste",j(g)),h=b.getOnKeyDownFunction(d,i.showDialog),d.on("keydown",j(h)),d.addCommand("mceInsertClipboardContent",function(a,b){i.showDialog(b.content||b)}),d.settings.paste_preprocess&&d.on("PastePreProcess",function(a){d.settings.paste_preprocess.call(f,f,a)})}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.epithet.Id",[],function(){var a=0,b=function(b){var c=new Date,d=c.getTime(),e=Math.floor(1e9*Math.random());return a++,b+"_"+e+a+String(d)};return{generate:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.DeviceType",["ephox.peanut.Fun"],function(a){return function(b,c,d){var e=b.isiOS()&&d.search(/iPad/i)!==-1,f=b.isiOS()&&!e,g=b.isAndroid()&&3===b.version.major,h=b.isAndroid()&&4===b.version.major,i=e||g||h&&d.search(/mobile/i)===-1,j=b.isiOS()||b.isAndroid(),k=j&&!i;return{isiPad:a.constant(e),isiPhone:a.constant(f),isTablet:a.constant(i),isPhone:a.constant(k),isTouch:a.constant(j),isAndroid:b.isAndroid,isiOS:b.isiOS}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.Platform",[],function(){var a=function(a,b,c){return{browser:{current:a,version:b},os:{current:c}}};return{create:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.GetterHelper",[],function(){var a=function(a){return function(){return a}},b=function(b,c,d){for(var e=0;e<d.length;e++)b["is"+d[e].name]=a(d[e].name===c)};return{getter:a,attachGetters:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.Result",["ephox.fred.core.GetterHelper"],function(a){var b=function(b,c,d){var e=a.attachGetters,f={};return f.current=c,f.version=d,e(f,f.current,b),f};return{create:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.SearchInfo",["ephox.violin.Strings"],function(a){var b=a.contains,c=function(a){return function(c){return b(c,a)}},d=function(){try{var a=new ActiveXObject("ChromeTab.ChromeFrame");return!!a}catch(a){return!1}},e=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,f=function(a){var d=[{name:"Spartan",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){var c=b(a,"edge/")&&b(a,"chrome")&&b(a,"safari")&&b(a,"applewebkit");return c}},{name:"ChromeFrame",versionRegexes:[/.*?chromeframe\/([0-9]+)\.([0-9]+).*/,e],search:function(c){return!!b(c,"chromeframe")&&a()}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,e],search:function(a){return b(a,"chrome")&&!b(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(c){var d=b(c,"msie")||b(c,"trident"),e=b(c,"chromeframe");return e?d&&!a():d}},{name:"Opera",versionRegexes:[e,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:c("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:c("firefox")},{name:"Safari",versionRegexes:[e],search:c("safari")},{name:"Envjs",versionRegexes:[/.*?envjs\/\ ?([0-9]+)\.([0-9]+).*/],search:c("envjs")}],f=[{name:"Windows",search:c("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return b(a,"iphone")||b(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/]},{name:"Android",search:c("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:c("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:c("linux")},{name:"Solaris",search:c("sunos")},{name:"FreeBSD",search:c("freebsd")}];return{browsers:d,oses:f}};return{create:f,chromeFrameChecker:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.SpecTester",[],function(){var a=function(a,b){var c=typeof a;if("boolean"===c)return!!a;if("object"===c){var d=a.minimum;return b.major>d.major||b.major===d.major&&b.minor>=d.minor}throw"invalid spec"};return{meetsSpec:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.Fn",[],function(){var a=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(c(e,d,a))return e}return b};return{findOneInArrayOr:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.UaStringDetector",["ephox.fred.core.Fn"],function(a){var b=function(b,c){var d=a.findOneInArrayOr,e=String(c).toLowerCase();return d(b,{name:void 0},function(a){return a.search(e)})};return{detect:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.core.VersionDetector",[],function(){var a=function(a,b){function c(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.test(b))return d}}function d(a,b){var d=c(a,b);if(!d)return{major:0,minor:0};var e=function(a){return Number(b.replace(d,"$"+a))};return{major:e(1),minor:e(2)}}var e=String(b).toLowerCase(),f=a.versionRegexes;return f?d(f,e):{major:0,minor:0}};return{detectVersion:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fred.PlatformDetection",["ephox.fred.core.DeviceType","ephox.fred.core.Platform","ephox.fred.core.Result","ephox.fred.core.SearchInfo","ephox.fred.core.SpecTester","ephox.fred.core.UaStringDetector","ephox.fred.core.VersionDetector"],function(a,b,c,d,e,f,g){var h=g.detectVersion,i=c.create,j=e.meetsSpec,k=f.detect,l=function(a,b,c,d){return!!a[b]&&(a[b][c]?j(a[b][c],d):!!a[b].All)},m=function(a,b){var c=b.browser,d=b.os;return l(a,d.current,c.current,c.version)},n=function(b,c){var e=d.create(c),f=e.browsers,g=e.oses,j=k(g,b),m=j.name,n=h(j,b),o=k(f,b),p=o.name,q=h(o,b),r=i(g,m,n),s=i(f,p,q),t=a(r,s,b),u=function(a){return l(a,m,p,q)};return{browser:s,os:r,deviceType:t,isSupported:u}},o=function(){return n(navigator.userAgent,d.chromeFrameChecker)};return{Platform:b,detect:o,doDetect:n,isSupported:l,isSupportedPlatform:m}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.api.FileReader",["ephox.numerosity.core.Global"],function(a){return function(){var b=a.getOrDie("FileReader");return new b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.hermes.utils.ImageExtract",["ephox.compass.Arr","ephox.epithet.Id","ephox.fred.PlatformDetection","ephox.hermes.api.ImageAsset","ephox.numerosity.api.FileReader","ephox.numerosity.api.URL","ephox.scullion.Struct"],function(a,b,c,d,e,f,g){var h=g.immutable("id","obj","objurl"),i=function(a){return h(b.generate("image"),a,f.createObjectURL(a))},j=c.detect(),k=function(b,c){if(0===b.length)return void c([]);var f=[],g=function(a){f.push(a),f.length===b.length&&c(f)},h=function(a,b){var c=e();c.onload=function(c){b(a,c.target)},c.readAsDataURL(a)};a.each(b,function(a){var b=a.id(),c=a.obj(),e=a.objurl();h(c,function(a,c){var f=d.blob(b,a,e,c);g(f)})})},l=function(b,c){var d=a.map(b,function(a){return i(a)});k(d,c)},m=function(a){return a.raw().target.files||a.raw().dataTransfer.files},n=function(b){
return 1===b.length&&a.contains(b,"Files")},o=function(b){return!a.contains(b,"text/_moz_htmlcontext")},p=function(b){return a.contains(b,"Files")},q=function(a){return!0},r=function(){return j.browser.isChrome()||j.browser.isSafari()||j.browser.isOpera()?p:j.browser.isFirefox()?o:j.browser.isIE()?n:q},s=r(),t=function(c){return a.map(c,function(a){var c=b.generate("image");return d.url(c,a.src,a)})};return{blob:i,toAssets:l,toFiles:m,isFiles:s,fromImages:t,fromBlobs:k}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.hermes.api.ImageExtract",["ephox.hermes.utils.ImageExtract"],function(a){var b=function(b,c){return a.toAssets(b,c)},c=function(b,c){return a.fromBlobs(b,c)};return{toAssets:b,fromBlobs:c,blob:a.blob}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.ModernPowerDrop",["ephox.compass.Arr","ephox.hermes.api.ImageAsset","ephox.hermes.api.ImageExtract","ephox.sugar.api.Attr","ephox.sugar.api.Element","global!tinymce"],function(a,b,c,d,e,f){return function(g,h,i,j){var k,l=/^image\/(jpe?g|png|gif|bmp)$/i;g.on("dragstart dragend",function(a){k="dragstart"===a.type}),g.on("dragover dragend dragleave",function(a){a.preventDefault()});var m=function(b){var c=b.target.files||b.dataTransfer.files;return a.filter(c,function(a){return l.test(a.type)})},n=function(c){return a.map(c,function(a){var c=e.fromTag("img"),f=b.cata(a,j.getLocalURL,function(a,b,c){return b});return d.set(c,"src",f),c.dom().outerHTML}).join("")},o=function(a){c.toAssets(a,function(a){var b=n(a);g.insertContent(b,{merge:g.settings.paste_merge_formats!==!1}),j.uploadImages(a)})};g.on("drop",function(a){if(!k){if(f.dom.RangeUtils&&f.dom.RangeUtils.getCaretRangeFromPoint){var b=f.dom.RangeUtils.getCaretRangeFromPoint(a.clientX,a.clientY,g.getDoc());b&&g.selection.setRng(b)}var c=m(a);c.length>0&&o(c),a.preventDefault()}})}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.api.Blob",["ephox.numerosity.core.Global"],function(a){return function(b,c){var d=a.getOrDie("Blob");return new d(b,c)}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.numerosity.api.Uint8Array",["ephox.numerosity.core.Global"],function(a){return function(b){var c=a.getOrDie("Uint8Array");return new c(b)}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!parseInt",[],function(){return parseInt}),function(a,b,c){a("ephox.bowerbird.codes.HexToBlob",["ephox.numerosity.api.Blob","ephox.numerosity.api.Uint8Array","global!Array","global!Math","global!String","global!parseInt"],function(a,b,c,d,e,f){var g=function(a){for(var b=new c(a.length/2),e=0;e<a.length;e+=2){var g=a.substr(e,2),h=d.floor(e/2);b[h]=f(g,16)}return b},h=function(c,d){if(0===c.length)throw"Zero length content passed to Hex conversion";var e=g(c),f=b(e);return a([f],{type:d})};return{convert:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.bowerbird.core.Species",["ephox.peanut.Fun","ephox.perhaps.Option"],function(a,b){var c="{\\pict{",d="i",e="{\\shp{",f="s",g=function(a,b,c){return b.indexOf(a,c)},h=function(c,d,e,f,g){return c===-1||d===-1?b.none():b.some({start:a.constant(c),end:a.constant(d),bower:e,regex:a.constant(f),idRef:a.constant(g)})},i=function(a,b,c){return function(){return a.substring(b,c)}},j=function(a,b){var e,f,c=0,d=a.length;do if(e=a.indexOf("{",b),f=a.indexOf("}",b),f>e&&e!==-1?(b=e+1,++c):(e>f||e<0)&&f!==-1&&(b=f+1,--c),b>d||f===-1)return-1;while(c>0);return b},k=function(a,b,c){var e=c===-1?c:j(a,c),f=i(a,c,e),g=/([a-hA-H0-9]+)\}$/;return h(c,e,f,g,d)},l=function(a,b,c){var d=c===-1?c:j(a,c),e=i(a,c,d),g=/([a-hA-H0-9]{64,})(?:\}.*)/;return h(c,d,e,g,f)},m=function(a,d){var f=g(c,a,d),h=g(e,a,d);return f===-1&&h===-1?b.none():f===-1?l(a,d,h):h===-1?k(a,d,f):f<h?k(a,d,f):h<f?l(a,d,h):b.none()};return{identify:m,endBracket:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.bowerbird.core.Rtf",["ephox.bowerbird.codes.HexToBlob","ephox.bowerbird.core.Species","ephox.perhaps.Option"],function(a,b,c){var d=function(a,c){return b.identify(a,c)},e=function(a){return a.indexOf("\\pngblip")>=0?c.some("image/png"):a.indexOf("\\jpegblip")>=0?c.some("image/jpeg"):c.none()},f=function(a){return a.length%2===0},g=function(a){return a.replace(/\r/g,"").replace(/\n/g,"")},h=function(a,b){var d=a.match(b);return null!==d?c.some(d[1]):c.none()},i=function(a,b){return h(a,b).filter(f)},j=function(a){var b=/\\shplid(\d+)/;return h(a,b)},k=function(b){var c=b.bower(),d=b.regex();return j(c).bind(function(f){return e(c).bind(function(e){return i(c,d).map(function(c){return{id:b.idRef()+f,contentType:e,blob:a.convert(c,e)}})})})},l=function(a){for(var b=[],c=function(){return a.length},e=function(a){var c=k(a);return c.each(function(a){b.push(a)}),a.end()+1},f=0;f<a.length;)f=d(a,f).fold(c,e);return b},m=function(a){return l(g(a))};return{nextBower:d,extractId:j,extractContentType:e,extractHex:i,images:m}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.bowerbird.api.Rtf",["ephox.bowerbird.core.Rtf"],function(a){var b=function(b){return a.images(b)};return{images:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.flash.Correlation",["ephox.compass.Arr","ephox.hermes.api.ImageExtract","ephox.perhaps.Option","ephox.scullion.Struct","ephox.sugar.api.Attr","ephox.sugar.api.Class"],function(a,b,c,d,e,f){var g=d.immutable("id","url"),h=function(b,d,f){var g=a.find(d,function(a){return e.get(b,"data-image-id")===a.id()});return c.from(g)},i=function(a,b,d){return c.from(b[d])},j={local:i,code:h},k=function(d,h,i){var k=[],l=a.bind(h,function(c){var d=!a.exists(k,function(a){return a.id()===c.id});if(d){var e=b.blob(c.blob);return k.push(g(c.id,e.objurl())),[e]}return[]});b.fromBlobs(l,function(b){a.each(d,function(a,b){var d=e.get(a,"data-image-type"),g=void 0!==j[d]?j[d]:c.none;g(a,k,b).each(function(b){e.set(a,"src",b.url())}),f.remove(a,"rtf-data-image"),e.remove(a,"data-image-type"),e.remove(a,"data-image-id")}),i(b)})};return{convert:k}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.style.Styles",["ephox.flour.style.Resolver"],function(a){var b=a.create("ephox-cement");return{resolve:b.resolve}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.flash.HelpCopy",["ephox.cement.style.Styles","ephox.fred.PlatformDetection","ephox.sugar.api.Class","ephox.sugar.api.Element","ephox.sugar.api.InsertAll"],function(a,b,c,d,e){var f=function(){var a=b.detect(),c=a.os.isOSX();return c?["⌘"]:["Ctrl"]},g=function(a){return d.fromHtml("<p>"+a("cement.dialog.flash.press-escape")+"</p>")},h=function(b){var h=d.fromTag("div");c.add(h,a.resolve("flashbin-helpcopy"));var i=f(),j=d.fromHtml("<p>"+b("cement.dialog.flash.trigger-paste")+"</p>"),k=d.fromHtml('<div><span class="ephox-polish-help-kbd">'+i+'</span> + <span class="ephox-polish-help-kbd">V</span></div>');return c.add(k,a.resolve("flashbin-helpcopy-kbd")),e.append(h,[j,k,g(b)]),h},i=function(b){var f=d.fromTag("div");c.add(f,a.resolve("flashbin-helpcopy"));var h=d.fromHtml("<p>"+b("cement.dialog.flash.missing")+"</p>");return e.append(f,[h,g(b)]),f},j=function(b){var f=d.fromTag("div");c.add(f,a.resolve("flashbin-loading"));var g=d.fromTag("div");c.add(g,a.resolve("flashbin-loading-spinner"));var h=d.fromTag("p");return h.dom().innerHTML=b("loading.wait"),e.append(f,[g,h]),f};return{paste:h,noflash:i,indicator:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!window",[],function(){return window}),function(a,b,c){a("ephox.sugar.api.Css",["ephox.classify.Type","ephox.compass.Obj","ephox.perhaps.Option","ephox.sugar.api.Attr","ephox.sugar.api.Body","ephox.sugar.api.Element","ephox.violin.Strings","global!Error","global!console","global!window"],function(a,b,c,d,e,f,g,h,i,j){var k=function(b,c,d){if(!a.isString(d))throw i.error("Invalid call to CSS.set. Property ",c,":: Value ",d,":: Element ",b),new h("CSS value must be a string: "+d);b.style.setProperty(c,d)},l=function(a,b,c){var d=a.dom();k(d,b,c)},m=function(a,c){var d=a.dom();b.each(c,function(a,b){k(d,b,a)})},n=function(a,b){var c=a.dom(),d=j.getComputedStyle(c),f=d.getPropertyValue(b),g=""!==f||e.inBody(a)?f:o(c,b);return null===g?void 0:g},o=function(a,b){return a.style.getPropertyValue(b)},p=function(a,b){var d=a.dom(),e=o(d,b);return c.from(e).filter(function(a){return a.length>0})},q=function(a,b,c){var d=f.fromTag(a);l(d,b,c);var e=p(d,b);return e.isSome()},r=function(a,b){var c=a.dom();c.style.removeProperty(b),d.has(a,"style")&&""===g.trim(d.get(a,"style"))&&d.remove(a,"style")},s=function(a,b){var c=d.get(a,"style"),e=b(a),f=void 0===c?d.remove:d.set;return f(a,"style",c),e},t=function(a,b){b.dom().style.cssText=a.dom().style.cssText},u=function(a){return a.dom().offsetWidth};return{copy:t,set:l,preserve:s,setAll:m,remove:r,get:n,getRaw:p,isValidValue:q,reflow:u}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!navigator",[],function(){return navigator}),function(a,b,c){a("ephox.cement.flash.FlashInfo",["ephox.cement.flash.HelpCopy","ephox.cement.style.Styles","ephox.fred.PlatformDetection","ephox.peanut.Fun","ephox.sugar.api.Class","ephox.sugar.api.Css","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.InsertAll","global!navigator"],function(a,b,c,d,e,f,g,h,i,j){var k=c.detect(),l=function(){return new ActiveXObject("ShockwaveFlash.ShockwaveFlash")},m=function(){try{var a=k.browser.isIE()?l():j.plugins["Shockwave Flash"];return void 0!==a}catch(a){return!1}},n=function(b,c,e,f){var g=a.noflash(f);return h.append(b,g),{reset:d.noop}},o=function(b,c,d,e){var g=a.paste(e),h=a.indicator(e);i.append(b,[h,g,c.element()]);var j=function(){f.setAll(h,{height:"0",padding:"0"})},k=function(){f.set(g,"display","block"),f.set(h,"display","none"),d()},l=function(){f.set(g,"display","none"),f.set(h,"display","block"),f.remove(h,"height"),f.remove(h,"padding"),d()};return c.events.spin.bind(l),c.events.reset.bind(k),c.events.hide.bind(j),{reset:k}};return function(a,c,f){var h=g.fromTag("div"),i="flashbin-wrapper-"+(k.os.isOSX()?"cmd":"ctrl");e.add(h,b.resolve(i));var j=m()?o:n,l=j(h,a,c,f.translations);return{element:d.constant(h),reset:l.reset}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!clearInterval",[],function(){return clearInterval}),h.bolt.module.api.define("global!setInterval",[],function(){return setInterval}),function(a,b,c){a("ephox.cement.alien.WaitForFlash",["ephox.classify.Type","ephox.compass.Arr","global!clearInterval","global!setInterval"],function(a,b,c,d){return function(e,f,g){var h=function(c){return b.forall(f,function(b){return a.isFunction(c[b])})},i=function(){var b=e.dom();a.isFunction(b.PercentLoaded)&&100===b.PercentLoaded()&&h(b)&&(l(),g())},j=!0,k=d(i,500),l=function(){j&&(c(k),j=!1)};return{stop:l}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.epithet.Namespace",["ephox.epithet.Global"],function(a){var b=function(a,b){return void 0!==a[b]&&null!==a[b]||(a[b]={}),a[b]},c=function(c,d){for(var e=d||a,f=c.split("."),g=0;g<f.length;++g)e=b(e,f[g]);return e};return{namespace:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.oilspill.callback.Globaliser",["ephox.epithet.Namespace"],function(a){var b=function(b){var c=a.namespace(b);c.callbacks={};var d=0,e=function(){var a="callback_"+d;return d++,a},f=function(a){return b+".callbacks."+a},g=function(a,b){var d=e();return c.callbacks[d]=function(){b||j(d),a.apply(null,arguments)},f(d)},h=function(a){return g(a,!1)},i=function(a){return g(a,!0)},j=function(a){var b=a.substring(a.lastIndexOf(".")+1);void 0!==c.callbacks[b]&&delete c.callbacks[b]};return c.ephemeral=h,c.permanent=i,c.unregister=j,c};return{install:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.PredicateFind",["ephox.classify.Type","ephox.compass.Arr","ephox.peanut.Fun","ephox.perhaps.Option","ephox.sugar.api.Body","ephox.sugar.api.Compare","ephox.sugar.api.Element","ephox.sugar.impl.ClosestOrAncestor"],function(a,b,c,d,e,f,g,h){var i=function(a){return n(e.body(),a)},j=function(b,e,f){for(var h=b.dom(),i=a.isFunction(f)?f:c.constant(!1);h.parentNode;){h=h.parentNode;var j=g.fromDom(h);if(e(j))return d.some(j);if(i(j))break}return d.none()},k=function(a,b,c){var d=function(a){return b(a)};return h(d,j,a,b,c)},l=function(a,b){var c=a.dom();return c.parentNode?m(g.fromDom(c.parentNode),function(c){return!f.eq(a,c)&&b(c)}):d.none()},m=function(a,e){var f=b.find(a.dom().childNodes,c.compose(e,g.fromDom));return d.from(f).map(g.fromDom)},n=function(a,b){var c=function(a){for(var e=0;e<a.childNodes.length;e++){if(b(g.fromDom(a.childNodes[e])))return d.some(g.fromDom(a.childNodes[e]));var f=c(a.childNodes[e]);if(f.isSome())return f}return d.none()};return c(a.dom())};return{first:i,ancestor:j,closest:k,sibling:l,child:m,descendant:n}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.PredicateExists",["ephox.sugar.api.PredicateFind"],function(a){var b=function(b){return a.first(b).isSome()},c=function(b,c,d){return a.ancestor(b,c,d).isSome()},d=function(b,c,d){return a.closest(b,c,d).isSome()},e=function(b,c){return a.sibling(b,c).isSome()},f=function(b,c){return a.child(b,c).isSome()},g=function(b,c){return a.descendant(b,c).isSome()};return{any:b,ancestor:c,closest:d,sibling:e,child:f,descendant:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Focus",["ephox.peanut.Fun","ephox.perhaps.Option","ephox.sugar.api.Compare","ephox.sugar.api.Element","ephox.sugar.api.PredicateExists","ephox.sugar.api.Traverse","global!document"],function(a,b,c,d,e,f,g){var h=function(a){a.dom().focus()},i=function(a){a.dom().blur()},j=function(a){var b=f.owner(a).dom();return a.dom()===b.activeElement},k=function(a){var c=void 0!==a?a.dom():g;return b.from(c.activeElement).map(d.fromDom)},l=function(b){var d=f.owner(b),g=k(d).filter(function(d){return e.closest(d,a.curry(c.eq,b))});g.fold(function(){h(b)},a.noop)},m=function(a){return k(f.owner(a)).filter(function(b){return a.dom().contains(b.dom())})};return{hasFocus:j,focus:h,blur:i,active:k,search:m,focusInside:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!clearTimeout",[],function(){return clearTimeout}),h.bolt.module.api.define("global!unescape",[],function(){return unescape}),function(a,b,c){a("ephox.cement.flash.Flashbin",["ephox.cement.alien.WaitForFlash","ephox.cement.style.Styles","ephox.compass.Arr","ephox.compass.Obj","ephox.epithet.Id","ephox.fred.PlatformDetection","ephox.oilspill.callback.Globaliser","ephox.perhaps.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sugar.api.Class","ephox.sugar.api.Css","ephox.sugar.api.Element","ephox.sugar.api.Focus","ephox.sugar.api.Insert","global!clearTimeout","global!console","global!setTimeout","global!unescape","global!window"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=g.install("ephox.flash"),v=f.detect(),w=h.none();return function(f){var g=j.create({response:i(["rtf"]),spin:i([]),cancel:i([]),error:i(["message"]),reset:i([]),hide:i([])}),h=!1,x=m.fromTag("div");k.add(x,b.resolve("flashbin-target"));var y=function(a){r(function(){g.trigger.response(s(a))},0)},z=function(){if(F.stop(),!h){h=!0;try{var a=D.dom();d.each(B,function(b,c){var d=a[c];d.call(a,b)}),g.trigger.reset(),K(),H()}catch(a){q.log("Flash dialog - Error during onLoad ",a)}}},A=u.permanent(z),B={setSpinCallback:u.permanent(g.trigger.spin),setPasteCallback:u.permanent(y),setEscapeCallback:u.permanent(g.trigger.cancel),setErrorCallback:u.permanent(g.trigger.error)},C=function(){var a=f.replace(/^https?:\/\//,"//"),b="onLoad="+A,c='    <param name="allowscriptaccess" value="always">    <param name="wmode" value="opaque">    <param name="FlashVars" value="'+b+'">';if(v.browser.isIE()&&10===v.browser.version.major){var d=e.generate("flash-bin");return m.fromHtml('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="'+d+'"><param name="movie" value="'+a+'">'+c+"</object>")}return m.fromHtml('<object type="application/x-shockwave-flash" data="'+a+'">'+c+"</object>")},D=C(),E=function(){l.setAll(D,{width:"2px",height:"2px"})};E();var F=a(D,d.keys(B),z);o.append(x,D);var G=function(){return x},H=function(){v.browser.isFirefox()&&t.getSelection().removeAllRanges(),n.focus(D)},I=null,J=function(){k.add(x,b.resolve("flash-activate")),l.remove(D,"height"),l.remove(D,"width"),g.trigger.hide()},K=function(){p(I),k.remove(x,b.resolve("flash-activate")),E()},L=function(){I=r(J,3e3),g.trigger.spin(),l.set(x,"display","block"),H()},M=function(){l.set(x,"display","none"),w.each(function(a){c.each(a,function(a){a.unbind()})})},N=function(){M(),c.each(d.values(B),function(a){u.unregister(a)}),u.unregister(A),F.stop()};return{focus:H,element:G,activate:L,deactivate:M,destroy:N,events:g.registry}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.impl.FilteredEvent",["ephox.peanut.Fun","ephox.sugar.api.Element"],function(a,b){var c=function(b,c,d,e,f,g,h){return{target:a.constant(b),x:a.constant(c),y:a.constant(d),stop:e,prevent:f,kill:g,raw:a.constant(h)}},d=function(d,e){return function(f){if(d(f)){var g=b.fromDom(f.target),h=function(){f.stopPropagation()},i=function(){f.preventDefault()},j=a.compose(i,h),k=c(g,f.clientX,f.clientY,h,i,j,f);e(k)}}},e=function(b,c,e,f,g){var i=d(e,f);return b.dom().addEventListener(c,i,g),{unbind:a.curry(h,b,c,i,g)}},f=function(a,b,c,d){return e(a,b,c,d,!1)},g=function(a,b,c,d){return e(a,b,c,d,!0)},h=function(a,b,c,d){a.dom().removeEventListener(b,c,d)};return{bind:f,capture:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.DomEvent",["ephox.peanut.Fun","ephox.sugar.impl.FilteredEvent"],function(a,b){var c=a.constant(!0),d=function(a,d,e){return b.bind(a,d,c,e)},e=function(a,d,e){return b.capture(a,d,c,e)};return{bind:d,capture:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.flash.FlashDialog",["ephox.cement.flash.FlashInfo","ephox.cement.flash.Flashbin","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sugar.api.DomEvent","ephox.sugar.api.Element","global!window"],function(a,b,c,d,e,f,g){return function(h,i){var j=i.translations,k=d.create({response:c(["rtf","hide"]),cancel:c([]),error:c(["message"])}),l=function(){var c=b(i.swf);c.deactivate();var d=f.fromDom(g),l=e.bind(d,"mouseup",c.focus),m=function(){q()},n=function(){m(),k.trigger.cancel()};c.events.cancel.bind(n),c.events.response.bind(function(a){k.trigger.response(a.rtf(),m)}),c.events.error.bind(function(a){m(),k.trigger.error(a.message())});var o=h();o.setTitle(j("cement.dialog.flash.title"));var p=a(c,o.reflow,i);p.reset(),o.setContent(p.element()),o.events.close.bind(n),o.show(),c.activate();var q=function(){l.unbind(),o.destroy(),c.destroy()}};return{open:l,events:k.registry}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Replication",["ephox.sugar.api.Attr","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.InsertAll","ephox.sugar.api.Remove","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f){var g=function(a,c){return b.fromDom(a.dom().cloneNode(c))},h=function(a){return g(a,!1)},i=function(a){return g(a,!0)},j=function(c,d){var e=b.fromTag(d),f=a.clone(c);return a.setAll(e,f),e},k=function(a,b){var c=j(a,b),e=f.children(i(a));return d.append(c,e),c},l=function(a,b){var g=j(a,b);c.before(a,g);var h=f.children(a);return d.append(g,h),e.remove(a),g};return{shallow:h,shallowAs:j,deep:i,copy:k,mutate:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.limbo.api.RtfImage",["ephox.perhaps.Option","ephox.sugar.api.Attr","ephox.sugar.api.Class","ephox.sugar.api.Css","ephox.sugar.api.Element","ephox.sugar.api.Node","ephox.sugar.api.PredicateFind","ephox.sugar.api.Replication","ephox.sugar.api.SelectorFilter","ephox.violin.Strings"],function(a,b,c,d,e,f,g,h,i,j){var k=function(a,b){var c=f.value(a),d=e.fromTag("div"),h=c.indexOf("]>");return d.dom().innerHTML=c.substr(h+"]>".length),g.descendant(d,function(a){return f.name(a)===b})},l=function(b){return f.isComment(b)?k(b,"v:shape"):a.none()},m=function(a){return l(a).map(function(a){var f=b.get(a,"o:spid"),g=void 0===f?b.get(a,"id"):f,h=e.fromTag("img");return c.add(h,"rtf-data-image"),b.set(h,"data-image-id",g.substr("_x0000_".length)),b.set(h,"data-image-type","code"),d.setAll(h,{width:d.get(a,"width"),height:d.get(a,"height")}),h})},n=function(d){if("img"===f.name(d)){var e=b.get(d,"src");if(void 0!==e&&null!==e&&j.startsWith(e,"file://")){var g=h.shallow(d),i=e.split(/[\/\\]/),k=i[i.length-1];return b.set(g,"data-image-id",k),b.remove(g,"src"),b.set(g,"data-image-type","local"),c.add(g,"rtf-data-image"),a.some(g)}return a.none()}return a.none()},o=function(a){return p(a).length>0},p=function(a){return i.descendants(a,".rtf-data-image")};return{local:n,vshape:m,find:p,exists:o,scour:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.flash.Flash",["ephox.bowerbird.api.Rtf","ephox.cement.flash.Correlation","ephox.cement.flash.FlashDialog","ephox.compass.Arr","ephox.limbo.api.RtfImage","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sugar.api.Remove","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f,g,h,i){return function(j,k){var l=g.create({error:f(["message"]),insert:f(["elements","assets"])}),m=function(f,g){var m=function(c){var d=c.hide(),h=a.images(c.rtf()),j=e.find(f);b.convert(j,h,function(a){l.trigger.insert(i.children(f),a.concat(g)),d()})},n=function(){var a=e.find(f);d.each(a,h.remove),l.trigger.insert(i.children(f),g)};if(k.allowLocalImages){var o=c(j,k);o.events.response.bind(m),o.events.cancel.bind(n),o.events.error.bind(function(a){l.trigger.error(a.message())}),o.open()}else n(),l.trigger.error("errors.local.images.disallowed")};return{events:l.registry,gordon:m}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.smartpaste.MergeSettings",["ephox.cement.style.Styles","ephox.highway.Merger","ephox.peanut.Fun","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sugar.api.Class","ephox.sugar.api.Element","ephox.sugar.api.Insert"],function(a,b,c,d,e,f,g,h){return function(i,j){var k=j.translations,l=function(a,c,d){d(b.merge(c,{mergeOfficeStyles:a,mergeHtmlStyles:a}))},m=e.create({open:d([]),cancel:d([]),close:d([])}),n=function(b,c){var d=function(){s(),l(!1,b,c)},e=function(){s(),l(!0,b,c)},j=g.fromTag("div");f.add(j,a.resolve("styles-dialog-content"));var n=g.fromTag("p"),o=g.fromText(k("cement.dialog.paste.instructions"));h.append(n,o),h.append(j,n);var p={text:k("cement.dialog.paste.clean"),tabindex:0,className:a.resolve("clean-styles"),click:d},q={text:k("cement.dialog.paste.merge"),tabindex:1,className:a.resolve("merge-styles"),click:e},r=i(!0);r.setTitle(k("cement.dialog.paste.title")),r.setContent(j),r.setButtons([p,q]),r.show();var s=function(){m.trigger.close(),r.destroy()},t=function(){m.trigger.cancel(),s()};r.events.close.bind(t),m.trigger.open()},o=function(a,b){var c=a?"officeStyles":"htmlStyles",d=j[c];"clean"===d?l(!1,j,b):"merge"===d?l(!0,j,b):n(j,b)};return{events:m.registry,get:o,destroy:c.noop}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.smartpaste.Inspection",[],function(){var a=function(a){return void 0!==a&&void 0!==a.types&&null!==a.types};return{isValidData:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.html.Transform",["ephox.classify.Type","ephox.sugar.api.Attr"],function(a,b){var c=function(c,d){var e=d.style;if(b.has(c,"width")&&b.has(c,"height")&&a.isString(e)){var f=e.match(/rotation:([^;]*)/);null===f||"90"!==f[1]&&"-90"!==f[1]||b.setAll(c,{width:b.get(c,"height"),height:b.get(c,"width")})}};return{rotateImage:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Comments",["ephox.fred.PlatformDetection","ephox.peanut.Fun","ephox.sugar.api.Element","global!document"],function(a,b,c,d){var e=function(a){for(var b=[];null!==a.nextNode();)b.push(c.fromDom(a.currentNode));return b},f=function(a){try{return e(a)}catch(a){return[]}},g=a.detect().browser,h=g.isIE()||g.isSpartan()?f:e,i=b.constant(b.constant(!0)),j=function(a,b){var c=b.fold(i,function(a){return function(b){return a(b.nodeValue)}});c.acceptNode=c;var e=d.createTreeWalker(a.dom(),NodeFilter.SHOW_COMMENT,c,!1);return h(e)};return{find:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.alien.Comments",["ephox.perhaps.Option","ephox.sugar.api.Comments","ephox.violin.Strings","global!document"],function(a,b,c,d){var e=function(d){return b.find(d,a.some(function(a){return c.startsWith(a,"[if gte vml 1]")}))};return{find:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.perhaps.Options",["ephox.perhaps.Option"],function(a){var b=function(a){for(var b=[],c=function(a){b.push(a)},d=0;d<a.length;d++)a[d].each(c);return b},c=function(b,c){for(var d=0;d<b.length;d++){var e=c(b[d],d);if(e.isSome())return e}return a.none()},d=function(b,c){for(var d=[],e=0;e<b.length;e++){var f=b[e];if(!f.isSome())return a.none();d.push(f.getOrDie())}return a.some(c.apply(null,d))};return{cat:b,findMap:c,liftN:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.images.ImageReference",["ephox.cement.alien.Comments","ephox.compass.Arr","ephox.limbo.api.RtfImage","ephox.perhaps.Option","ephox.perhaps.Options","ephox.scullion.Struct","ephox.sugar.api.Attr","ephox.sugar.api.Elements","ephox.sugar.api.SelectorFilter","global!console"],function(a,b,c,d,e,f,g,h,i,j){var k=f.immutable("img","vshape"),l=function(a){var b=n(a);return b._rawElement=a.dom(),b},m=function(a){var b=n(a);return b._rawElement=a.dom(),b},n=function(a){return g.clone(a)},o=function(d){var f=h.fromHtml(d),g=b.bind(f,function(a){return i.descendants(a,"img")}),j=b.bind(f,a.find),k=e.cat(b.map(j,c.scour)),l=b.map(g,function(a){return p(a,k)});return e.cat(l)},p=function(a,c){var e=g.get(a,"v:shapes"),f=d.from(b.find(c,function(a){return g.get(a,"id")===e}));return f.isNone()&&j.log("WARNING: unable to find data for image",a.dom()),f.map(function(b){return q(a,b)})},q=function(a,b){return k(l(a),m(b))};return{extract:o}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.photon.Reader",["ephox.perhaps.Option","ephox.sugar.api.Element"],function(a,b){var c=function(c){var d=c.dom();try{var e=d.contentWindow?d.contentWindow.document:d.contentDocument;return void 0!==e&&null!==e?a.some(b.fromDom(e)):a.none()}catch(b){return console.log("Error reading iframe: ",d),console.log("Error was: "+b),a.none()}},d=function(a){var b=c(a);return b.fold(function(){return a},function(a){return a})};return{doc:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.photon.Writer",["ephox.photon.Reader","ephox.sugar.api.Body"],function(a,b){var c=function(c,d){if(!b.inBody(c))throw"Internal error: attempted to write to an iframe that is not in the DOM";var e=a.doc(c),f=e.dom();f.open(),f.writeln(d),f.close()};return{write:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Ready",["ephox.sugar.api.DomEvent","ephox.sugar.api.Element","global!document"],function(a,b,c){var d=function(d){if("complete"===c.readyState||"interactive"===c.readyState)d();else var e=a.bind(b.fromDom(c),"DOMContentLoaded",function(){d(),e.unbind()})};return{execute:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.keurig.loader.GWTLoader",["ephox.fred.PlatformDetection","ephox.oilspill.callback.Globaliser","ephox.peanut.Fun","ephox.peanut.Thunk","ephox.perhaps.Option","ephox.photon.Writer","ephox.sugar.api.Body","ephox.sugar.api.Css","ephox.sugar.api.DomEvent","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.Ready","ephox.sugar.api.Remove"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=b.install("ephox.keurig.init"),o=e.none(),p=a.detect().browser.isIE()?c.noop:d.cached(function(b){var c=j.fromTag("div");if(void 0===b)throw"baseUrl was undefined";var d=j.fromTag("iframe");h.setAll(c,{display:"none"});var p=i.bind(d,"load",function(){var g=function(b){o=e.some(b),a.detect().browser.isSafari()||m.remove(c)},h=n.ephemeral(g),i="/admin-theme/helpers/wordimport.min.js";f.write(d,'<script type="text/javascript" src="'+i+'"></script><script type="text/javascript">function gwtInited () {parent.window.'+h+"(com.ephox.keurig.WordCleaner.cleanDocument);};</script>"),p.unbind()});l.execute(function(){k.append(g.body(),c),k.append(c,d)})}),q=function(a,b){return o.map(function(c){return c(a,b)})},r=function(){return o.isSome()};return{load:p,cleanDocument:q,ready:r}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.keurig.api.WordCleaner",["ephox.keurig.loader.GWTLoader"],function(a){return function(b){return a.ready()||a.load(b),{cleanDocument:a.cleanDocument}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.photon.Sandbox",["ephox.peanut.Fun","ephox.photon.Writer","ephox.sugar.api.Css","ephox.sugar.api.DomEvent","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.Remove","global!setTimeout"],function(a,b,c,d,e,f,g,h){return function(i){var j=function(j,k,l){var m=e.fromTag("div"),n=e.fromTag("iframe");c.setAll(m,{display:"none"});var o=d.bind(n,"load",function(){b.write(n,j);var c=n.dom().contentWindow.document;if(void 0===c)throw"sandbox iframe load event did not fire correctly";var d=e.fromDom(c),f=c.body;if(void 0===f)throw"sandbox iframe does not have a body";var i=e.fromDom(f),p=k(d,i);o.unbind(),g.remove(m),h(a.curry(l,p),0)});f.append(m,n),f.append(i,m)};return{play:j}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.impl.NodeValue",["ephox.perhaps.Option","global!Error"],function(a,b){return function(c,d){var e=function(a){if(!c(a))throw new b("Can only get "+d+" value of a "+d+" node");return f(a).getOr("")},f=function(b){try{return c(b)?a.some(b.dom().nodeValue):a.none()}catch(b){return a.none()}},g=function(a,e){if(!c(a))throw new b("Can only set raw "+d+" value of a "+d+" node");a.dom().nodeValue=e};return{get:e,getOption:f,set:g}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Comment",["ephox.sugar.api.Node","ephox.sugar.impl.NodeValue"],function(a,b){var c=b(a.isComment,"comment"),d=function(a){return c.get(a)},e=function(a){return c.getOption(a)},f=function(a,b){c.set(a,b)};return{get:d,getOption:e,
set:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Html",["ephox.sugar.api.Element","ephox.sugar.api.Insert"],function(a,b){var c=function(a){return a.dom().innerHTML},d=function(a,b){a.dom().innerHTML=b},e=function(d){var e=a.fromTag("div"),f=a.fromDom(d.dom().cloneNode(!0));return b.append(e,f),c(e)};return{get:c,set:d,getOuter:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.vogue.css.Set",["ephox.sugar.api.Insert"],function(a){var b=function(b,c,d){b.dom().styleSheet?b.dom().styleSheet.cssText=c:a.append(b,d)};return{setCss:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.vogue.util.Regex",[],function(){var a=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};return{escape:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),h.bolt.module.api.define("global!RegExp",[],function(){return RegExp}),function(a,b,c){a("ephox.vogue.css.Url",["ephox.compass.Obj","ephox.vogue.util.Regex","global!RegExp"],function(a,b,c){var d=function(a,d,e){var f=new c("url\\(\\s*['\"]?"+b.escape(d)+"(.*?)['\"]?\\s*\\)","g");return a.replace(f,'url("'+e+'$1")')},e=function(b,c){var e=b;return a.each(c,function(a,b){e=d(e,b,a)}),e};return{replace:d,replaceMany:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.vogue.api.DocStyle",["ephox.sugar.api.Attr","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.SelectorFind","ephox.vogue.css.Set","ephox.vogue.css.Url","global!Array"],function(a,b,c,d,e,f,g){var h=function(c){var d=b.fromTag("style",c.dom());return a.set(d,"type","text/css"),d},i=function(a,c,d){e.setCss(a,c,b.fromText(c,d.dom()))},j=function(a,b,e){var g=h(e),j=void 0===b?a:f.replaceMany(a,b);i(g,j,e);var k=d.descendant(e,"head").getOrDie();c.append(k,g)},k=function(a){var b=a.dom().styleSheets;return g.prototype.slice.call(b)};return{stylesheets:k,inject:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.vogue.css.Rules",["ephox.compass.Arr","ephox.scullion.Struct"],function(a,b){var c=b.immutable("selector","style"),d=function(b){var d=b.cssRules;return a.map(d,function(a){var b=a.selectorText,d=a.style.cssText;if(void 0===d)throw"WARNING: Browser does not support cssText property";return c(b,d)})},e=function(b){return a.bind(b,d)};return{extract:d,extractAll:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.vogue.api.Rules",["ephox.vogue.css.Rules"],function(a){var b=function(b){return a.extract(b)},c=function(b){return a.extractAll(b)};return{extract:b,extractAll:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.html.HtmlPaste",["ephox.cement.html.Transform","ephox.cement.images.ImageReference","ephox.classify.Type","ephox.compass.Arr","ephox.keurig.api.WordCleaner","ephox.peanut.Fun","ephox.photon.Sandbox","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sugar.api.Attr","ephox.sugar.api.Class","ephox.sugar.api.Comment","ephox.sugar.api.Element","ephox.sugar.api.Elements","ephox.sugar.api.Html","ephox.sugar.api.Remove","ephox.sugar.api.SelectorFilter","ephox.sugar.api.Traverse","ephox.vogue.api.DocStyle","ephox.vogue.api.Rules","global!document"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v="data-textbox-image",w=function(a){return void 0===a||null===a||0===a.length},x=function(a){var b=1;return a.replace(/(<img[^>]*)src=".*?"/g,function(a,c,d){return c+v+'="'+b++ +'"'})},y=function(a){var b=r.children(a);d.each(b,function(a){l.getOption(a).each(function(b){"StartFragment"!==b&&"EndFragment"!==b||p.remove(a)})})},z=function(b,c){d.each(c,function(c){var e=j.get(c,v);d.each(b,function(b){var d=b.img(),f=b.vshape();if(d[v]==e){var g=f["o:spid"],h=void 0===g?f.id:g;a.rotateImage(c,f),k.add(c,"rtf-data-image"),j.set(c,"data-image-id",h.substr("_x0000_".length)),j.set(c,"data-image-type","code"),j.remove(c,v)}})})},A=function(a,b){var c=t.extractAll(b);d.each(c,function(b){var c=q.descendants(a,b.selector());d.each(c,function(a){j.remove(a,"class"),j.set(a,"style",b.style())})})},B=function(a,b){var c=g(m.fromDom(u.body));return function(d,e){c.play(d,function(c,d){var e=q.descendants(d,"img");return y(d),z(a,e),b&&A(d,s.stylesheets(c)),o.get(d)},e)}},C=function(a){var b=a.indexOf("</html>");return b>-1?a.substr(0,b+"</html>".length):a};return function(a,c){var d=e(c.baseUrl),g=i.create({paste:h(["elements","assets"]),error:h(["message"])}),j=function(c){var e=C(c);return a.get(!0,function(a){var c=a.mergeOfficeStyles,f=x(e),h=b.extract(f),i=B(h,c);d.cleanDocument(f,c).fold(function(){g.trigger.error("errors.paste.word.notready")},function(a){w(a)?g.trigger.paste([],[]):i(a,function(a){var b=n.fromHtml(a);g.trigger.paste(b,[])})})}),!0};return{handler:j,isSupported:f.constant(!0),events:g.registry}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.images.ImagePaste",["ephox.compass.Arr","ephox.fred.PlatformDetection","ephox.hermes.api.ImageAsset","ephox.hermes.api.ImageExtract","ephox.peanut.Fun","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sugar.api.Attr","ephox.sugar.api.Element","global!console"],function(a,b,c,d,e,f,g,h,i,j){return function(k){var l=b.detect(),m=!0,n=!l.browser.isIE()&&!l.browser.isFirefox(),o=g.create({paste:f(["elements","assets"]),error:f(["message"])}),p=function(b){return a.bind(b,function(a){return c.cata(a,function(a,b,c,d){var e=i.fromTag("img");return h.set(e,"src",c),e},function(a,b,c){j.log("Internal error: Paste operation produced an image URL instead of a Data URI: ",b)})})},q=function(b){var c=a.filter(b,function(a){return"file"===a.kind&&/image/.test(a.type)}),e=a.map(c,function(a){return a.getAsFile()});return d.toAssets(e,function(a){var b=p(a);o.trigger.paste(b,a)}),m},r=function(){return o.trigger.error("safari.imagepaste"),m},s=function(){return o.trigger.error("errors.local.images.disallowed"),m},t=l.browser.isSafari()?r:q,u=k.allowLocalImages?t:s;return{handler:u,isSupported:e.constant(n),events:o.registry}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.api.CementConstants",["ephox.cement.style.Styles","ephox.peanut.Fun"],function(a,b){var c=a.resolve("smartpaste-eph-bin");return{binStyle:b.constant(c)}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.knoch.core.Bounce",["global!Array"],function(a){var b=function(b){return function(){var c=a.prototype.slice.call(arguments),d=this;setTimeout(function(){b.apply(d,c)},0)}};return{bounce:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.knoch.core.FutureOps",[],function(){return function(a,b){var c=function(c){return a(function(a){b(function(b){a(c(b))})})},d=function(c){return a(function(a){b(function(b){c(b).get(a)})})},e=function(c){return a(function(a){b(function(b){c.get(a)})})};return{get:b,map:c,bind:d,anonBind:e}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.knoch.future.Future",["ephox.compass.Arr","ephox.knoch.core.Bounce","ephox.knoch.core.FutureOps"],function(a,b,c){var d=function(a){var e=function(c){a(b.bounce(c))};return c(d,e)},e=function(b){return d(function(c){var d=[],e=0,f=function(a){return function(f){d[a]=f,e++,e>=b.length&&c(d)}};0===b.length?c([]):a.each(b,function(a,b){a.get(f(b))})})},f=function(b,c){return e(a.map(b,c))},g=function(a,b,c){return d(function(d){var e=!1,f=!1,g=void 0,h=void 0,i=function(){if(e&&f){var a=c(g,h);d(a)}};a.get(function(a){g=a,e=!0,i()}),b.get(function(a){h=a,f=!0,i()})})};return{nu:d,par:e,mapM:f,lift2:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.knoch.future.CachedFuture",["ephox.compass.Arr","ephox.highway.Merger","ephox.knoch.core.Bounce","ephox.knoch.core.FutureOps","ephox.knoch.future.Future","ephox.peanut.Fun","ephox.perhaps.Option"],function(a,b,c,d,e,f,g){var h=function(f){var i=g.none(),j=[],k=function(a){m()?o(a):j.push(a)},l=function(a){i=g.some(a),n(j),j=[]},m=function(){return i.isSome()},n=function(b){a.each(b,o)},o=function(a){i.each(function(b){c.bounce(a)(b)})};e.nu(f).get(l);var p=d(h,k);return b.merge(p,{isSet:m})};return{nu:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.pastiche.IeBlob",["ephox.compass.Arr","ephox.epithet.Resolve","ephox.hermes.api.ImageExtract","ephox.knoch.future.CachedFuture","ephox.peanut.Fun","ephox.perhaps.Option"],function(a,b,c,d,e,f){var g=function(a){return void 0!==a.convertURL?a.convertURL:void 0!==a.msConvertURL?a.msConvertURL:void 0},h=function(h){var i=b.resolve("window.clipboardData.files"),j=g(h);if(void 0!==i&&void 0!==j&&i.length>0){var k=a.map(i,function(a){var b=c.blob(a);return j.apply(h,[a,"specified",b.objurl()]),b}),l=d.nu(function(a){c.fromBlobs(k,a)});return l.get(e.noop),f.some(l)}return f.none()};return{convert:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand);!function(a,b,c){a("ephox.fussy.api.Situ",[],function(){var a=function(a,b){return d(function(c,d,e){return d(a,b)})},b=function(a){return d(function(b,c,d){return b(a)})},c=function(a){return d(function(b,c,d){return d(a)})},d=function(a){return{fold:a}};return{on:a,before:b,after:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand);!function(a,b,c){a("ephox.fussy.api.SelectionRange",["ephox.fussy.api.Situ","ephox.scullion.Struct","ephox.sugar.api.Element"],function(a,b,c){var d=b.immutable("start","soffset","finish","foffset"),e=b.immutable("start","soffset","finish","foffset"),f=b.immutable("start","finish"),g=function(b){var d=c.fromDom(b.startContainer),e=c.fromDom(b.endContainer);return f(a.on(d,b.startOffset),a.on(e,b.endOffset))};return{read:d,general:e,write:f,writeFromNative:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fussy.api.Supported",[],function(){var a=function(a,b){if(a.getSelection)return b(a,a.getSelection());throw"No selection model supported."};return{run:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.DocumentPosition",["ephox.sugar.api.Compare","ephox.sugar.api.Traverse"],function(a,b){var c=function(c,d,e,f){var g=b.owner(c),h=g.dom().createRange();h.setStart(c.dom(),d),h.setEnd(e.dom(),f);var i=a.eq(c,e)&&d===f;return h.collapsed&&!i};return{after:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fussy.wwwc.Directions",["ephox.fussy.api.SelectionRange","ephox.sugar.api.DocumentPosition","ephox.sugar.api.Element","ephox.sugar.api.Traverse"],function(a,b,c,d){var e=function(a){return b.after(c.fromDom(a.anchorNode),a.anchorOffset,c.fromDom(a.focusNode),a.focusOffset)},f=function(b,d){var f=c.fromDom(d.startContainer),g=c.fromDom(d.endContainer);return e(b)?a.read(g,d.endOffset,f,d.startOffset):a.read(f,d.startOffset,g,d.endOffset)},g=function(a){return e(a)},h=function(a,b,c,e){return function(f){if(f.extend)f.collapse(a.dom(),b),f.extend(c.dom(),e);else{var g=d.owner(a).dom().createRange();g.setStart(c.dom(),e),g.setEnd(a.dom(),b),f.removeAllRanges(),f.addRange(g)}}},i=function(a,c,d,e){return b.after(a,c,d,e)},j=function(){return{flip:f,isRtl:g}},k=function(){return{flip:h,isRtl:i}};return{read:j,write:k}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fussy.wwwc.DomRange",["ephox.fussy.api.SelectionRange","ephox.fussy.wwwc.Directions","ephox.perhaps.Option","ephox.sugar.api.DocumentPosition","ephox.sugar.api.Element"],function(a,b,c,d,e){var f=function(b,d){var f=h(b,d.start(),d.finish());if(f.collapsed===!0){var g=h(b,d.finish(),d.start());return g.collapsed===!0?c.none():c.some(a.general(e.fromDom(g.endContainer),g.endOffset,e.fromDom(g.startContainer),g.startOffset))}return c.none()},g=function(a,b){var c=h(a,b.start(),b.finish());return c.collapsed===!0?h(a,b.finish(),b.start()):c},h=function(a,b,c){var d=m(a);return b.fold(function(a){d.setStartBefore(a.dom())},function(a,b){d.setStart(a.dom(),b)},function(a){d.setStartAfter(a.dom())}),c.fold(function(a){d.setEndBefore(a.dom())},function(a,b){d.setEnd(a.dom(),b)},function(a){d.setEndAfter(a.dom())}),d},i=function(a,b){return h(a,b.start(),b.finish())},j=function(a,b,c,e,f){var g=d.after(b,c,e,f),h=a.document.createRange();return g?(h.setStart(e.dom(),f),h.setEnd(b.dom(),c)):(h.setStart(b.dom(),c),h.setEnd(e.dom(),f)),h},k=function(a,b){var c=i(a,b);return function(a){a.addRange(c)}},l=function(a,c){var d=f(a,c);return d.fold(function(){return k(a,c)},function(a){return b.write().flip(a.start(),a.soffset(),a.finish(),a.foffset())})},m=function(a){return a.document.createRange()};return{create:m,build:l,toNative:i,forceRange:g,toExactNative:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fussy.search.Within",["ephox.compass.Arr","ephox.fussy.wwwc.DomRange","ephox.sugar.api.Element","ephox.sugar.api.Node","ephox.sugar.api.SelectorFilter","ephox.sugar.api.Selectors"],function(a,b,c,d,e,f){var g=function(a,b,c){return a.selectNodeContents(c.dom()),a.compareBoundaryPoints(b.END_TO_START,b)<1&&a.compareBoundaryPoints(b.START_TO_END,b)>-1},h=function(b,c,d,h){var i=b.document.createRange(),j=f.is(c,h)?[c]:[],k=j.concat(e.descendants(c,h));return a.filter(k,function(a){return g(i,d,a)})},i=function(a,e,f){var g=b.forceRange(a,e),i=c.fromDom(g.commonAncestorContainer);return d.isElement(i)?h(a,i,g,f):[]};return{find:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fussy.wwwc.Prefilter",["ephox.fussy.api.SelectionRange","ephox.fussy.api.Situ","ephox.sugar.api.Node"],function(a,b,c){var d=function(a,d){return"br"===c.name(a)?b.before(a):b.on(a,d)},e=function(c){var e=c.start().fold(b.before,d,b.after),f=c.finish().fold(b.before,d,b.after);return a.write(e,f)};return{preprocess:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Fragment",["ephox.compass.Arr","ephox.sugar.api.Element","global!document"],function(a,b,c){var d=function(d,e){var f=e||c,g=f.createDocumentFragment();return a.each(d,function(a){g.appendChild(a.dom())}),b.fromDom(g)};return{fromElements:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fussy.wwwc.WwwcModel",["ephox.fussy.api.SelectionRange","ephox.fussy.wwwc.Directions","ephox.fussy.wwwc.DomRange","ephox.fussy.wwwc.Prefilter","ephox.perhaps.Option","ephox.sugar.api.Element","ephox.sugar.api.Fragment"],function(a,b,c,d,e,f,g){var h=function(a){return function(b,e){var f=d.preprocess(a),g=c.build(b,f);void 0!==e&&null!==e&&(e.removeAllRanges(),g(e))}},i=function(a){return function(b,d){var e=c.create(b);e.selectNodeContents(a.dom()),d.removeAllRanges(),d.addRange(e)}},j=function(a,b){var c=b.getRangeAt(0),d=b.getRangeAt(b.rangeCount-1),e=a.document.createRange();return e.setStart(c.startContainer,c.startOffset),e.setEnd(d.endContainer,d.endOffset),e},k=function(c,d){var e=f.fromDom(d.startContainer),g=f.fromDom(d.endContainer);return b.read().isRtl(c)?b.read().flip(c,d):a.read(e,d.startOffset,g,d.endOffset)},l=function(a,b){return void 0!==b&&null!==b&&b.rangeCount>0?e.from(j(a,b)):e.none()},m=function(a,b){var c=l(a,b);return c.map(function(a){return k(b,a)})},n=function(a){return function(b,c){var d=l(b,c);d.each(function(c){o(b,c,a)})}},o=function(a,b,c){var d=g.fromElements(c,a.document);b.deleteContents(),b.insertNode(d.dom())},p=function(a,b){return function(e,f){var g=d.preprocess(a),h=c.toNative(e,g);o(e,h,b)}},q=function(a,b,d,e){return function(f,g){var h=c.toExactNative(f,a,b,d,e);h.deleteContents()}},r=function(a,b,d,e){return function(g,h){var i=c.toExactNative(g,a,b,d,e),j=i.cloneContents();return f.fromDom(j)}},s=function(a,b,d,f){return function(g,h){var i=c.toExactNative(g,a,b,d,f),j=i.getClientRects(),k=j.length>0?j[0]:i.getBoundingClientRect();return k.width>0||k.height>0?e.some(k):e.none()}},t=function(a,b){a.getSelection().removeAllRanges()};return{get:m,set:h,selectElementContents:i,replace:n,replaceRange:p,deleteRange:q,cloneFragment:r,rectangleAt:s,clearSelection:t}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.fussy.api.WindowSelection",["ephox.fussy.api.SelectionRange","ephox.fussy.api.Situ","ephox.fussy.api.Supported","ephox.fussy.search.Within","ephox.fussy.wwwc.DomRange","ephox.fussy.wwwc.WwwcModel","ephox.sugar.api.Compare","ephox.sugar.api.Element"],function(a,b,c,d,e,f,g,h){var i=function(a){return c.run(a,f.get)},j=function(a,b){c.run(a,f.set(b))},k=function(c,d,e,f,g){var h=a.write(b.on(d,e),b.on(f,g));j(c,h)},l=function(a,b){c.run(a,f.selectElementContents(b))},m=function(a,b){c.run(a,f.replace(b))},n=function(a,b,d){c.run(a,f.replaceRange(b,d))},o=function(a,b,d,e,g){c.run(a,f.deleteRange(b,d,e,g))},p=function(a,b,d,e,g){return c.run(a,f.cloneFragment(b,d,e,g))},q=function(a,b,c,d){return g.eq(a,c)&&b===d},r=function(a,b,d,e,g){return c.run(a,f.rectangleAt(b,d,e,g))},s=function(a,b,c){return d.find(a,b,c)},t=function(c,d,e,f,g,h){var i=a.write(b.on(d,e),b.on(f,g));return s(c,i,h)},u=function(b,c){var d=e.forceRange(b,c);return a.general(h.fromDom(d.startContainer),d.startOffset,h.fromDom(d.endContainer),d.endOffset)},v=function(a){c.run(a,f.clearSelection)};return{get:i,set:j,setExact:k,selectElementContents:l,replace:m,replaceRange:n,deleteRange:o,isCollapsed:q,cloneFragment:p,rectangleAt:r,findWithin:s,findWithinExact:t,deriveExact:u,clearAll:v}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.api.HtmlPatterns",[],function(){return{validStyles:function(){return/^(mso-.*|tab-stops|tab-interval|language|text-underline|text-effect|text-line-through|font-color|horiz-align|list-image-[0-9]+|separator-image|table-border-color-(dark|light)|vert-align|vnd\..*)$/},specialInline:function(){return/^(font|em|strong|samp|acronym|cite|code|dfn|kbd|tt|b|i|u|s|sub|sup|ins|del|var|span)$/}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.violin.StringMatch",[],function(){var a=function(a){return g(function(b,c,d,e,f,g){return b(a)})},b=function(a){return g(function(b,c,d,e,f,g){return c(a)})},c=function(a){return g(function(b,c,d,e,f,g){return d(a)})},d=function(a){return g(function(b,c,d,e,f,g){return e(a)})},e=function(){return g(function(a,b,c,d,e,f){return e()})},f=function(a){return g(function(b,c,d,e,f,g){return g(a)})},g=function(a){var b=function(b){return a(function(a){return 0===b.toLowerCase().indexOf(a.toLowerCase())},function(a){return a.test(b.toLowerCase())},function(a){return b.toLowerCase().indexOf(a.toLowerCase())>=0},function(a){return b.toLowerCase()===a.toLowerCase()},function(){return!0},function(a){return!a.matches(b)})};return{fold:a,matches:b}},h=function(a,b,c,d,e,f,g){return a.fold(b,c,d,e,f,g)};return{starts:a,pattern:b,contains:c,exact:d,all:e,not:f,cata:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.api.RuleMatch",["ephox.peanut.Fun","ephox.sugar.api.Node","ephox.violin.StringMatch"],function(a,b,c){var d=function(b,d,e,f){var g=f.name,h=void 0!==f.condition?f.condition:a.constant(!0),i=void 0!==f.value?f.value:c.all();return g.matches(e)&&i.matches(d)&&h(b)},e=function(c,d){var e=b.name(c),f=d.name,g=void 0!==d.condition?d.condition:a.constant(!0);return f.matches(e)&&g(c)};return{keyval:d,name:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.cleanup.AttributeAccess",["ephox.compass.Arr","ephox.compass.Obj","ephox.peanut.Fun","ephox.sugar.api.Attr"],function(a,b,c,d){var e=function(b,c){var d={};return a.each(b.dom().attributes,function(a){c(a.value,a.name)||(d[a.name]=a.value)}),d},f=function(c,e,f){a.each(e,function(a){d.remove(c,a)}),b.each(f,function(a,b){d.set(c,b,a)})},g=function(c,d,e){var g=a.map(c.dom().attributes,function(a){return a.name});b.size(d)!==g.length&&f(c,g,d)};return{filter:e,clobber:g,scan:c.constant({})}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.cleanup.StyleAccess",["ephox.compass.Arr","ephox.compass.Obj","ephox.sugar.api.Attr","ephox.sugar.api.Css","ephox.violin.Strings"],function(a,b,c,d,e){var f=function(b){var c={},d=void 0!==b&&null!==b?b.split(";"):[];return a.each(d,function(a){var b=a.split(":");2===b.length&&(c[e.trim(b[0])]=e.trim(b[1]))}),c},g=function(a,b){return a.dom().style.getPropertyValue(b)},h=function(b,c){var d={};return a.each(b.dom().style,function(a){var e=g(b,a);c(e,a)||(d[a]=e)}),d},i=function(a,b,c){d.set(a,b,c)},j=function(b,c,d){var e=b.dom().getAttribute("style"),g=f(e),h={};return a.each(c,function(a){var b=g[a];void 0===b||d(b,a)||(h[a]=b)}),h},k=function(c){var d=b.keys(c);return a.map(d,function(a){return a+": "+c[a]}).join("; ")},l=function(a,d,e){c.set(a,"style","");var f=b.size(d),g=b.size(e);if(0===f&&0===g)c.remove(a,"style");else if(0===f)c.set(a,"style",k(e));else{b.each(d,function(b,c){i(a,c,b)});var h=c.get(a,"style"),j=g>0?k(e)+"; ":"";c.set(a,"style",j+h)}};return{filter:h,clobber:l,scan:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.cleanup.Cleaners",["ephox.pastiche.cleanup.AttributeAccess","ephox.pastiche.cleanup.StyleAccess","ephox.peanut.Fun","ephox.sugar.api.Element"],function(a,b,c,d){var e=["mso-list"],f=function(a,c){var d=b.scan(a,e,c),f=b.filter(a,c);b.clobber(a,f,d)},g=function(b,c){var d=a.filter(b,c);a.clobber(b,d,{})},h=function(a){var d=b.filter(a,c.constant(!1));b.clobber(a,d,{})},i=function(a,b){f(d.fromDom(a),b)},j=function(a,b){g(d.fromDom(a),b)};return{style:f,attribute:g,styleDom:i,attributeDom:j,validateStyles:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Classes",["ephox.compass.Arr","ephox.sugar.api.Class","global!Array"],function(a,b,c){var d=function(c,d){a.each(d,function(a){b.add(c,a)})},e=function(c,d){a.each(d,function(a){b.remove(c,a)})},f=function(c,d){a.each(d,function(a){b.toggle(c,a)})},g=function(c,d){return a.forall(d,function(a){return b.has(c,a)})},h=function(c,d){return a.exists(d,function(a){return b.has(c,a)})},i=function(a){for(var b=a.dom().classList,d=new c(b.length),e=0;e<b.length;e++)d[e]=b.item(e);return d};return{add:d,remove:e,toggle:f,hasAll:g,hasAny:h,get:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.engine.Pipeless",["ephox.compass.Arr","ephox.highway.Merger","ephox.pastiche.api.RuleMatch","ephox.pastiche.cleanup.Cleaners","ephox.peanut.Fun","ephox.sugar.api.Attr","ephox.sugar.api.Class","ephox.sugar.api.Classes","ephox.sugar.api.Remove","ephox.sugar.api.SelectorFilter"],function(a,b,c,d,e,f,g,h,i,j){var k=function(b,d,e){b(e,function(b,f){return a.exists(d,function(a){return c.keyval(e,b,f,a)})})},l=function(l,m){var n=b.merge({styles:[],attributes:[],classes:[],tags:[]},m),o=j.descendants(l,"*");a.each(o,function(b){k(d.style,n.styles,b),k(d.attribute,n.attributes,b),a.each(n.classes,function(c){var d=f.has(b,"class")?h.get(b):[];a.each(d,function(a){c.name.matches(a)&&g.remove(b,a)})})});var p=j.descendants(l,"*");a.each(p,function(b){var d=a.exists(n.tags,e.curry(c.name,b));d&&i.remove(b)})},m=function(d,f){var g=b.merge({tags:[]},f),h=j.descendants(d,"*");a.each(h,function(b){var d=a.exists(g.tags,e.curry(c.name,b));d&&i.unwrap(b)})},n=function(d,f){var g=b.merge({tags:[]},f),h=j.descendants(d,"*");a.each(h,function(b){var d=a.find(g.tags,e.curry(c.name,b));void 0!==d&&null!==d&&d.mutate(b)})},o=function(b){var c=j.descendants(b,"*");a.each(c,function(a){d.validateStyles(a)})};return{remover:l,unwrapper:m,transformer:n,validator:o}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.engine.Token",["ephox.compass.Obj","ephox.sugar.api.Css","ephox.sugar.api.Element"],function(a,b,c){var d="startElement",e="endElement",f="text",g="comment",h=function(a,h,i){var j,k,l,m=c.fromDom(a);switch(a.nodeType){case 1:h?j=e:(j=d,b.setAll(m,i||{})),k="HTML"!==a.scopeName&&a.scopeName&&a.tagName&&a.tagName.indexOf(":")<=0?(a.scopeName+":"+a.tagName).toUpperCase():a.tagName;break;case 3:j=f,l=a.nodeValue;break;case 8:j=g,l=a.nodeValue;break;default:console.log("WARNING: Unsupported node type encountered: "+a.nodeType)}var n=function(){return a},o=function(){return k},p=function(){return j},q=function(){return l};return{getNode:n,tag:o,type:p,text:q}},i=function(b,c,d,e){var f=e.createElement(b);return a.each(c,function(a,b){f.setAttribute(b,a)}),h(f,!1,d)},j=function(a,b){return h(b.createElement(a),!0)},k=function(a,b){return h(b.createComment(a),!1)},l=function(a,b){return h(b.createTextNode(a))},m=j("HTML",window.document);return{START_ELEMENT_TYPE:d,END_ELEMENT_TYPE:e,TEXT_TYPE:f,COMMENT_TYPE:g,FINISHED:m,token:h,createStartElement:i,createEndElement:j,createComment:k,createText:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.engine.Serialiser",["ephox.pastiche.engine.Token"],function(a){var b=function(b){var c=b.createDocumentFragment(),d=c,e=function(a){g(a),c=a},f=function(){c=c.parentNode},g=function(a){c.appendChild(a)},h=function(c){var d=function(a){var b=a.getNode().cloneNode(!1);e(b)},h=function(a,c){var d=b.createTextNode(a.text());g(d)};switch(c.type()){case a.START_ELEMENT_TYPE:d(c);break;case a.TEXT_TYPE:h(c);break;case a.END_ELEMENT_TYPE:f();break;case a.COMMENT_TYPE:break;default:throw{message:"Unsupported token type: "+c.type()}}};return{dom:d,receive:h,label:"SERIALISER"}};return{create:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.engine.Tokeniser",["ephox.pastiche.engine.Token"],function(a){var b=function(b,c){var d;c=c||window.document,d=c.createElement("div"),c.body.appendChild(d),d.style.position="absolute",d.style.left="-10000px",d.innerHTML=b,nextNode=d.firstChild||a.FINISHED;var e=[];endNode=!1;var f=function(b,c){return b===a.FINISHED?b:b?a.token(b,c):void 0},g=function(){var b=nextNode,g=endNode;return!endNode&&nextNode.firstChild?(e.push(nextNode),nextNode=nextNode.firstChild):endNode||1!==nextNode.nodeType?nextNode.nextSibling?(nextNode=nextNode.nextSibling,endNode=!1):(nextNode=e.pop(),endNode=!0):endNode=!0,b===a.FINISHED||nextNode||(c.body.removeChild(d),nextNode=a.FINISHED),f(b,g)},h=function(){return void 0!==nextNode};return{hasNext:h,next:g}};return{tokenise:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.engine.Pipeline",["ephox.pastiche.engine.Serialiser","ephox.pastiche.engine.Tokeniser"],function(a,b){var c=function(a,b,c){var d,e=c;for(d=b.length-1;d>=0;d--)e=b[d](e,{},a);return e},d=function(d,e,f){for(var g=a.create(d),h=b.tokenise(e,d),i=c(d,f,g);h.hasNext();){var j=h.next();i.receive(j)}return g.dom};return{build:c,run:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.api.HybridAction",["ephox.compass.Arr","ephox.pastiche.engine.Pipeless","ephox.pastiche.engine.Pipeline","ephox.sugar.api.Element","ephox.sugar.api.Html","ephox.sugar.api.Remove","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f,g){var h=function(a){return function(c){b.remover(c,a)}},i=function(a){return function(c){b.unwrapper(c,a)}},j=function(a){return function(c){b.transformer(c,a)}},k=function(){return function(a){b.validator(a)}},l=function(a){return function(b){var d=e.get(b),h=g.owner(b),i=c.run(h.dom(),d,a);f.empty(b),b.dom().appendChild(i)}},m=function(b,c,f){var g=d.fromTag("div",b.dom());return g.dom().innerHTML=c,a.each(f,function(a){a(g)}),e.get(g)},n=function(a){return a.indexOf("<o:p>")>=0||a.indexOf("p.MsoNormal, li.MsoNormal, div.MsoNormal")>=0||a.indexOf("MsoListParagraphCxSpFirst")>=0||a.indexOf("<w:WordDocument>")>=0};return{removal:h,unwrapper:i,transformer:j,validate:k,pipeline:l,isWordContent:n,go:m}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.api.RuleConditions",["ephox.compass.Arr","ephox.sugar.api.Attr","ephox.sugar.api.Html","ephox.sugar.api.Node","ephox.sugar.api.PredicateExists"],function(a,b,c,d,e){var f=function(a){return"img"!==d.name(a)},g=function(a){var b=a.dom().attributes,c=void 0!==b&&null!==b&&b.length>0;return"span"!==d.name(a)||c},h=function(b){return!k(b)||g(b)&&e.descendant(b,function(b){var c=!k(b),e=!a.contains(["font","em","strong","samp","acronym","cite","code","dfn","kbd","tt","b","i","u","s","sub","sup","ins","del","var","span"],d.name(b));return d.isText(b)||c||e})},i=function(a){return"ol"===d.name(a)||"ul"===d.name(a)},j=function(a){var c=b.get(a,"src");return/^file:/.test(c)},k=function(a){return void 0===a.dom().attributes||null===a.dom().attributes||(0===a.dom().attributes.length||1===a.dom().attributes.length&&"style"===a.dom().attributes[0].name)},l=function(a){return 0===c.get(a).length};return{isNotImage:f,hasContent:h,isList:i,isLocal:j,hasNoAttributes:k,isEmpty:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.api.RuleMutations",["ephox.compass.Arr","ephox.compass.Obj","ephox.sugar.api.Attr","ephox.sugar.api.Css","ephox.sugar.api.Element","ephox.sugar.api.Html","ephox.sugar.api.Insert","ephox.sugar.api.InsertAll","ephox.sugar.api.Node","ephox.sugar.api.Remove","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(b,c){var d=e.fromTag(b);g.before(c,d);var f=c.dom().attributes;a.each(f,function(a){d.dom().setAttribute(a.name,a.value)});var i=k.children(c);return h.append(d,i),j.remove(c),d},m=function(a){0===f.get(a).length&&g.append(a,e.fromTag("br"))},n=function(b){k.parent(b).each(function(c){var f=i.name(c);if(a.contains(["ol","ul"],f)){var h=e.fromTag("li");d.set(h,"list-style-type","none"),g.wrap(b,h)}})},o=function(a){var e=l("span",a),f={face:"font-family",size:"font-size",color:"font-color"},g={"font-size":{1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"}};b.each(f,function(a,b){if(c.has(e,b)){var f=c.get(e,b),h=void 0!==g[a]&&void 0!==g[a][f]?g[a][f]:f;d.set(e,a,h),c.remove(e,b)}})};return{changeTag:l,addBrTag:m,properlyNest:n,fontToSpan:o}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.engine.Filter",["ephox.compass.Arr","ephox.pastiche.engine.Token"],function(a,b){var c=function(c,d,e){var f=function(f,g,h,i){var k,l,m,n=!1,o=function(){d&&d(z),n=!1,l=[],m=[]},p=function(b){a.each(b,function(a){f.receive(a)})},q=function(a){n?m.push(a):f.receive(a)},r=function(a){d&&l.push(a),c(z,a),a===b.FINISHED&&u()},s=function(){n=!0},t=function(){p(l),o()},u=function(){x(),p(m),o()},v=function(a){k=k||[],k.push(a)},w=function(){return k&&k.length>0},x=function(){a.each(k||[],function(a){q(a)}),y()},y=function(){k=[]},z={document:h||window.document,settings:g||{},emit:q,receive:r,startTransaction:s,rollback:t,commit:u,defer:v,hasDeferred:w,emitDeferred:x,dropDeferred:y,label:e};return o(),z};return f};return{createFilter:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),
function(a,b,c){a("ephox.pastiche.engine.TokenUtil",["ephox.pastiche.cleanup.StyleAccess","ephox.pastiche.engine.Token","ephox.peanut.Fun","ephox.sugar.api.Attr","ephox.sugar.api.Css","ephox.sugar.api.Element"],function(a,b,c,d,e,f){var g=function(a,b){var c=f.fromDom(a.getNode());return d.get(c,b)},h=function(a,b){var c=f.fromDom(a.getNode());return e.get(c,b)},i=function(a){return a.type()===b.TEXT_TYPE&&/^[\s\u00A0]*$/.test(a.text())},j=function(b){var d=f.fromDom(b.getNode()),e=a.scan(d,["mso-list"],c.constant(!1));return e["mso-list"]};return{getAttribute:g,getStyle:h,isWhitespace:i,getMsoList:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.detect.ListSymbols",["ephox.compass.Arr","ephox.highway.Merger"],function(a,b){var c=[{regex:/^\(?[dc][\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[DC][\.\)]$/,type:{tag:"OL",type:"upper-alpha"}},{regex:/^\(?M*(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})[\.\)]$/,type:{tag:"OL",type:"upper-roman"}},{regex:/^\(?m*(cm|cd|d?c{0,3})(xc|xl|l?x{0,3})(ix|iv|v?i{0,3})[\.\)]$/,type:{tag:"OL",type:"lower-roman"}},{regex:/^\(?[0-9]+[\.\)]$/,type:{tag:"OL"}},{regex:/^([0-9]+\.)*[0-9]+\.?$/,type:{tag:"OL",variant:"outline"}},{regex:/^\(?[a-z]+[\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[A-Z]+[\.\)]$/,type:{tag:"OL",type:"upper-alpha"}}],d={"•":{tag:"UL",type:"disc"},"·":{tag:"UL",type:"disc"},"§":{tag:"UL",type:"square"}},e={o:{tag:"UL",type:"circle"},"-":{tag:"UL",type:"disc"},"●":{tag:"UL",type:"disc"},"�":{tag:"UL",type:"circle"}},f=function(a,b){return void 0!==a.variant?a.variant:"("===b.charAt(0)?"()":")"===b.charAt(b.length-1)?")":"."},g=function(a){var b=parseInt(a,10);return isNaN(b)?{}:{start:b}},h=function(h,i){var j=e[h]?[e[h]]:[],k=i&&d[h]?[d[h]]:i?[{tag:"UL",variant:h}]:[],l=a.bind(c,function(a){return a.regex.test(h)?[b.merge(a.type,g(h),{variant:f(a.type,h)})]:[]}),m=j.concat(k).concat(l);return a.map(m,function(a){return void 0!==a.variant?a:b.merge(a,{variant:h})})};return{match:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.detect.ListGuess",["ephox.compass.Arr","ephox.pastiche.list.detect.ListSymbols","ephox.perhaps.Option","ephox.violin.Strings"],function(a,b,c,d){var e=function(e,g){var h=e?d.trim(e.text):"",i=!!e&&!!e.symbolFont,j=b.match(h,i),k=a.find(j,function(a){return"UL"===a.tag||g&&f(a,g,!0)});return void 0!==k?c.some(k):j.length>0?c.some(j[0]):c.none()},f=function(a,b,c){return a===b||a&&b&&a.tag===b.tag&&a.type===b.type&&(c||a.variant===b.variant)};return{guess:e,eqListType:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.detect.ListTypes",["ephox.pastiche.engine.Token","ephox.pastiche.engine.TokenUtil","ephox.pastiche.list.detect.ListGuess"],function(a,b,c){var d=function(a,d,e){var f=c.guess(a,d);return f.fold(function(){return null},function(a){return"OL"!==a.tag||!e||"P"===e.tag()&&!/^MsoHeading/.test(b.getAttribute(e,"class"))?a:void(listType=null)})},e=c.eqListType,f=function(c,d){return c.type()==a.START_ELEMENT_TYPE&&(font=b.getStyle(c,"font-family"),font?d="Wingdings"===font||"Symbol"===font:/^(P|H[1-6]|DIV)$/.test(c.tag())&&(d=!1)),d};return{guess:d,eqListType:e,checkFont:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Microsoft",["ephox.pastiche.engine.Token","ephox.pastiche.engine.TokenUtil"],function(a,b){var c=function(a,c){var d=b.getMsoList(c);return d&&"skip"!==d},d=function(c,d){return d.type()==a.START_ELEMENT_TYPE&&"Ignore"===b.getMsoList(d)};return{isList:c,isIgnore:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Tags",["ephox.compass.Arr","ephox.pastiche.engine.Token","ephox.violin.Strings"],function(a,b,c){var d=function(a,c){return c.type()===b.START_ELEMENT_TYPE},e=function(a,c){return c.type()===b.END_ELEMENT_TYPE},f=function(a){return function(b,c){return c.tag()===a}},g=function(a){return function(b,d){return f(a)(b,d)&&""===c.trim(d.getNode().textContent)}},h=function(a){return function(b,c){return d(b,c)&&c.tag()===a}},i=function(a){return function(b,c){return e(b,c)&&c.tag()===a}},j=function(b){return function(c,e){return d(c,e)&&a.contains(b,e.tag())}},k=function(b){return function(b,c,d){return e(b,c)&&a.contains(d,c.tag())}};return{isStart:d,isEnd:e,isTag:f,isStartOf:h,isEndOf:i,isStartAny:j,isEndAny:k,isWhitespace:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Paragraphs",["ephox.pastiche.inspect.Microsoft","ephox.pastiche.inspect.Tags"],function(a,b){var c=function(c,d){return!c.skippedPara.get()&&b.isStart(c,d,"P")&&!a.isList(c,d)};return{isNormal:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Texts",["ephox.pastiche.engine.Token","ephox.pastiche.engine.TokenUtil","ephox.violin.Strings"],function(a,b,c){var d=function(a,c){return e(a,c)&&b.isWhitespace(c)},e=function(b,c){return c.type()===a.TEXT_TYPE},f=function(a){return function(b,c){return e(b,c)&&c.text()===a}},g=function(a){return function(b,c){return e(b,c)&&a.test(c.text())}},h=function(a,b){return e(a,b)&&""===c.trim(b.text())};return{isWhitespace:d,is:e,isBlank:h,eq:f,matches:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.Handler",["ephox.peanut.Fun"],function(a){return function(b,c,d){return{pred:b,action:c,label:a.constant(d)}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.Handlers",["ephox.compass.Arr","ephox.peanut.Fun","ephox.perhaps.Option"],function(a,b,c){var d=function(a,b){return function(a,c,d){return b(a,c,d)}};return function(e,f,g){var h=d(e+" :: FALLBACK --- ",g),i=function(g,i,j){var k=c.from(a.find(f,function(a){return a.pred(i,j)})),l=k.fold(b.constant(h),function(a){var b=a.label();return void 0===b?a.action:d(e+" :: "+b,a.action)});l(g,i,j)};return i.toString=function(){return"Handlers for "+e},i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.state.Transitions",[],function(){var a=function(a,b){if(void 0===a||void 0===b)throw console.trace(),"brick";a.nextFilter.set(b)},b=function(b){return function(c,d,e){a(d,b)}},c=function(a,b,c){var d=b.nextFilter.get();d(a,b,c)},d=function(b){return function(d,e,f){a(e,b),c(d,e,f)}},e=function(a,b){return a.nextFilter.get()===b};return{next:a,go:c,jump:d,isNext:e,setNext:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.AfterListState",["ephox.pastiche.inspect.Paragraphs","ephox.pastiche.inspect.Texts","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Transitions"],function(a,b,c,d,e){var f=function(f,g){var h=function(a,b,c){a.defer(c)},i=function(a,b,c){b.openedTag.set(c),a.defer(c),e.next(b,f)},j=function(a,b,c){g(a,b,c)};return d("AfterListState",[c(b.isBlank,h,"blank text"),c(a.isNormal,i,"normal paragraph")],j)};return{run:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.States",["ephox.pastiche.engine.Token"],function(a){var b=function(b,c){return c.type()===a.END_ELEMENT_TYPE&&b.originalToken.get()&&c.tag()===b.originalToken.get().tag()};return{isCloser:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.AfterNoBulletListState",["ephox.pastiche.inspect.States","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Transitions"],function(a,b,c,d){var e=function(e){var f=function(a,b,c){d.next(b,e),b.styleLevelAdjust.set(-1),a.emit(c)},g=function(a,b,c){a.emit(c)};return c("AfterNoBullet",[b(a.isCloser,f," closing open tag")],g)};return{run:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Images",["ephox.pastiche.inspect.Tags"],function(a){var b=a.isEndOf("IMG"),c=a.isStartOf("IMG");return{isStart:c,isEnd:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Markers",["ephox.pastiche.engine.Token"],function(a){var b=function(a,b){return"A"===b.tag()||"SPAN"===b.tag()},c=function(c,d){return d.type()===a.START_ELEMENT_TYPE&&b(c,d)},d=function(c,d){return d.type()===a.END_ELEMENT_TYPE&&b(c,d)};return{isStart:c,isEnd:d,is:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.state.Spans",["ephox.pastiche.list.state.Transitions"],function(a){var b=function(a,b,c){a.defer(c),e(a,b,c)},c=function(a,b,c){a.defer(c),d(a,b,c)},d=function(a,b,c){b.spanCount.get().push(c)},e=function(a,b,c){b.spanCount.get().pop()},f=function(b){return function(c,e,f){d(c,e,f),a.next(e,b)}},g=function(b){return function(c,d,f){e(c,d,f),a.next(d,b)}};return{deferAndPush:c,deferAndPop:b,push:d,pop:e,pushThen:f,popThen:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.BeforeSpacerState",["ephox.pastiche.inspect.Images","ephox.pastiche.inspect.Markers","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Spans","ephox.peanut.Fun"],function(a,b,c,d,e,f){var g=function(g,h,i){var j=function(a,b,c){i(a,c)};return d("BeforeSpacer",[c(b.isStart,e.pushThen(g),"start marker"),c(b.isEnd,e.popThen(h),"end marker"),c(a.isEnd,f.noop,"end image")],j)};return{run:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Comments",["ephox.pastiche.engine.Token"],function(a){var b=function(b,c){return c.type()===a.COMMENT_TYPE},c=function(a,c){return b(a,c)&&"[endif]"!==c.text()},d=function(a,c){return b(a,c)&&"[endif]"===c.text()},e=function(a,c){return b(a,c)&&"[if !supportLists]"===c.text()};return{is:b,isNotEndIf:c,isEndIf:d,isListSupport:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Logic",["ephox.compass.Arr"],function(a){var b=function(b){return function(c,d){return a.exists(b,function(a){return a(c,d)})}},c=function(b){return function(c,d){return a.forall(b,function(a){return a(c,d)})}};return{any:b,all:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.CloseSpansState",["ephox.pastiche.inspect.Comments","ephox.pastiche.inspect.Logic","ephox.pastiche.inspect.Markers","ephox.pastiche.inspect.Tags","ephox.pastiche.inspect.Texts","ephox.pastiche.list.detect.ListTypes","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Spans","ephox.pastiche.list.state.Transitions","ephox.peanut.Fun","ephox.perhaps.Option","ephox.perhaps.Result"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=function(n,o){var p=function(a){var b=a.emitter.getCurrentListType(),c=a.emitter.getCurrentLevel(),d=c==a.itemLevel.get()?b:null;return l.from(f.guess(a.bulletInfo.get(),d,a.originalToken.get()))},q=function(a,b,c){for(b.emitter.openItem(b.itemLevel.get(),b.originalToken.get(),b.listType.get(),b.skippedPara.get()),a.emitDeferred();b.spanCount.get().length>0;)a.emit(b.spanCount.get().shift())},r=function(a,b){if(j.next(a,n),a.commentMode.get()){var c=a.indentGuesser.guessIndentLevel(b,a.originalToken.get(),a.styles,a.bulletInfo.get());a.itemLevel.set(c)}},s=function(a,b,c){var d=p(b);return d.fold(function(){return b.listType.set(null),m.error("Unknown list type: "+b.bulletInfo.get().text+" Symbol font? "+b.bulletInfo.get().symbolFont)},function(a){return b.listType.set(a),m.value(q)})},t=function(a,b,c){r(b,c);var d=s(a,b,c);d.fold(function(b){console.log(b),a.rollback()},function(d){d(a,b,c),a.emit(c)})},u=function(a,b,c){r(b,c);var d=s(a,b,c);d.fold(function(b){console.log(b),a.rollback()},function(d){d(a,b,c)})},v=[g(b.any([e.is,d.isStart]),t,"text or start tag"),g(a.isNotEndIf,t,"non-endif comment"),g(a.isEndIf,u,"endif comment"),g(c.isEnd,i.pop,"end marker"),g(d.isEnd,k.noop,"end tag")];return h("CloseSpans",v,function(a,b,c){o(a,c)})};return{run:n}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.FindListTypeState",["ephox.pastiche.inspect.Images","ephox.pastiche.inspect.Markers","ephox.pastiche.inspect.Texts","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Spans","ephox.pastiche.list.state.Transitions","ephox.peanut.Fun"],function(a,b,c,d,e,f,g,h){var i=function(i,j){var k=function(a){return function(b,c,d){g.next(c,i),c.bulletInfo.set(a(c,d))}},l=k(function(a,b){return{text:b.text(),symbolFont:a.symbolFont.get()}}),m=k(function(a,b){return{text:"∂",symbolFont:!0}}),n=function(a,b,c){j(a,c)};return e("FindListType",[d(c.isWhitespace,h.noop,"text is whitespace"),d(c.is,l,"text"),d(b.isStart,f.push,"start marker"),d(b.isEnd,f.pop,"end marker"),d(a.isStart,m,"start image")],n)};return{run:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.ItemContentState",["ephox.pastiche.inspect.States","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Transitions"],function(a,b,c,d){var e=function(e){var f=function(a,b,c){d.next(b,e),b.skippedPara.set(!1)},g=[b(a.isCloser,f,"Closing open tag")];return c("ItemContentState",g,function(a,b,c){a.emit(c)})};return{run:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.state.CommentOff",["ephox.pastiche.inspect.Comments","ephox.pastiche.inspect.Texts"],function(a,b){var c=function(a,c){return!a.commentMode.get()&&b.is(a,c)},d=function(b,c){return!b.commentMode.get()&&a.is(b,c)};return{isText:c,isComment:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.state.CommentOn",["ephox.pastiche.engine.TokenUtil","ephox.pastiche.inspect.Comments","ephox.pastiche.inspect.Texts"],function(a,b,c){var d=function(a,b){return a.commentMode.get()&&c.is(a,b)},e=function(a,c){return a.commentMode.get()&&b.is(a,c)},f=function(b,c){var d=a.getAttribute(c,"style");return b.commentMode.get()&&""===d||null===d};return{isText:d,isComment:e,isUnstyled:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.ListStartState",["ephox.compass.Arr","ephox.pastiche.inspect.Logic","ephox.pastiche.inspect.Microsoft","ephox.pastiche.inspect.Tags","ephox.pastiche.inspect.Texts","ephox.pastiche.list.detect.ListSymbols","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.CommentOff","ephox.pastiche.list.state.CommentOn","ephox.pastiche.list.state.Spans","ephox.pastiche.list.state.Transitions","ephox.peanut.Fun"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=function(n,o,p){var r=function(b,c,d){var e=c.originalToken.get(),f=c.spanCount.get();c.emitter.closeAllLists(),b.emit(e),a.each(f,b.emit),b.emit(d),b.commit(),c.originalToken.set(e),l.next(c,o)},s=function(a,b){return e.is(a,b)&&f.match(b.text(),a.symbolFont.get()).length>0},t=function(a,f,o){c.isIgnore(f,o)&&l.next(f,n);var q=h("ListStartState",[g(b.all([d.isStartOf("SPAN"),j.isUnstyled]),k.pushThen(n),"unstyled span"),g(d.isStartOf("SPAN"),k.push,"starting span"),g(d.isStartOf("A"),k.push,"starting a"),g(d.isEndOf("A"),k.pop,"ending a"),g(j.isText,l.jump(n),"commentOn -> text"),g(s,l.jump(n),"mogran :: text is [1-9]."),g(e.is,r,"text"),g(i.isComment,m.noop,"commentOff -> comment"),g(d.isStartOf("IMG"),l.jump(n),"mogran :: start image tag")],function(a,b,c){p(a,c)});return q(a,f,o)};return t.toString=function(){return"Handlers for ListStartState"},t};return{run:n}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Browser",["ephox.pastiche.engine.Token","ephox.pastiche.inspect.Microsoft","global!document","global!navigator"],function(a,b,c,d){var e=function(){if(d.userAgent.indexOf("Gecko")>0&&d.userAgent.indexOf("WebKit")<0)return!1;var e=c.createElement("div");try{e.innerHTML='<p style="mso-list: Ignore;">&nbsp;</p>'}catch(a){return!1}var f=a.token(e.firstChild);return b.isIgnore({},f)};return{supportsCustomStyles:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.detect.ImageList",[],function(){var a=function(a,b,c){var d=void 0!==b&&null!==b&&void 0!==b.getAttribute&&null!==b.getAttribute?b.getAttribute("alt"):"";return!!b&&"IMG"===b.tagName&&"*"===d};return{is:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.detect.TextList",["ephox.pastiche.list.detect.ListTypes","ephox.violin.Strings"],function(a,b){var c=function(c,d,e){var f=d,g=f.nodeValue;if(b.trim(g)||(f=f.parentNode.nextSibling,g=f?f.nodeValue:""),!f||b.trim(f.parentNode.textContent)!=g)return!1;if(listType=a.guess({text:g,symbolFont:e},null,c.originalToken.get()),listType){var h=!!f.nextSibling&&"SPAN"===f.nextSibling.tagName&&/^[\u00A0\s]/.test(f.nextSibling.firstChild.nodeValue)&&("P"===c.openedTag.get().tag()||"UL"===listType.tag);return h}return!1};return{is:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.detect.ListDetect",["ephox.highway.Merger","ephox.pastiche.inspect.Tags","ephox.pastiche.list.detect.ImageList","ephox.pastiche.list.detect.TextList"],function(a,b,c,d){var e=function(b){var c=b.node,d=c.style.fontFamily;return d?a.merge(b,{symbol:"Wingdings"===d||"Symbol"===d}):b},f=function(a){return!!a.firstChild&&("SPAN"===a.firstChild.tagName||"A"===a.firstChild.tagName)},g=function(a){var b=e({node:a}),c=a.childNodes.length>1&&"A"===b.node.firstChild.tagName&&""===b.node.firstChild.textContent;for(b=c?{node:b.node.childNodes[1],symbol:b.symbol}:b;f(b.node);)b=e({node:b.node.firstChild,symbol:b.symbol});return{node:b.node.firstChild,symbol:b.symbol}},h=function(a,e){if(!b.isStartOf("SPAN")(a,e)||!a.openedTag.get())return!1;var f=a.openedTag.get().getNode(),h=g(f),i=h.node&&3===h.node.nodeType?d:c;return i.is(a,h.node,h.symbol)};return{isUnofficialList:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.inspect.Lists",["ephox.pastiche.engine.TokenUtil","ephox.pastiche.inspect.Browser","ephox.pastiche.inspect.Comments","ephox.pastiche.inspect.Microsoft","ephox.pastiche.inspect.Tags","ephox.pastiche.list.detect.ListDetect","ephox.perhaps.Option"],function(a,b,c,d,e,f,g){var h=function(b){var c=a.getMsoList(b),d=/ level([0-9]+)/.exec(c);return d&&d[1]?g.some(parseInt(d[1],10)):g.none()},i=function(a,b){return e.isStart(a,b)&&d.isList(a,b)&&"LI"!==b.tag()},j=function(a,b){return i(a,b)&&h(b).isSome()},k=function(a,b){return i(a,b)&&h(b).isNone()},l=function(a,d){var e=b.supportsCustomStyles();return!e&&c.isListSupport(a,d)||f.isUnofficialList(a,d)};return{getLevel:h,isStart:i,isValidStart:j,isInvalidStart:k,isSpecial:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.NoListState",["ephox.pastiche.inspect.Lists","ephox.pastiche.inspect.Markers","ephox.pastiche.inspect.Tags","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Spans","ephox.pastiche.list.state.Transitions"],function(a,b,c,d,e,f,g){var h=function(h){var i=function(b,c,d){var e=a.getLevel(d);e.each(function(a){c.itemLevel.set(a+c.styleLevelAdjust.get());var e=g.isNext(c,m)?b.emitDeferred:b.dropDeferred;e(),g.next(c,h()),b.startTransaction(),c.originalToken.set(d),c.commentMode.set(!1)})},j=function(a,b,d){c.isStartOf("SPAN")(b,d)&&f.push(a,b,d),g.next(b,h()),a.startTransaction(),b.originalToken.set(b.openedTag.get()),b.commentMode.set(!0),b.openedTag.set(null),a.dropDeferred()},k=function(a,b,c){b.openedTag.get()&&(b.emitter.closeAllLists(),a.emitDeferred()),b.openedTag.set(c),a.defer(c)},l=function(a,b,c){b.emitter.closeAllLists(),a.emitDeferred(),b.openedTag.set(null),a.emit(c),g.next(b,m)},m=e("NoListState",[d(a.isValidStart,i,"valid list so start it"),d(a.isInvalidStart,l,"invalid list so close lists"),d(a.isSpecial,j,"special list"),d(b.isEnd,f.deferAndPop,"closing marker"),d(b.isStart,f.deferAndPush,"starting marker"),d(c.isStart,k,"starting tag")],l);return m};return{run:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.SkipEmptyParaState",["ephox.pastiche.inspect.Browser","ephox.pastiche.inspect.Logic","ephox.pastiche.inspect.Microsoft","ephox.pastiche.inspect.Tags","ephox.pastiche.inspect.Texts","ephox.pastiche.list.detect.ListDetect","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Spans","ephox.pastiche.list.state.Transitions"],function(a,b,c,d,e,f,g,h,i,j){var k=function(k,l){var m=function(a,b){return d.isStartOf("SPAN")(a,b)&&0===a.spanCount.get().length},n=function(b,d){return(a.supportsCustomStyles()||!f.isUnofficialList(b,d))&&!c.isList(b,d)},o=function(a,b,c){a.defer(c),b.skippedPara.set(!0),b.openedTag.set(null),j.next(b,l())},p=function(a,b,c){a.defer(c)};return h("SkipEmptyPara",[g(b.all([m,n]),i.deferAndPush,"first marker or not list"),g(d.isEndOf("SPAN"),i.deferAndPop,"end span"),g(d.isEndOf("P"),o,"end p"),g(d.isEnd,j.jump(k),"end tag"),g(e.isWhitespace,p,"whitespace")],j.jump(k))};return{run:k}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.stage.SpacerState",["ephox.pastiche.inspect.Markers","ephox.pastiche.inspect.Tags","ephox.pastiche.list.stage.Handler","ephox.pastiche.list.stage.Handlers","ephox.pastiche.list.state.Spans","ephox.pastiche.list.state.Transitions","ephox.peanut.Fun"],function(a,b,c,d,e,f,g){var h=function(h){return d("Spacer",[c(a.isEnd,e.popThen(h),"end marker"),c(b.isEnd,f.setNext(h),"end tag")],g.noop)};return{run:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.Emission",["ephox.scullion.Struct"],function(a){var b=a.immutable("state","result"),c=a.immutable("state","value"),d=a.immutable("level","type","types","items");return{state:d,value:c,result:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.ItemStack",["ephox.pastiche.list.emit.Emission","ephox.perhaps.Option"],function(a,b){var c=function(c){var d=c.items().slice(0);if(d.length>0&&"P"!==d[d.length-1]){var e=d[d.length-1];d[d.length-1]="P";var f=a.state(c.level(),c.type(),c.types(),d);return a.value(f,b.some(e))}return a.value(c,b.none())},d=function(c,d){var e=c.items().slice(0),f=void 0!==d&&"P"!==d?b.some(d):b.none();f.fold(function(){e.push("P")},function(a){e.push(a)});var g=a.state(c.level(),c.type(),c.types(),e);return a.value(g,f)};return{start:d,finish:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.ListLevels",["ephox.pastiche.list.emit.Emission"],function(a){var b=function(b,c,d){for(var e=[],f=b;c(f);){var g=d(f);f=g.state(),e=e.concat(g.result())}return a.result(f,e)},c=function(a,c,d){var e=function(a){return a.level()<c};return b(a,e,d)},d=function(a,c,d){var e=function(a){return a.level()>c};return b(a,e,d)};return{moveRight:c,moveLeft:d,moveUntil:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.ListItemStyles",["ephox.pastiche.engine.TokenUtil"],function(a){var b=function(b){var c=a.getStyle(b,"margin-left");return void 0!==c&&"0px"!==c?{"margin-left":c}:{}},c=function(a){var c={"list-style-type":"none"};return a?b(a):c};return{from:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.SkippedTokens",["ephox.pastiche.engine.Token","ephox.peanut.Fun"],function(a,b){var c=function(c){return[b.curry(a.createStartElement,"P",{},{}),b.curry(a.createText," "),b.curry(a.createEndElement,"P")]};return{para:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.ListTokens",["ephox.pastiche.cleanup.Cleaners","ephox.pastiche.engine.Token","ephox.pastiche.list.detect.ListTypes","ephox.pastiche.list.emit.Emission","ephox.pastiche.list.emit.ItemStack","ephox.pastiche.list.emit.ListItemStyles","ephox.pastiche.list.emit.SkippedTokens","ephox.peanut.Fun"],function(a,b,c,d,e,f,g,h){var i=function(a,c,e){var f=c.start&&c.start>1?{start:c.start}:{},g=a.level()+1,i=c,j=a.types().concat([c]),k=[h.curry(b.createStartElement,c.tag,f,e)],l=d.state(g,i,j,a.items());return d.result(l,k)},j=function(a){var c=a.types().slice(0),e=[h.curry(b.createEndElement,c.pop().tag)],f=a.level()-1,g=c[c.length-1],i=d.state(f,g,c,a.items());return d.result(i,e)},k=function(a,b,c){var e=j(a),f=c?g.para():[],h=i(e.state(),b,b.type?{"list-style-type":b.type}:{});return d.result(h.state(),e.result().concat(f).concat(h.result()))},l=function(g,i,j,l){var m={},n=f.from(i),o=g.type()&&!c.eqListType(g.type(),j)?k(g,j,l):d.result(g,[]),p=[h.curry(b.createStartElement,"LI",m,n)],q=e.start(o.state(),i&&i.tag()),r=q.value().map(function(b){return a.styleDom(i.getNode(),h.constant(!0)),[h.constant(i)]}).getOr([]);return d.result(q.state(),o.result().concat(p).concat(r))},m=function(a){var c=h.curry(b.createEndElement,"LI"),f=e.finish(a),g=f.value().fold(function(){return[c]},function(a){return[h.curry(b.createEndElement,a),c]});return d.result(f.state(),g)};return{open:i,openItem:l,close:j,closeItem:m}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.ListModel",["ephox.compass.Arr","ephox.pastiche.engine.Token","ephox.pastiche.list.emit.Emission","ephox.pastiche.list.emit.ItemStack","ephox.pastiche.list.emit.ListLevels","ephox.pastiche.list.emit.ListTokens","ephox.peanut.Fun","ephox.perhaps.Option"],function(a,b,c,d,e,f,g,h){var i=function(b){if(0===b.length)throw"Compose must have at least one element in the list";var d=b[b.length-1],e=a.bind(b,function(a){return a.result()});return c.result(d.state(),e)},j=function(a){var b=f.closeItem(a),c=f.close(b.state());return i([b,c])},k=function(a,b,c,d){var e=a.level()===c-1&&b.type?{"list-style-type":b.type}:{},g=f.open(a,b,e),h=f.openItem(g.state(),g.state().level()==c?d:void 0,b);return i([g,h])},l=function(a,b,d,e){var g=a.level()>0?f.closeItem(a):c.result(a,[]),h=f.openItem(g.state(),d,b,e);return i([g,h])},m=function(a,b,c,d){return e.moveRight(a,c,function(a){return k(a,b,c,d)})},n=function(a,b){return e.moveLeft(a,b,j)},o=function(a,e,f,i){var j=f>1?d.finish(a):c.value(a,h.none()),k=j.value().map(function(a){return[g.curry(b.createEndElement,a)]}).getOr([]),n=(f-j.state().level(),m(j.state(),e,f,i));return c.result(n.state(),k.concat(n.result()))},p=function(a,b,d,e,f){var g=a.level()>b?n(a,b):c.result(a,[]),h=g.state().level()===b?l(g.state(),e,d,f):o(g.state(),e,b,d);return i([g,h])},q=n;return{openItem:p,closeAllLists:q}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.emit.Emitter",["ephox.compass.Arr","ephox.pastiche.list.emit.Emission","ephox.pastiche.list.emit.ListModel"],function(a,b,c){var d=["disc","circle","square"],e=function(a,b){return"UL"===a.tag&&d[b-1]===a.type&&(a={tag:"UL"}),a};return function(d,f){var g=b.state(0,void 0,[],[]),h=function(b){a.each(b.result(),function(a){var b=a(f);d.emit(b)})},i=function(){var a=c.closeAllLists(g,0);g=a.state(),h(a),d.commit()},j=function(a,b,d,f){if(d){var k=e(d,a),l=c.openItem(g,a,b,k,f);g=l.state(),h(l)}},k=function(){return g.level()},l=function(){return g.type()};return{closeAllLists:i,openItem:j,getCurrentListType:l,getCurrentLevel:k}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.indent.ListIndent",["ephox.compass.Arr","ephox.pastiche.engine.TokenUtil","ephox.violin.Strings","global!Math"],function(a,b,c,d){var e=function(a,b){var c,e=0;for(c=a.parentNode;null!==c&&c!==b.parentNode;)e+=c.offsetLeft,c=c.offsetParent;return e},f=function(a){return a.ownerDocument.defaultView?a.ownerDocument.defaultView.getComputedStyle(a,null):a.currentStyle||{}},g=function(a){var b={};return function(c,d){var e,f=c+","+d;return b.hasOwnProperty(f)?b[f]:(e=a.call(null,c,d),b[f]=e,e)}},h=g(function(b,d){var e,h,i,j,g=/([^{]+){([^}]+)}/g;for(g.lastIndex=0;null!==(e=g.exec(b))&&!h;)a.each(e[1].split(","),function(a){var b=a.indexOf(".");if(b>=0&&c.trim(a.substring(b+1))===d)return h=e[2],!1});return!!h&&(i=document.createElement("p"),i.setAttribute("style",h),j=f(i),!!j&&""+j.marginLeft)}),i=function(){var a,c,f=function(f,g,i,j){var k,l,n=1;return j&&/^([0-9]+\.)+[0-9]+\.?$/.test(j.text)?j.text.replace(/([0-9]+|\.$)/g,"").length+1:(k=c||parseInt(h(i,b.getAttribute(g,"class"))),l=e(f.getNode(),g.getNode()),k?a?l+=a:0===l&&(a=k,l+=k):k=48,c=k=d.min(l,k),n=d.max(1,d.floor(l/k))||1)};return{guessIndentLevel:f}};return{indentGuesser:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.state.ListStyles",["ephox.pastiche.engine.Token"],function(a){return function(){var b=!1,c="",d=function(d){return b&&d.type()===a.TEXT_TYPE?(c+=d.text(),!0):d.type()===a.START_ELEMENT_TYPE&&"STYLE"===d.tag()?(b=!0,!0):d.type()===a.END_ELEMENT_TYPE&&"STYLE"===d.tag()&&(b=!1,!0)};return{check:d}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.scullion.Cell",[],function(){var a=function(b){var c=b,d=function(){return c},e=function(a){c=a},f=function(){return a(d())};return{get:d,set:e,clone:f}};return a})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.list.state.ListState",["ephox.pastiche.list.emit.Emitter","ephox.pastiche.list.indent.ListIndent","ephox.pastiche.list.state.ListStyles","ephox.peanut.Fun","ephox.scullion.Cell"],function(a,b,c,d,e){var f=b.indentGuesser(),g=c(),h={getCurrentListType:function(){return i().getCurrentListType()},getCurrentLevel:function(){return i().getCurrentLevel()},closeAllLists:function(){return i().closeAllLists.apply(void 0,arguments)},openItem:function(){return i().openItem.apply(void 0,arguments)}},i=function(){return{getCurrentListType:d.constant({}),getCurrentLevel:d.constant(1),closeAllLists:d.identity,openItem:d.identity}};return function(b){var c=e(b),j=e(0),k=e(null),l=e(!1),m=e(null),n=e(!1),o=e(null),p=e([]),q=e(!1),r=e(0),s=e(void 0),t=e([]),u=function(e){c.set(b),j.set(0),k.set(null),l.set(!1),m.set(null),n.set(!1),o.set(null),p.set([]),q.set(!1),r.set(0),s.set(void 0),t.set([]),_emitter=a(e,e.document),i=d.constant(_emitter)};return{reset:u,nextFilter:c,itemLevel:j,originalToken:k,commentMode:l,openedTag:m,symbolFont:n,listType:o,spanCount:p,skippedPara:q,styleLevelAdjust:r,bulletInfo:s,logger:t,emitter:h,styles:g,indentGuesser:f}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.pastiche.filter.Lists",["ephox.pastiche.engine.Filter","ephox.pastiche.list.detect.ListTypes","ephox.pastiche.list.stage.AfterListState","ephox.pastiche.list.stage.AfterNoBulletListState","ephox.pastiche.list.stage.BeforeSpacerState","ephox.pastiche.list.stage.CloseSpansState","ephox.pastiche.list.stage.FindListTypeState","ephox.pastiche.list.stage.ItemContentState","ephox.pastiche.list.stage.ListStartState","ephox.pastiche.list.stage.NoListState","ephox.pastiche.list.stage.SkipEmptyParaState","ephox.pastiche.list.stage.SpacerState","ephox.pastiche.list.state.ListState","ephox.pastiche.list.state.Transitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){
var o=function(a,b){var c="Type: "+b.type()+", Tag: "+b.tag()+" Text: "+b.text();console.log("Unexpected token in list conversion: "+c,z.nextFilter.get()),a.rollback()},p=j.run(function(){return y}),q=k.run(p,function(){return r}),r=c.run(q,p),s=h.run(r),t=f.run(s,o),u=l.run(t),v=e.run(u,t,o),w=g.run(v,o),x=d.run(r),y=i.run(w,x,o),z=m(p),A=function(a,c){z.styles&&z.styles.check(c)||(z.symbolFont.set(b.checkFont(c,z.symbolFont.get())),n.go(a,z,c))};return a.createFilter(A,z.reset,"lists")})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.limbo.process.Strategies",["ephox.pastiche.api.HtmlPatterns","ephox.pastiche.api.HybridAction","ephox.pastiche.api.RuleConditions","ephox.pastiche.api.RuleMutations","ephox.pastiche.filter.Lists","ephox.peanut.Fun","ephox.sugar.api.Class","ephox.sugar.api.Css","ephox.violin.StringMatch"],function(a,b,c,d,e,f,g,h,i){var j=b.unwrapper({tags:[{name:i.pattern(/^([OVWXP]|U[0-9]+|ST[0-9]+):/i)}]}),k=b.pipeline([e]),l=b.removal({attributes:[{name:i.pattern(/^v:/)},{name:i.exact("href"),value:i.contains("#_toc")},{name:i.exact("href"),value:i.contains("#_mso")},{name:i.pattern(/^xmlns(:|$)/)},{name:i.exact("align")},{name:i.exact("type"),condition:c.isList}]}),m=b.removal({tags:[{name:i.exact("script")},{name:i.exact("meta")},{name:i.exact("link")},{name:i.exact("style"),condition:c.isEmpty}],attributes:[{name:i.starts("on")},{name:i.exact('"')},{name:i.exact("id")},{name:i.exact("name")},{name:i.exact("lang")},{name:i.exact("language")}],styles:[{name:i.all(),value:i.pattern(/OLE_LINK/i)}]}),n=function(a){return!g.has(a,"ephox-limbo-transform")},o=b.removal({styles:[{name:i.not(i.pattern(/width|height|list-style-type/)),condition:n},{name:i.pattern(/width|height/),condition:c.isNotImage}]}),p=b.removal({classes:[{name:i.not(i.exact("rtf-data-image"))}]}),q=b.removal({styles:[{name:i.pattern(a.validStyles())}]}),r=b.removal({classes:[{name:i.pattern(/mso/i)}]}),s=b.unwrapper({tags:[{name:i.exact("img"),condition:c.isLocal},{name:i.exact("a"),condition:c.hasNoAttributes}]}),t=b.unwrapper({tags:[{name:i.exact("a"),condition:c.hasNoAttributes}]}),u=b.removal({attributes:[{name:i.exact("style"),value:i.exact(""),debug:!0}]}),v=b.removal({attributes:[{name:i.exact("class"),value:i.exact(""),debug:!0}]}),w=b.unwrapper({tags:[{name:i.pattern(a.specialInline()),condition:f.not(c.hasContent)}]}),x=b.transformer({tags:[{name:i.exact("p"),mutate:d.addBrTag}]}),y=function(a){var b=d.changeTag("span",a);g.add(b,"ephox-limbo-transform"),h.set(b,"text-decoration","underline")},z=b.transformer({tags:[{name:i.pattern(/ol|ul/),mutate:d.properlyNest}]}),A=b.transformer({tags:[{name:i.exact("b"),mutate:f.curry(d.changeTag,"strong")},{name:i.exact("i"),mutate:f.curry(d.changeTag,"em")},{name:i.exact("u"),mutate:y},{name:i.exact("s"),mutate:f.curry(d.changeTag,"strike")},{name:i.exact("font"),mutate:d.fontToSpan,debug:!0}]}),B=b.removal({classes:[{name:i.exact("ephox-limbo-transform")}]}),C=b.removal({attributes:[{name:i.exact("href"),value:i.starts("file:///"),debug:!0}]});return{unwrapWordTags:j,removeWordAttributes:l,parseLists:k,removeExcess:m,cleanStyles:o,cleanClasses:p,mergeStyles:q,mergeClasses:r,removeLocalImages:s,removeVacantLinks:t,removeEmptyStyle:u,removeEmptyClass:v,pruneInlineTags:w,addPlaceholders:x,nestedListFixes:z,inlineTagFixes:A,cleanupFlags:B,removeLocalLinks:C,none:f.noop}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.limbo.process.PasteFilters",["ephox.compass.Arr","ephox.limbo.api.RtfImage","ephox.limbo.process.Strategies","ephox.pastiche.api.HybridAction","ephox.pastiche.engine.Filter","ephox.pastiche.engine.Token","ephox.sugar.api.Element"],function(a,b,c,d,e,f,g){var h=function(a){return a.browser.isIE()&&a.browser.version.major>=11},i=function(a){return e.createFilter(function(b,c){var d=a(g.fromDom(c.getNode())).fold(function(){return c},function(a){var b=a.dom();return f.token(b,c.type()===f.END_ELEMENT_TYPE,{})});b.emit(d)})},j=function(a,e,f){var g=f.browser.isFirefox()?b.local:b.vshape,j=h(f)?c.none:d.pipeline([i(g)]),k=g===b.local?c.none:c.removeLocalImages,l=a?j:c.none;return{annotate:[l],local:[k]}},k=function(a,b,d){var e=[c.mergeStyles,c.mergeClasses],f=[c.cleanStyles,c.cleanClasses];return b?e:f},l=function(a,b,d){if(!a)return c.none;var e=[c.unwrapWordTags],f=h(d)?[]:c.parseLists;return e.concat(f)},m=function(b,d,e){var f=j(b,d,e);return a.flatten([f.annotate,[c.inlineTagFixes],l(b,d,e),[c.nestedListFixes],[c.removeExcess],f.local,k(b,d,e),[c.removeLocalLinks,c.removeVacantLinks],[c.removeEmptyStyle],[c.removeEmptyClass],[c.pruneInlineTags],[c.addPlaceholders],[c.cleanupFlags]])};return{derive:m}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.boss.common.TagBoundaries",[],function(){return["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.Text",["ephox.sugar.api.Node","ephox.sugar.impl.NodeValue"],function(a,b){var c=b(a.isText,"text"),d=function(a){return c.get(a)},e=function(a){return c.getOption(a)},f=function(a,b){c.set(a,b)};return{get:d,getOption:e,set:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.boss.api.DomUniverse",["ephox.boss.common.TagBoundaries","ephox.compass.Arr","ephox.peanut.Fun","ephox.sugar.api.Attr","ephox.sugar.api.Compare","ephox.sugar.api.Css","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.InsertAll","ephox.sugar.api.Node","ephox.sugar.api.PredicateFilter","ephox.sugar.api.PredicateFind","ephox.sugar.api.Remove","ephox.sugar.api.SelectorFilter","ephox.sugar.api.SelectorFind","ephox.sugar.api.Text","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return function(){var r=function(a){return g.fromDom(a.dom().cloneNode(!1))},s=function(c){if(!j.isElement(c))return!1;if("body"===j.name(c))return!0;var d=f.get(c,"display");return void 0!==d&&d.length>0?b.contains(["block","table-cell","table-row","table","list-item"],d):b.contains(a,j.name(c))},t=function(a){return!!j.isElement(a)&&b.contains(["br","img","hr"],j.name(a))},u=function(a,b){return a.dom().compareDocumentPosition(b.dom())},v=function(a,b){var c=d.clone(a);d.setAll(b,c)};return{up:c.constant({selector:o.ancestor,closest:o.closest,predicate:l.ancestor,all:q.parents}),down:c.constant({selector:n.descendants,predicate:k.descendants}),styles:c.constant({get:f.get,set:f.set,remove:f.remove}),attrs:c.constant({get:d.get,set:d.set,remove:d.remove,copyTo:v}),insert:c.constant({before:h.before,after:h.after,afterAll:i.after,append:h.append,appendAll:i.append,prepend:h.prepend,wrap:h.wrap}),remove:c.constant({unwrap:m.unwrap,remove:m.remove}),create:c.constant({nu:g.fromTag,clone:r,text:g.fromText}),query:c.constant({comparePosition:u,prevSibling:q.prevSibling,nextSibling:q.nextSibling}),property:c.constant({children:q.children,name:j.name,parent:q.parent,isText:j.isText,isElement:j.isElement,getText:p.get,setText:p.set,isBoundary:s,isEmptyTag:t}),eq:e.eq,is:e.is}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.api.data.NamedPattern",["ephox.scullion.Struct"],function(a){return a.immutable("word","pattern")})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.api.data.Spot",["ephox.scullion.Struct"],function(a){var b=a.immutable("element","offset"),c=a.immutable("element","deltaOffset"),d=a.immutable("element","start","finish"),e=a.immutable("begin","end"),f=a.immutable("element","text");return{point:b,delta:c,range:d,points:e,text:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.extract.TypedItem",["ephox.peanut.Fun","ephox.perhaps.Option"],function(a,b){var c=a.constant(!1),d=a.constant(!0),e=function(a,b){return h(function(c,d,e){return c(a,b)})},f=function(a,b){return h(function(c,d,e){return d(a,b)})},g=function(a,b){return h(function(c,d,e){return e(a,b)})},h=function(e){var f=function(){return e(d,c,c)},g=function(){return e(b.none,b.none,function(a,c){return b.some(a)})},h=function(a){return e(c,c,function(b,c){return c.eq(b,a)})},i=function(){return e(a.constant(0),a.constant(1),function(a,b){return b.property().getText(a).length})};return{isBoundary:f,fold:e,toText:g,is:h,len:i}};return{text:g,boundary:e,empty:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.array.Boundaries",["ephox.compass.Arr","ephox.peanut.Fun"],function(a,b){var c=function(c,d,e,f){var g=a.findIndex(c,b.curry(f,d)),h=g>-1?g:0,i=a.findIndex(c,b.curry(f,e)),j=i>-1?i+1:c.length;return c.slice(h,j)};return{boundAt:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.array.Slice",["ephox.compass.Arr"],function(a){var b=function(b,c){var d=a.findIndex(b,c);return b.slice(0,d)};return{sliceby:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.array.Split",["ephox.compass.Arr"],function(a){var b=function(b,c){var d=[],e=[];return a.each(b,function(a){c(a)?(d.push(e),e=[]):e.push(a)}),e.length>0&&d.push(e),d};return{splitby:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.api.Arrays",["ephox.polaris.array.Boundaries","ephox.polaris.array.Slice","ephox.polaris.array.Split"],function(a,b,c){var d=function(b,c,d,e){return a.boundAt(b,c,d,e)},e=function(a,b){return c.splitby(a,b)},f=function(a,c){return b.sliceby(a,c)};return{splitby:e,sliceby:f,boundAt:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.extract.TypedList",["ephox.compass.Arr","ephox.peanut.Fun","ephox.perhaps.Option","ephox.phoenix.api.data.Spot","ephox.polaris.api.Arrays"],function(a,b,c,d,e){var f=function(b){return a.foldr(b,function(a,b){return b.len()+a},0)},g=function(a,b){return e.sliceby(a,function(a){return a.is(b)})},h=function(a,b){return a.fold(c.none,function(a){return c.some(d.range(a,b,b+1))},function(e){return c.some(d.range(e,b,b+a.len()))})},i=function(c){return a.bind(c,function(a){return a.fold(b.constant([]),b.constant([]),b.identity)})};return{count:f,dropUntil:g,gen:h,justText:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.extract.Extract",["ephox.compass.Arr","ephox.phoenix.api.data.Spot","ephox.phoenix.extract.TypedItem","ephox.phoenix.extract.TypedList"],function(a,b,c,d){var e=function(b,d,f){if(b.property().isText(d))return[c.text(d,b)];if(b.property().isEmptyTag(d))return[c.empty(d,b)];if(b.property().isElement(d)){var g=b.property().children(d),h=b.property().isBoundary(d)?[c.boundary(d,b)]:[],i=void 0!==f&&f(d)?[]:a.bind(g,function(a){return e(b,a,f)});return h.concat(i).concat(h)}return[]},f=function(b,c,d){var f=e(b,c,d),g=function(a,b){return a};return a.map(f,function(a){return a.fold(g,g,g)})},g=function(a,c,f,g,h){var i=e(a,g,h),j=d.dropUntil(i,c),k=d.count(j);return b.point(g,k+f)},h=function(a,c,d,e){return a.property().parent(c).fold(function(){return b.point(c,d)},function(b){return g(a,c,d,b,e)})},i=function(a,c,d,e,f){return a.up().predicate(c,e).fold(function(){return b.point(c,d)},function(b){return g(a,c,d,b,f)})};return{typed:e,items:f,extractTo:i,extract:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.extract.ExtractText",["ephox.compass.Arr","ephox.peanut.Fun","ephox.phoenix.extract.Extract"],function(a,b,c){var d="\n",e=" ",f=function(a,b){return"img"===b.property().name(a)?e:d},g=function(e,g,h){var i=c.typed(e,g,h);return a.map(i,function(a){return a.fold(b.constant(d),f,e.property().getText)}).join("")};return{from:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.parray.Generator",["ephox.compass.Arr","ephox.peanut.Fun"],function(a,b){var c=function(c,d,e){var f={len:void 0!==e?e:0,list:[]},g=a.foldl(c,function(a,c){var e=d(c,a.len);return e.fold(b.constant(a),function(b){return{len:b.finish(),list:a.list.concat([b])}})},f);return g.list};return{make:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.parray.Query",["ephox.compass.Arr","ephox.perhaps.Option"],function(a,b){var c=function(a,b){return b>=a.start()&&b<=a.finish()},d=function(d,e){var f=a.find(d,function(a){return c(a,e)});return b.from(f)},e=function(b,c){return a.findIndex(b,function(a){return a.start()===c})},f=function(a,b){var c=a[a.length-1]&&a[a.length-1].finish()===b;return c?a.length+1:-1},g=function(a,b,c){var d=e(a,b),g=e(a,c),h=g>-1?g:f(a,c);return d>-1&&h>-1?a.slice(d,h):[]},h=function(c,d){return b.from(a.find(c,d))};return{get:d,find:h,inUnit:c,sublist:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.parray.Translate",["ephox.compass.Arr","ephox.highway.Merger","ephox.peanut.Fun"],function(a,b,c){var d=function(d,e){return a.map(d,function(a){return b.merge(a,{start:c.constant(a.start()+e),finish:c.constant(a.finish()+e)})})};return{translate:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.parray.Split",["ephox.compass.Arr","ephox.polaris.parray.Query","ephox.polaris.parray.Translate"],function(a,b,c){var d=function(a,b,d){var e=d(a,b);return c.translate(e,a.start())},e=function(c,e,f){return 0===e.length?c:a.bind(c,function(c){var g=a.bind(e,function(a){return b.inUnit(c,a)?[a-c.start()]:[]});return g.length>0?d(c,g,f):[c]})};return{splits:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.api.PositionArray",["ephox.polaris.parray.Generator","ephox.polaris.parray.Query","ephox.polaris.parray.Split","ephox.polaris.parray.Translate"],function(a,b,c,d){var e=function(b,c,d){return a.make(b,c,d)},f=function(a,c){return b.get(a,c)},g=function(a,c){return b.find(a,c)},h=function(a,b,d){return c.splits(a,b,d)},i=function(a,b){return d.translate(a,b)},j=function(a,c,d){return b.sublist(a,c,d)};return{generate:e,get:f,find:g,splits:h,translate:i,sublist:j}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.extract.Find",["ephox.phoenix.api.data.Spot","ephox.phoenix.extract.Extract","ephox.phoenix.extract.TypedList","ephox.polaris.api.PositionArray"],function(a,b,c,d){var e=function(e,f,g,h){var i=b.typed(e,f,h),j=d.generate(i,c.gen),k=d.get(j,g);return k.map(function(b){return a.point(b.element(),g-b.start())})};return{find:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.api.general.Extract",["ephox.phoenix.extract.Extract","ephox.phoenix.extract.ExtractText","ephox.phoenix.extract.Find"],function(a,b,c){var d=function(b,c,d){return a.typed(b,c,d)},e=function(b,c,d){return a.items(b,c,d)},f=function(b,c,d,e){return a.extract(b,c,d,e)},g=function(b,c,d,e,f){return a.extractTo(b,c,d,e,f)},h=function(a,b,d,e){return c.find(a,b,d,e)},i=function(a,c,d){return b.from(a,c,d)};return{extract:f,extractTo:g,all:e,from:d,find:h,toText:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.family.Group",["ephox.compass.Arr","ephox.phoenix.api.general.Extract","ephox.polaris.api.Arrays"],function(a,b,c){var d=function(d,e,f){var g=a.bind(e,function(a){return b.from(d,a,f)}),h=c.splitby(g,function(a){return a.isBoundary()});return a.filter(h,function(a){return a.length>0})};return{group:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.family.Parents",["ephox.compass.Arr","ephox.perhaps.Option"],function(a,b){var c=function(c,d,e){var f=[d].concat(c.up().all(d)),g=[e].concat(c.up().all(e)),h=a.find(f,function(b){return a.exists(g,function(a){return c.eq(a,b)})});return b.from(h)};return{common:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.wrap.OrphanText",["ephox.compass.Arr"],function(a){var b=["table","tbody","thead","tfoot","tr","ul","ol"];return function(c){var d=c.property(),e=function(b,c){return d.parent(b).map(d.name).map(function(b){return!a.contains(c,b)}).getOr(!1)},f=function(a){return d.isText(a)&&e(a,b)};return{validateText:f}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.family.Range",["ephox.compass.Arr","ephox.peanut.Fun","ephox.phoenix.api.general.Extract","ephox.phoenix.family.Parents","ephox.phoenix.wrap.OrphanText"],function(a,b,c,d,e){var f=function(c,d,e){return a.findIndex(d,b.curry(c.eq,e))},g=function(a,b,c,d,e){return b<d?a.slice(b+c,d+e):a.slice(d+e,b+c)},h=function(h,i,j,k,l){return h.eq(i,k)?[i]:d.common(h,i,k).fold(function(){return[]},function(d){var m=[d].concat(c.all(h,d,b.constant(!1))),n=f(h,m,i),o=f(h,m,k),p=n>-1&&o>-1?g(m,n,j,o,l):[],q=e(h);return a.filter(p,q.validateText)})};return{range:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.api.general.Family",["ephox.phoenix.family.Group","ephox.phoenix.family.Range"],function(a,b){var c=function(a,c,d,e,f){return b.range(a,c,d,e,f)},d=function(b,c,d){return a.group(b,c,d)};return{range:c,group:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.string.Sanitise",[],function(){var a=function(a){var b=/^[a-zA-Z]/.test(a)?"":"e",c=a.replace(/[^\w]/gi,"-");return b+c};return{css:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.string.Split",["ephox.compass.Arr"],function(a){var b=function(b,c){if(0===c.length)return[b];var d=a.foldl(c,function(a,c){if(0===c)return a;var d=b.substring(a.prev,c);return{prev:c,values:a.values.concat([d])}},{prev:0,values:[]}),e=c[c.length-1];return e<b.length?d.values.concat(b.substring(e)):d.values};return{splits:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.api.Strings",["ephox.polaris.string.Sanitise","ephox.polaris.string.Split"],function(a,b){var c=function(a,c){return b.splits(a,c)},d=function(b){return a.css(b)};return{cssSanitise:d,splits:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.search.Splitter",["ephox.compass.Arr","ephox.perhaps.Option","ephox.phoenix.api.data.Spot","ephox.polaris.api.PositionArray","ephox.polaris.api.Strings"],function(a,b,c,d,e){var f=function(f,g,h){var i=f.property().getText(g),j=a.filter(e.splits(i,h),function(a){return a.length>0});if(j.length<=1)return[c.range(g,0,i.length)];f.property().setText(g,j[0]);var k=d.generate(j.slice(1),function(a,d){var e=f.create().text(a),g=c.range(e,d,d+a.length);return b.some(g)},j[0].length),l=a.map(k,function(a){return a.element()});return f.insert().afterAll(g,l),[c.range(g,0,j[0].length)].concat(k)};return{subdivide:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.search.MatchSplitter",["ephox.compass.Arr","ephox.peanut.Fun","ephox.phoenix.search.Splitter","ephox.polaris.api.PositionArray"],function(a,b,c,d){var e=function(e,f,g){var h=a.bind(g,function(a){return[a.start(),a.finish()]}),i=function(a,b){return c.subdivide(e,a.element(),b)},j=d.splits(f,h,i),k=function(c){var f=d.sublist(j,c.start(),c.finish()),g=a.map(f,function(a){return a.element()}),h=a.map(g,e.property().getText).join("");return{elements:b.constant(g),word:c.word,exact:b.constant(h)}};return a.map(g,k)};return{separate:e}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.bud.Unicode",[],function(){var a=function(){return"​"},b=function(a){return a.replace(/\u200B/,"").trim()},c=function(a){return a.replace(/^\s+|\s+$/g,"").replace(/\u200B/,"")};return{zeroWidth:a,trimNative:b,trimWithRegex:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.pattern.Chars",["ephox.bud.Unicode","ephox.peanut.Fun"],function(a,b){var c="\\w'\\-\\u00C0-\\u00FF"+a.zeroWidth()+"\\u2018\\u2019",d="[^"+c+"]",e="["+c+"]";return{chars:b.constant(c),wordbreak:b.constant(d),wordchar:b.constant(e)}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.pattern.Custom",["global!RegExp"],function(a){return function(b,c,d,e){var f=function(){return new a(b,e.getOr("g"))};return{term:f,prefix:c,suffix:d}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.pattern.Unsafe",["ephox.peanut.Fun","ephox.perhaps.Option","ephox.polaris.pattern.Chars","ephox.polaris.pattern.Custom"],function(a,b,c,d){var e=function(c){return d(c,a.constant(0),a.constant(0),b.none())},f=function(a){var e="((?:^'?)|(?:"+c.wordbreak()+"+'?))"+a+"((?:'?$)|(?:'?"+c.wordbreak()+"+))",f=function(a){return a.length>1?a[1].length:0},g=function(a){return a.length>2?a[2].length:0};return d(e,f,g,b.none())};return{token:e,word:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.pattern.Safe",["ephox.polaris.pattern.Unsafe"],function(a){var b=function(a){return a.replace(/[-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},c=function(c){var d=b(c);return a.word(d)},d=function(c){var d=b(c);return a.token(d)};return{sanitise:b,word:c,token:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.api.Pattern",["ephox.polaris.pattern.Chars","ephox.polaris.pattern.Custom","ephox.polaris.pattern.Safe","ephox.polaris.pattern.Unsafe"],function(a,b,c,d){var e=function(a){return c.word(a)},f=function(a){return c.token(a)},g=function(a,c,d,e){return b(a,c,d,e)},h=function(a){return d.word(a)},i=function(a){return d.token(a)},j=function(a){return c.sanitise(a)},k=function(){return a.chars()},l=function(){return a.wordbreak()},m=function(){return a.wordchar()};return{safeword:e,safetoken:f,custom:g,unsafeword:h,unsafetoken:i,sanitise:j,chars:k,wordbreak:l,wordchar:m}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.search.Find",["ephox.peanut.Fun"],function(a){var b=function(b,c){for(var d=c.term(),e=[],f=d.exec(b);f;){var g=f.index+c.prefix(f),h=f[0].length-c.prefix(f)-c.suffix(f);e.push({start:a.constant(g),finish:a.constant(g+h)}),d.lastIndex=g+h,f=d.exec(b)}return e};return{all:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.search.Sleuth",["ephox.compass.Arr","ephox.highway.Merger","ephox.polaris.search.Find","global!Array"],function(a,b,c,d){var e=function(a){var b=d.prototype.slice.call(a,0);return b.sort(function(a,b){return a.start()<b.start()?-1:b.start()<a.start()?1:0}),b},f=function(d,f){var g=a.bind(f,function(e){var f=c.all(d,e.pattern());return a.map(f,function(a){return b.merge(e,{start:a.start,finish:a.finish})})});return e(g)};return{search:f}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.polaris.api.Search",["ephox.polaris.search.Find","ephox.polaris.search.Sleuth"],function(a,b){var c=function(b,c){return a.all(b,c)},d=function(a,c){return b.search(a,c)};return{findall:c,findmany:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.search.Searcher",["ephox.compass.Arr","ephox.perhaps.Option","ephox.phoenix.api.data.NamedPattern","ephox.phoenix.api.data.Spot","ephox.phoenix.api.general.Family","ephox.phoenix.extract.TypedList","ephox.phoenix.search.MatchSplitter","ephox.polaris.api.Pattern","ephox.polaris.api.PositionArray","ephox.polaris.api.Search"],function(a,b,c,d,e,f,g,h,i,j){var k=function(a,c){return i.generate(c,function(c,e){var f=e+a.property().getText(c).length;return b.from(d.range(c,e,f))})},l=function(b,c,d,h){var i=e.group(b,c,h),l=a.bind(i,function(c){var e=f.justText(c),h=a.map(e,b.property().getText).join(""),i=j.findmany(h,d),l=k(b,e);return g.separate(b,l,i)});return l},m=function(b,d,e,f){var g=a.map(e,function(a){var b=h.safeword(a);return c(a,b)});return l(b,d,g,f)},n=function(a,b,d,e){var f=c(d,h.safetoken(d));return l(a,b,[f],e)};return{safeWords:m,safeToken:n,run:l}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.api.general.Search",["ephox.phoenix.search.Searcher"],function(a){var b=function(b,c,d,e){return a.run(b,c,d,e)},c=function(b,c,d,e){return a.safeWords(b,c,d,e)},d=function(b,c,d,e){return a.safeToken(b,c,d,e)};return{safeWords:c,safeToken:d,run:b}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.phoenix.api.dom.DomSearch",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Search"],function(a,b){var c=a(),d=function(a,d,e){return b.run(c,a,d,e)},e=function(a,d,e){return b.safeWords(c,a,d,e)},f=function(a,d,e){return b.safeToken(c,a,d,e)};return{safeWords:e,safeToken:f,run:d}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sugar.api.SelectorExists",["ephox.sugar.api.SelectorFind"],function(a){var b=function(b){return a.first(b).isSome()},c=function(b,c,d){return a.ancestor(b,c,d).isSome()},d=function(b,c){return a.sibling(b,c).isSome()},e=function(b,c){return a.child(b,c).isSome()},f=function(b,c){return a.descendant(b,c).isSome()},g=function(b,c,d){return a.closest(b,c,d).isSome()};return{any:b,ancestor:c,sibling:d,child:e,descendant:f,closest:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.limbo.process.Preprocessor",["ephox.compass.Arr","ephox.perhaps.Option","ephox.phoenix.api.dom.DomSearch","ephox.polaris.api.Pattern","ephox.scullion.Struct","ephox.sugar.api.Attr","ephox.sugar.api.Css","ephox.sugar.api.Element","ephox.sugar.api.Html","ephox.sugar.api.Insert","ephox.sugar.api.InsertAll","ephox.sugar.api.Node","ephox.sugar.api.SelectorExists"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n="((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)(:[0-9]+)?((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)",o=function(a){var b=e.immutable("word","pattern"),f=d.unsafetoken(n),g=b("__INTERNAL__",f);return c.run(a,[g])},p=function(a){return!m.closest(a,"a")},q=function(a){return b.from(a[0]).filter(p).map(function(b){var c=h.fromTag("a");return j.before(b,c),k.append(c,a),f.set(c,"href",i.get(c)),c})},r=function(b){var c=o(b);a.each(c,function(a){a.exact().indexOf("@")<0&&q(a.elements())})},s=function(b){a.each(b,function(a){l.isElement(a)&&g.remove(a,"position")})};return{links:r,position:s}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.limbo.api.RunPaste",["ephox.compass.Arr","ephox.limbo.process.PasteFilters","ephox.limbo.process.Preprocessor","ephox.pastiche.api.HybridAction","ephox.sugar.api.Html","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f){var g=function(b,d){var e=f.children(d);a.each([c.links,c.position],function(a){a(e)})},h=function(a,c,f,h,i){g(c,f);var j=e.get(f),k=b.derive(i,h,c);return d.go(a,j,k)};return{go:h}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.limbo.api.Sources",["ephox.pastiche.api.HybridAction","ephox.sugar.api.Attr","ephox.sugar.api.Html","ephox.sugar.api.PredicateExists"],function(a,b,c,d){var e=function(a){return d.descendant(a,function(a){return!!b.has(a,"style")&&b.get(a,"style").indexOf("mso-")>-1})},f=function(b){var d=c.get(b);return a.isWordContent(d)},g=function(a,b){var c=a.browser,d=c.isIE()&&c.version.major>=11?e:f;return d(b)};return{isWord:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sloth.data.Range",["ephox.peanut.Fun","ephox.sugar.api.Compare"],function(a,b){return function(c,d,e,f){var g=b.eq(c,e)&&d===f;return{startContainer:a.constant(c),startOffset:a.constant(d),endContainer:a.constant(e),endOffset:a.constant(f),collapsed:a.constant(g)}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sloth.api.BodySwitch",["ephox.sloth.data.Range","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.Remove","ephox.sugar.api.Traverse"],function(a,b,c,d,e){return function(f){var g=b.fromTag("br"),h=function(a,b){a.dom().focus()},i=function(a){var b=e.owner(a);return b.dom().defaultView},j=function(b,d){var e=i(d);e.focus(),c.append(d,g),f.set(e,a(g,0,g,0))},k=function(){d.remove(g)};return{cleanup:k,toOn:h,toOff:j}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sloth.api.DivSwitch",["ephox.peanut.Fun"],function(a){return function(){var b=function(a,b){a.dom().focus()},c=function(a,b){b.dom().focus()},d=a.identity;return{toOn:b,toOff:c,cleanup:d}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.plumber.tap.control.BlockControl",[],function(){var a=function(){var a=!1,b=function(){return a},c=function(){a=!0},d=function(){a=!1};return{isBlocked:b,block:c,unblock:d}};return{create:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.plumber.tap.wrap.Tapped",[],function(){var a=function(a,b){return{control:a,instance:b}};return{create:a}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.plumber.tap.function.BlockTap",["ephox.plumber.tap.control.BlockControl","ephox.plumber.tap.wrap.Tapped"],function(a,b){var c=function(c){var d=a.create(),e=function(){d.isBlocked()||c.apply(null,arguments)};return b.create(d,e)};return{tap:c}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sloth.api.Paste",["ephox.fred.PlatformDetection","ephox.peanut.Fun","global!setTimeout"],function(a,b,c){var d=a.detect(),e=function(a,b,c){b.control.block(),a.dom().execCommand("paste"),c(),b.control.unblock()},f=function(a,b,d){c(d,1)},g=d.browser.isIE()&&d.browser.version.major<=10,h=g?e:f,i=function(a,b,c){return h(a,b,c)};return{willBlock:b.constant(g),run:i}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sloth.engine.Consolidator",["ephox.compass.Arr","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.InsertAll","ephox.sugar.api.Remove","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f){var g=function(a,b){f.nextSibling(a).filter(b).each(function(b){var c=f.children(b);d.append(a,c),e.remove(b)}),i(a,b)},h=function(a,g){var h=f.children(a),i=b.fromTag("div",f.owner(a).dom());d.append(i,h),c.before(a,i),e.remove(a)},i=function(b,c){var d=f.children(b);a.each(d,function(a){c(a)&&h(a,b)})};return{consolidate:g}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sloth.engine.Offscreen",["ephox.epithet.Id","ephox.scullion.Struct","ephox.sloth.engine.Consolidator","ephox.sugar.api.Attr","ephox.sugar.api.Class","ephox.sugar.api.Css","ephox.sugar.api.Element","ephox.sugar.api.Html","ephox.sugar.api.Insert","ephox.sugar.api.Remove","ephox.sugar.api.SelectorFind","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f,g,h,i,j,k,l){
var m=a.generate("ephox-sloth-bin");return function(a){var n=g.fromTag("div");d.set(n,"contenteditable","true"),e.add(n,m),f.setAll(n,{position:"absolute",left:"0px",top:"0px",width:"0px",height:"0px",overflow:"hidden"});var o=function(a){j.empty(n),i.append(a,n)},p=function(){var b=k.ancestor(n,"body");b.each(function(b){a.toOff(b,n)})},q=function(a){return e.has(a,m)},r=function(){c.consolidate(n,q);var a=b.immutable("elements","html","container"),d=l.children(n),e=h.get(n);return a(d,e,n)},s=function(){j.remove(n)},t=function(){return n};return{attach:o,focus:p,contents:r,container:t,detach:s}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.sloth.api.ProxyPaste",["ephox.peanut.Fun","ephox.plumber.tap.function.BlockTap","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sloth.api.Paste","ephox.sloth.engine.Offscreen","ephox.sugar.api.Traverse"],function(a,b,c,d,e,f,g){return function(h,i){var j=f(h),k=function(){h.cleanup();var a=j.contents();j.detach(),n.trigger.after(a.elements(),a.html(),j.container())},l=b.tap(function(){n.trigger.before(),j.attach(i),j.focus(),e.run(g.owner(i),l,k)}),m=function(){l.instance()},n=d.create({before:c([]),after:c(["elements","html","container"])}),o=a.noop;return{instance:a.constant(m),destroy:o,events:n.registry}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.pastiche.Pastiche",["ephox.cement.api.CementConstants","ephox.cement.pastiche.IeBlob","ephox.compass.Arr","ephox.fred.PlatformDetection","ephox.fussy.api.WindowSelection","ephox.limbo.api.RunPaste","ephox.limbo.api.Sources","ephox.peanut.Fun","ephox.perhaps.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.sloth.api.BodySwitch","ephox.sloth.api.DivSwitch","ephox.sloth.api.ProxyPaste","ephox.sugar.api.Class","ephox.sugar.api.Elements","ephox.sugar.api.Node","ephox.sugar.api.Remove","ephox.sugar.api.Traverse","global!console","global!setTimeout"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=d.detect();return function(d,w,x,y){var z=function(a,b){return void 0===y||b?i.none():y.findClipboardTags(s.children(a))},A=k.create({paste:j(["elements","assets"]),error:j(["message"])}),B={set:function(a,b){e.setExact(a,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())}},C=v.browser.isIE()&&"body"!==q.name(w)?m:l,D=C(B),E=s.owner(w),F=n(D,w),G=i.none();F.events.after.bind(function(b){var e=b.container();D.toOn(w,e),d(e),o.add(e,a.binStyle());var j=g.isWord(v,e),k=function(a){var b=(j&&a.mergeOfficeStyles)===!0||!j&&a.mergeHtmlStyles===!0;try{var c=f.go(E,v,e,b,j);if(void 0!==c&&null!==c&&c.length>0){var d=p.fromHtml(c);G.fold(function(){A.trigger.paste(d,[])},function(a){a.get(function(a){A.trigger.paste(d,a)})}),G=i.none()}else A.trigger.paste([],[])}catch(a){t.error(a),A.trigger.error("errors.paste.process.failure")}},l=h.curry(x.get,j,k);z(e,j).fold(l,function(a){c.each(a,r.remove),u(function(){k({mergeHtmlStyles:!0})},0)})});var H=function(){F.destroy()},I=function(a){try{G=b.convert(a);var c=F.instance();c()}catch(a){t.error(a),A.trigger.error("errors.paste.process.failure")}};return{handler:I,isSupported:h.constant(!0),events:A.registry,destroy:H}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.smartpaste.PasteHandlers",["ephox.cement.html.HtmlPaste","ephox.cement.images.ImagePaste","ephox.cement.pastiche.Pastiche","ephox.porkbun.Event","ephox.porkbun.Events","ephox.scullion.Struct","ephox.violin.Strings"],function(a,b,c,d,e,f,g){var h=f.immutable("captured"),i=function(a){return g.contains(a,"<html")&&(g.contains(a,'xmlns:o="urn:schemas-microsoft-com:office:office"')||g.contains(a,'xmlns:x="urn:schemas-microsoft-com:office:excel"'))};return function(f,g,j,k){var l=k.intraFlag,m=a(j,k),n=b(k),o=c(f,g,j,l),p=e.create({paste:d(["elements","assets"]),error:d(["message"]),cancel:d([])}),q=function(a){a.events.error.bind(function(a){p.trigger.error(a.message())}),a.events.paste.bind(function(a){var b=a.elements(),c=a.assets();0===b.length&&0===c.length?p.trigger.cancel():p.trigger.paste(b,c)})};q(m),q(n),q(o);var r=function(a,b){var c=a.clipboardData.getData(b),d=i(c)?m.handler(c):t(a,b);return h(d)},s=function(a,b){var c=n.handler(a.clipboardData.items);return h(c)},t=function(a,b){return o.handler(a),!1},u=function(a,b){var c=t(a,b);return h(c)},v={html:r,image:n.isSupported()?s:u,files:n.isSupported()?s:u,fallback:u};void 0!==l&&(v[l.clipboardType()]=u);var w=function(){o.destroy()};return{events:p.registry,handlers:v,destroy:w}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.smartpaste.PasteBroker",["ephox.cement.smartpaste.Inspection","ephox.cement.smartpaste.PasteHandlers","ephox.perhaps.Option","ephox.perhaps.Options","global!RegExp"],function(a,b,c,d,e){var f=["html","image","files"],g={flavor:"fallback"},h=function(b,f){if(!a.isValidData(f))return g;var h=f.types,i=d.findMap(b,function(a){var b=new e(a,"i");return d.findMap(h,function(d){return null!==d.match(b)?c.some({type:d,flavor:a}):c.none()})});return i.getOr(g)},i=function(a,b){var c=void 0===a?f:[a.clipboardType()].concat(f);return function(a){var d=h(c,a.clipboardData),e=b[d.flavor],f=e(a,d.type);f.captured()&&a.preventDefault()}};return function(a,c,d,e){var f=b(a,c,d,e),g=i(e.intraFlag,f.handlers),h=function(){f.destroy()};return{events:f.events,handlePaste:g,destroy:h}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.porkbun.SourceEvent",["ephox.compass.Arr","ephox.peanut.Fun","ephox.porkbun.Event"],function(a,b,c){return function(d,e){var f=c(d),g=0,h=function(b){var c=a.map(d,function(a){return b[a]()});f.trigger.apply(null,c)},i=function(a){f.bind(a),g++,1===g&&e.bind(h)},j=function(a){f.unbind(a),g--,0===g&&e.unbind(h)};return{bind:i,unbind:j,trigger:b.die("Cannot trigger a source event.")}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.cement.api.Cement",["ephox.cement.flash.Flash","ephox.cement.smartpaste.MergeSettings","ephox.cement.smartpaste.PasteBroker","ephox.limbo.api.RtfImage","ephox.plumber.tap.function.BlockTap","ephox.porkbun.Event","ephox.porkbun.Events","ephox.porkbun.SourceEvent","ephox.sloth.api.Paste","ephox.sugar.api.Element","ephox.sugar.api.InsertAll"],function(a,b,c,d,e,f,g,h,i,j,k){return function(l,m,n,o){var p=a(m,o),q=b(m,o),r={baseUrl:o.baseUrl,allowLocalImages:o.allowLocalImages,intraFlag:o.intraFlag},s=c(n,l,q,r),t=g.create({cancel:h([],q.events.cancel),error:f(["message"]),insert:f(["elements","assets"])}),u=function(a){v.control.unblock(),t.trigger.insert(a.elements(),a.assets())};p.events.insert.bind(u);var v=e.tap(function(a){i.willBlock()&&(v.control.block(),a.preventDefault()),s.handlePaste(a),v.control.isBlocked()&&a.preventDefault()});q.events.open.bind(v.control.block),q.events.close.bind(v.control.unblock),s.events.paste.bind(function(a){var b=a.elements(),c=j.fromTag("div");k.append(c,b),d.exists(c)?(v.control.block(),p.gordon(c,a.assets())):u(a)});var w=function(){s.destroy()},x=function(a){v.control.unblock(),t.trigger.error(a.message())};return p.events.error.bind(x),s.events.error.bind(x),{paste:v.instance,isBlocked:v.control.isBlocked,destroy:w,events:t.registry}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.settings.Defaults",[],function(){return{officeStyles:"prompt",htmlStyles:"clean"}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.styles.Styles",["ephox.sugar.api.Attr","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.Remove","ephox.sugar.api.SelectorExists","ephox.sugar.api.SelectorFind","global!document"],function(a,b,c,d,e,f,g){var h="powerpaste-styles",i="#"+h,j=function(d){if(!e.any(i)){var g="<style>.ephox-cement-flashbin-helpcopy-kbd {font-size: 3em !important; text-align: center !important; vertical-align: middle !important; margin: .5em 0} .ephox-cement-flashbin-helpcopy-kbd .ephox-polish-help-kbd {font-size: 3em !important; vertical-align: middle !important;} .ephox-cement-flashbin-helpcopy a {text-decoration: underline} .ephox-cement-flashbin-loading-spinner {background-image: url("+d+") !important; width: 96px !important; height:96px !important; display: block; margin-left: auto !important; margin-right: auto !important; margin-top: 2em !important; margin-bottom: 2em !important;} .ephox-cement-flashbin-loading p {text-align: center !important; margin: 2em 0 !important} .ephox-cement-flashbin-target {height: 1px !important;} .ephox-cement-flashbin-target.ephox-cement-flash-activate {height: 150px !important; width: 100% !important;} .ephox-cement-flashbin-target object {height: 1px !important;} .ephox-cement-flashbin-target.ephox-cement-flash-activate object {height: 150px !important; width: 100% !important;} </style>",j=b.fromHtml(g);a.set(j,"type","text/css"),a.set(j,"id",h);var k=f.first("head").getOrDie("Head element could not be found.");c.append(k,j)}},k=function(){if(e.any(i)){var a=f.first("head").getOrDie("Head element could not be found."),b=f.descendant(a,i).getOrDie("The style element could not be removed");d.remove(b)}};return{injectStyles:j,removeStyles:k}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.ModernTinyDialog",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.powerpaste.util.NodeUtil","ephox.sugar.api.Attr","ephox.sugar.api.Element","ephox.sugar.api.Insert","ephox.sugar.api.Remove","ephox.sugar.api.SelectorFind"],function(a,b,c,d,e,f,g,h){return function(i){var j=function(){var j,k="",l="",m=[],n=null,o=b.create({close:a([])}),p=function(a){k=a},q=function(a){tinymce.Env.safari;var b=c.nodeToString(a.dom());l=[{type:"container",html:b}],n=a},r=function(a){var b=[];a.forEach(function(a,c,d){b.push({text:a.text,onclick:a.click})}),m=b},s=function(a){o.trigger.close()},t=function(){j.off("close",s),j.close("close")},u=function(){0===m.length&&(m=[{text:"Close",onclick:function(){j.close()}}]);var a={title:k,spacing:10,padding:10,items:l,buttons:m};j=i.windowManager.open(a);var b=e.fromDom(j.getEl()),c=h.descendant(b,"."+d.get(n,"class")).getOrDie("We must find this element or we cannot continue");f.before(c,n),g.remove(c),j.on("close",s)},v=function(){t()},w=function(){t()},x=function(){};return{events:o.registry,setTitle:p,setContent:q,setButtons:r,show:u,hide:v,destroy:w,reflow:x}};return{createDialog:j}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.ModernPowerPaste",["ephox.cement.api.Cement","ephox.compass.Arr","ephox.peanut.Fun","ephox.powerpaste.i18n.I18n","ephox.powerpaste.settings.Defaults","ephox.powerpaste.styles.Styles","ephox.powerpaste.tinymce.ErrorDialog","ephox.powerpaste.tinymce.ModernTinyDialog","ephox.powerpaste.util.NodeUtil","ephox.sugar.api.DomEvent","ephox.sugar.api.Element","global!setTimeout","global!tinymce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(n,o,p,q){var r,s,t,u,v;v=(p?p.swfUrl:o)+"/js",s=(p?p.swfUrl:o)+"/flash/textboxpaste.swf",t=(p?p.imgUrl:o)+"/img/spinner_96.gif",u=(p?p.cssUrl:o)+"/powerpaste.css",n.on("init",function(m){f.injectStyles(t),n.dom.loadCSS(u);var o={baseUrl:v,swf:s,officeStyles:n.settings.powerpaste_word_import||e.officeStyles,htmlStyles:n.settings.powerpaste_html_import||e.htmlStyles,translations:d.translate,allowLocalImages:n.settings.powerpaste_allow_local_images},p=h(n),w=k.fromDom(n.getBody()),x=a(w,p.createDialog,c.noop,o);x.events.cancel.bind(function(){r=null}),x.events.error.bind(function(a){r=null,g.showDialog(n,d.translate(a.message()))}),x.events.insert.bind(function(a){var c=b.map(a.elements(),function(a){return i.nodeToString(a.dom())}).join("");if(n.hasEventListeners("PastePostProcess")){var d=n.dom.add(n.getBody(),"div",{style:"display:none"},c);c=n.fire("PastePostProcess",{node:d}).node.innerHTML,n.dom.remove(d)}n.focus(),l(function(){n.selection.moveToBookmark(r),r=null,n.undoManager.transact(function(){n.insertContent(c,{merge:n.settings.paste_merge_formats!==!1}),q.prepareImages(a.assets())}),q.uploadImages(a.assets())},1)}),j.bind(w,"paste",function(a){r||(r=n.selection.getBookmark()),x.paste(a.raw()),l(function(){n.windowManager.windows[0]&&n.windowManager.windows[0].getEl().focus()},1)})}),n.on("remove",function(a){1===m.editors.length&&f.removeStyles()})}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.tinymce.TinyPowerPaste",["ephox.powerpaste.imageupload.UploaderFactory","ephox.powerpaste.tinymce.LegacyPowerPaste","ephox.powerpaste.tinymce.ModernPowerDrop","ephox.powerpaste.tinymce.ModernPowerPaste","global!tinymce"],function(a,b,c,d,e){return function(f){return function(g,h){var i=function(){var b=a(g);d(g,h,f,b),g.settings.powerpaste_block_drop||c(g,h,f,b)},j=function(){b(g,f)};e.Env.ie&&e.Env.ie<10?j():i();var k=function(a){g.dom.bind(a,"drop dragstart dragend dragover dragenter dragleave dragdrop draggesture",function(a){return e.dom.Event.cancel(a)})};g.settings.powerpaste_block_drop&&g.on("init",function(a){k(g.getBody()),k(g.getDoc())}),g.settings.paste_postprocess&&g.on("PastePostProcess",function(a){g.settings.paste_postprocess.call(this,this,a)})}}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),function(a,b,c){a("ephox.powerpaste.PowerPastePlugin",["ephox.powerpaste.tinymce.TinyPowerPaste","global!tinymce"],function(a,b){return function(c){b.PluginManager.requireLangPack("powerpaste","ar,ca,cs,da,de,el,es,fa,fi,fr_FR,he_IL,hr,hu_HU,it,ja,kk,ko_KR,nb_NO,nl,pl,pt_BR,pt_PT,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,zh_CN,zh_TW"),b.PluginManager.add("powerpaste",a(c))}})}(h.bolt.module.api.define,h.bolt.module.api.require,h.bolt.module.api.demand),f("ephox.powerpaste.PowerPastePlugin")(),this.ephox&&this.ephox.bolt&&(this.ephox.bolt=a)}();