{"version":3,"sources":["library.js","navigation.js","pages.js","property.js","pss-theme.js","subscribers.js","theme-defaults.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"custom-theme.js","sourcesContent":["$(document).ready(function(){\n\n\t// Error flag\n\tvar error_occurred = false;\n\n\t// Find the list of items\n\tvar media_files = $(\"#media-file-list\");\n\n\tvar total_files = media_files.attr('data-total');\n\tvar page_limit = media_files.attr('data-limit');\n\n\tvar pagination_button = $(\"ul.pagination li a:first\").parent()\n\tvar pagination_wrapper = $( \"#pagination-wrapper\" );\n\n\tvar modal_mode = $(\"#library-container\").hasClass('modal-mode');\n\tvar public_folder_uri = $(\"#library-container\").attr('data-image-uri');\n\tvar initiator = $(\"#library-container\").attr('data-initiator');\n\n\t// Get a template\n\tvar media_file_template = media_files.find(\".media-file-item-template\").remove().clone().removeClass('media-file-item-template').addClass('media-file-item').hide();\n\n\t// Initiate the dropzone\n\t$.getScript( \"https://cdnjs.cloudflare.com/ajax/libs/dropzone/4.3.0/min/dropzone.min.js\", function(){\n\n\t\tvar dropzone_options = {\n\t\t\tparamName: \"file\", // The name that will be used to transfer the file\n\t\t\tmaxFilesize: $( \"form#upload-area\" ).attr('data-max-size'), // MB\n\t\t\tcreateImageThumbnails: true,\n\t\t\tmaxFiles: 4,\n\t\t\tdictDefaultMessage: 'Drop / select your files here to upload them (maximum 4 files).',\n\t\t\tparamName: 'uploaded_file',\n\t\t\tinit: function(){\n\t\t\t\tthis.on( \"error\", function( File, errorMessage ){\n\t\t\t\t\terror_occurred = true;\n\t\t\t\t\tif( errorMessage.uploaded_file !== undefined )\n\t\t\t\t\t\t$( \"#upload-error-alert\" ).show().find(\"p\").text(errorMessage.uploaded_file).delay(10000).fadeOut();\n\t\t\t\t\telse\n\t\t\t\t\t\t$( \"#upload-error-alert\" ).show().find(\"p\").text(errorMessage).delay(10000).fadeOut();\n\t\t\t\t\tthis.removeAllFiles();\n\t\t\t\t});\n\t\t\t\tthis.on( \"success\", function( File, data ){\n\t\t\t\t\tvar new_media = media_file_template.clone();\n\t\t\t\t\tnew_media.find(\"img\").attr('src', data.thumbnail_url).attr('alt', data.media_file.alt).addClass('thumbnail-image');\n\t\t\t\t\tnew_media.find(\"a\").attr('href', data.edit_url);\n\t\t\t\t\tnew_media.find(\".media-file-title > a\").after(data.media_file.title);\n\t\t\t\t\tnew_media.find(\".media-file-caption > a\").after(data.media_file.caption);\n\t\t\t\t\tnew_media.attr('data-desktop-size', data.media_file.desktop_path);\n\t\t\t\t\tnew_media.attr('data-tablet-size', data.media_file.tablet_path);\n\t\t\t\t\tnew_media.attr('data-mobile-size', data.media_file.mobile_path);\n\t\t\t\t\tnew_media.attr('data-original-size', data.media_file.path);\n\t\t\t\t\tnew_media.attr('data-forced-thumbnail-url', data.media_file.thumbnail_path);\n\t\t\t\t\tnew_media.attr('data-title', data.media_file.title);\n\t\t\t\t\tnew_media.attr('data-id', data.media_file.id);\n\t\t\t\t\tnew_media.attr('data-alt', '');\n\n\t\t\t\t\t// If list is longer than the pagination limit, remove the end one and append new one\n\t\t\t\t\tif( $(\"#media-file-list\").find( \".media-file-item\" ).length > page_limit-1 )\n\t\t\t\t\t\t$(\"#media-file-list\").find( \".media-file-item:last\" ).remove();\n\t\t\t\t\t\n\t\t\t\t\t// Prepend new one\n\t\t\t\t\tmedia_files.prepend( new_media.show() );\n\n\t\t\t\t\t// If in grid view, set to show as inline-block not block;\n\t\t\t\t\tif( new_media.hasClass('col-md-3') ) new_media.css( 'display', 'inline-block' );\n\n\t\t\t\t\t// Add one to total files\n\t\t\t\t\ttotal_files++;\n\n\t\t\t\t\t// If need new page on paginator, add it\n\t\t\t\t\tvar new_no_pages = Math.ceil( total_files/page_limit);\n\t\t\t\t\tif( $( \"ul.pagination\" ).length > 0 && new_no_pages > ($( \"ul.pagination li\" ).length - 2) )\n\t\t\t\t\t{\n\t\t\t\t\t\t// Clone an existing li\n\t\t\t\t\t\tvar new_page = pagination_button.clone();\n\t\t\t\t\t\t// Change URL and text of li element\n\t\t\t\t\t\tnew_page.find(\"a\").attr('href', new_page.find(\"a\").attr('href').replace(/([^?]+\\?page\\=)(\\d)/, '$1' + new_no_pages ) ).text(new_no_pages);\n\t\t\t\t\t\t// Add new page\n\t\t\t\t\t\t$(\"ul.pagination li\").eq($(\"ul.pagination li\").length-2).after(new_page);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// No paginator, but we need one\n\t\t\t\t\t\tif( $( \"ul.pagination\" ).length == 0 && new_no_pages > 1 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar pagination_template = $( \"<ul class=\\\"pagination\\\"><li class=\\\"disabled\\\"><span>«</span></li><li class=\\\"active\\\"><span>1</span></li><li><a href=\\\"http://pss.dev/dashboard/media?view=\" + pagination_wrapper.attr('data-view') + \"&amp;page=2\\\">2</a></li><li><a href=\\\"http://pss.dev/dashboard/media?view=\" + pagination_wrapper.attr('data-view') + \"&amp;page=2\\\" rel=\\\"next\\\">»</a></li></ul>\" );\n\t\t\t\t\t\t\tpagination_wrapper.append(pagination_template);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t\tthis.on( \"queuecomplete\", function(){\n\t\t\t\t\tif( !error_occurred )\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#upload-complete-alert\").fadeIn().delay(10000).fadeOut();\n\t\t\t\t\t\tthis.removeAllFiles();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.on( \"sendingmultiple\", function(){\n\t\t\t\t\terror_occurred = false;\n\t\t\t\t\t$(\"#upload-complete-alert, #upload-error-alert\").fadeOut();\n\t\t\t\t})\n\t\t\t},\n\t\t};\n\n\t\t// Settings for the dropzone\n\t\tDropzone.options.uploadArea = dropzone_options;\n\n\t\t// Initiate if from modal\n\t\tif( !$(\"#upload-area\").hasClass(\"dz-clickable\") )\n\t\t\t$(\"#upload-area\").dropzone(dropzone_options);\n\t});\n\n\t/**\n\t* Handler bulk-action methods\n\t*/\n\tvar bulk_action_panel = $(\"#bulk-actions\");\n\t$(document).on(\"click\", \".media-file-item .fancy-checkbox\", function(){\n\t\t\n\t\t// Count the number of selected checkboxes\n\t\tvar checkbox_count = $(\".media-file-item .fancy-checkbox input:checked\").length;\n\n\t\tif( checkbox_count > 0)\n\t\t\tbulk_action_panel.slideDown();\n\t\telse\n\t\t\tbulk_action_panel.slideUp();\n\n\n\t\t// On bulk action \"Go\" button pressed\n\t\tbulk_action_panel.on(\"click\", \"#perform-action\", function(){\n\n\t\t\t// If not proccess, then process\n\t\t\tif( $(this).text() == 'Go')\n\t\t\t{\n\t\t\t\t$(this).text(\"Processing...\");\n\n\t\t\t\tvar checked_checkboxes = $(\".media-file-item .fancy-checkbox input:checked\");\n\n\t\t\t\tif( checked_checkboxes.length == 0 )\n\t\t\t\t\tshowModal( \"Bulk Action\", \"No media files were selected\");\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Setup array of media file IDs\n\t\t\t\t\tvar media_file_ids = [];\n\n\t\t\t\t\t// Loop through the checked ones and get their ID\n\t\t\t\t\tchecked_checkboxes.each(function(){\n\t\t\t\t\t\tmedia_file_ids.push( $(this).parents(\".media-file-item\").attr('data-id') );\n\t\t\t\t\t});\n\n\t\t\t\t\t// Get option selected (the action)\n\t\t\t\t\tvar option_selected = $(this).prev(\"select\").find(\"option:selected\");\n\t\t\t\t\tvar csrf_token = option_selected.parent().attr('data-token');\n\n\t\t\t\t\t// Make post request\n\t\t\t\t\t$.post( option_selected.attr('data-action-url'), {\n\t\t\t\t\t\t'_token': csrf_token,\n\t\t\t\t\t\t'medias_file_ids': JSON.stringify(media_file_ids),\n\t\t\t\t\t}, function(response){\n\n\t\t\t\t\t\t// Reset action button\n\t\t\t\t\t\t$(\"#perform-action\").text(\"Go\");\n\n\t\t\t\t\t\t// If deleted, remove files that were deleted\n\t\t\t\t\t\tif( option_selected.attr('id') == 'delete' )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Loop through the items deleted\n\t\t\t\t\t\t\tresponse.completed_deletes.forEach(function(id){\n\t\t\t\t\t\t\t\t$(\".media-file-item[data-id='\" + id + \"']\").slideUp('fast', function(){\n\t\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If success\n\t\t\t\t\t\tif( response.success !== undefined ) {\n\n\t\t\t\t\t\t\tif( option_selected.attr('id') != 'delete' ) {\n\t\t\t\t\t\t\t\t// Show success modal\n\t\t\t\t\t\t\t\tvar modal = showModal(\"Success\", \"Successfully ran action, reloading page...\").find(\".close-btn\").hide();\n\n\t\t\t\t\t\t\t\t// Reload page after 3 seconds\n\t\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If failed\n\t\t\t\t\t\tif( response.error !== undefined )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Show modal for failure\n\t\t\t\t\t\t\tshowModal(\"Something went wrong!\", response.messages);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, 'json');\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t})\n\n\t/**\n\t* Handle modal mode\n\t*/\n\tif( modal_mode ) {\n\n\t\t// Get list of media items\n\t\tvar media_file_items = media_files.find(\".media-file-item\");\n\n\t\t// When clicked on\n\t\t$(document).on(\"click\", \".media-file-item\", function(e){\n\n\t\t\te.preventDefault();\n\n\t\t\t// Get item in question\n\t\t\tvar this_item = $(this);\n\n\t\t\t// If the initiator is tinymce, continue to select size\n\t\t\tif( initiator == 'tinymce' )\n\t\t\t{\n\t\t\t\t// Create a new modal instance\n\t\t\t\tvar modal_template = $(\"<div class='modal-wrapper'><div class='modal'><h3>Title</h3><span class='fa fa-times close-btn'></span></div><div class='modal-bg'></div></div>\");\n\n\t\t\t\t// Adjust modal appearance\n\t\t\t\tmodal_template.find(\"h3\").text(\"Which size?\").after(\"<span class='option size-desktop'>Desktop</span><span class='option size-tablet'>Tablet</span><span class='option size-mobile'>Mobile</span><span class='option size-thumbnail'>Thumbnail</span><span class='option size-original'>Original</span>\");\n\n\t\t\t\t// Remove unavailable sizes\n\t\t\t\tif( this_item.attr('data-desktop-size') == '' )\n\t\t\t\t\tmodal_template.find(\".size-desktop\").remove();\n\n\t\t\t\tif( this_item.attr('data-tablet-size') == '' )\n\t\t\t\t\tmodal_template.find(\".size-tablet\").remove();\n\n\t\t\t\tif( this_item.attr('data-mobile-size') == '' )\n\t\t\t\t\tmodal_template.find(\".size-mobile\").remove();\n\n\t\t\t\tif( this_item.attr('data-thumbnail-size') == '' )\n\t\t\t\t\tmodal_template.find(\".size-thumbnail\").remove();\n\n\t\t\t\tif( this_item.attr('data-original-size') == '' )\n\t\t\t\t\tmodal_template.find(\".size-original\").remove();\n\n\t\t\t\t// When size selected, return URL\n\t\t\t\tmodal_template.on(\"click\", \".option\", function(e){\n\n\t\t\t\t\t// Get the size to return\n\t\t\t\t\tvar size_selected = $(this).attr('class').replace(/(option\\ssize\\-)(\\w+)/, '$2');\n\n\t\t\t\t\t// Call pareent window function to inject into WYSIWYG\n\t\t\t\t\tvar data_to_parse = {\n\t\t\t\t\t\turl: public_folder_uri + this_item.attr('data-' + size_selected + '-size'),\n\t\t\t\t\t\talt: this_item.attr('data-alt'),\n\t\t\t\t\t\ttitle: this_item.attr('data-title'),\n\t\t\t\t\t\tid: this_item.attr('data-id'),\n\t\t\t\t\t\tthumbnail_url: public_folder_uri + this_item.attr('data-forced-thumbnail-url')\n\t\t\t\t\t};\n\n\t\t\t\t\twindow.top.mediaPopupCallback($(\"#library-container\").attr('data-field-id'), JSON.stringify(data_to_parse));\n\n\t\t\t\t});\n\t\t\t}\n\t\t\tif( initiator == 'file_selector' )\n\t\t\t{\n\t\t\t\tvar data_to_parse = {\n\t\t\t\t\talt: this_item.attr('data-alt'),\n\t\t\t\t\ttitle: this_item.attr('data-title'),\n\t\t\t\t\tid: this_item.attr('data-id'),\n\t\t\t\t\tthumbnail_url: public_folder_uri + this_item.attr('data-forced-thumbnail-url')\n\t\t\t\t};\n\n\t\t\t\twindow.top.mediaPopupCallback($(\"#library-container\").attr('data-field-id'), JSON.stringify(data_to_parse));\n\t\t\t}\n\n\t\t\t// Append to page\n\t\t\t$(\"body\").append(modal_template);\n\t\t});\n\t}\n\n});","$(document).ready(function(){\n\n\t// On navigation page\n\tif($(\"#navigation-index\").length > 0)\n\t{\n\t\tvar nav_hidden_data = $(\"#nav-data\");\n\n\t\t// Get a clone of the templsate to use\n\t\tvar nav_list = $(\"#nav-item-list\");\n\t\tvar nav_item_template = $(\".nav-item.template\").remove().clone().show();\n\n\t\t// Set up modal form\n\t\tvar modal_form = modal_template.clone();\n\t\tvar form = $(\"#new-nav-form\").remove().clone().show();\n\t\tmodal_form.find(\"h3\").text(\"Navigation Item Properties\").after(\"<div class='message'></div>\");\n\t\tmodal_form.find(\".message\").append(form.clone());\n\t\tmodal_form.find(\".modal\").css('max-width', '900px');\n\n\t\tvar active_popup;\n\n\t\t// When new button clicked\n\t\t$(\"#navigation-index\").on(\"click\", \".new-nav\", function(){\n\t\t\t\n\t\t\t// Get parent list (ul) new nav item\n\t\t\tvar this_btn_instance = $(this);\n\n\t\t\t// Show the edit modal\n\t\t\tactive_popup = showEditModal(this_btn_instance);\n\t\t});\n\n\n\t\t// When delete button clicked\n\t\t$(\"#navigation-index\").on(\"click\", \".nav-item-delete\", function(){\n\t\t\t$(this).parents(\"li\").remove();\n\t\t\tsetupSortableLists();\n\t\t});\n\n\t\t// When edit button is clicked\n\t\t$(\"#navigation-index\").on(\"click\", \".nav-item-edit\", function(){\n\t\t\tactive_popup = showEditModal($(this).parents(\"li\"), false);\n\t\t\tsetupSortableLists();\n\t\t});\n\n\t\t/**\n\t\t* Shows the edit/create popup modal\n\t\t*/\n\t\tfunction showEditModal(item = null, is_new = true){\n\t\t\t\n\t\t\t// Show modal\n\t\t\tvar new_modal = modal_form.clone();\n\t\t\t$(\"body\").append(new_modal);\n\n\t\t\t// Prepoulate the modal values if item has them\n\t\t\tnew_modal.find(\"#label\").val(item.attr('data-label'));\n\t\t\tnew_modal.find(\"#url\").val(item.attr('data-url'));\n\t\t\tnew_modal.find(\"#css-styling\").val(item.attr('data-css-styling'));\n\t\t\tnew_modal.find(\"#css-class\").val(item.attr('data-css-class'));\n\t\t\tnew_modal.find(\"#new-window option[value='\" + item.attr('data-new-window') + \"']\").prop(\"selected\", true);\n\n\t\t\t// If not new, change \"create\" to \"update\"\n\t\t\tif( !is_new )\n\t\t\t\tnew_modal.find(\".nav-form-create\").text(\"Update\");\n\n\t\t\t// Add modal events\n\t\t\tnew_modal.on(\"click\", \".nav-form-create\", function(e){\n\n\t\t\t\t// Get form values\n\t\t\t\tvar label = new_modal.find(\"#label\").val();\n\t\t\t\tvar url = new_modal.find(\"#url\").val();\n\t\t\t\tvar css_styling = new_modal.find(\"#css-styling\").val();\n\t\t\t\tvar css_class = new_modal.find(\"#css-class\").val();\n\t\t\t\tvar new_window  = new_modal.find(\"#new-window option:selected\").val();\n\n\t\t\t\t// Set modal errors blank again\n\t\t\t\tnew_modal.find(\"#errors\").html('').hide();\n\n\t\t\t\t/* Validate */\n\t\t\t\tvar errors = [];\n\n\t\t\t\t// Ensure label and URL is populated\n\t\t\t\tif( ( label == '' || label == undefined || label == null ) || ( url == '' || url == undefined || url == null ) )\n\t\t\t\t\terrors.push(\"We require that you provide a label and url\");\n\n\t\t\t\t// Check valid URL\n\t\t\t\turl_regex = /^((https?:\\/\\/)?([\\w\\d-_]+)\\.([\\w\\d-_\\.]+)\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)|((?:\\/?\\w)+)|(?:\\/))/;\n\t\t\t\tif( ( url == '' || url == undefined || url == null ) || !( url_regex.test(url) || url == '#' ) )\n\t\t\t\t\terrors.push(\"Please provide a valid URL\");\n\n\t\t\t\t// If errors\n\t\t\t\tif( errors.length > 0)\n\t\t\t\t\terrors.forEach(function(error){\n\t\t\t\t\t\tnew_modal.find(\"#errors\").show().append(\"<li>\"+error+\"</li>\");\n\t\t\t\t\t});\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Clone nav item template and populate\n\t\t\t\t\tvar new_item = nav_item_template.clone().removeClass('template');\n\t\t\t\t\t\n\t\t\t\t\t// Set label\n\t\t\t\t\tnew_item.find(\"> span i:first\").before(\"<span class='link-preview'>\"+label+\"</span>\");\n\n\t\t\t\t\t// Add link preview css class if given\n\t\t\t\t\tnew_item.find(\".link-preview\").addClass(css_class);\n\n\t\t\t\t\t// Add styling if exists to previe\n\t\t\t\t\tif( css_styling !== '' && css_styling !== undefined && css_styling.length > 0)\n\t\t\t\t\t\tnew_item.append(\"<style>\"+css_styling+\"</style>\");\n\t\t\t\t\t// Set data\n\t\t\t\t\tnew_item.attr('data-label', label).attr('data-url', url).attr('title', 'Goes to: '+url).attr('data-css-styling', css_styling).attr('data-css-class', css_class).attr('data-new-window', new_window);\n\t\t\t\t\t\n\n\t\t\t\t\t// If is new, add before the \"new item\" li element that was clicked\n\t\t\t\t\tif( is_new )\n\t\t\t\t\t\t// Add to list\n\t\t\t\t\t\titem.before(new_item);\n\n\t\t\t\t\t// Otherwisde replace the one we are editing\n\t\t\t\t\telse\n\t\t\t\t\t\titem.replaceWith(new_item);\n\n\t\t\t\t\t// Hide modal\n\t\t\t\t\tnew_modal.fadeOut('fast', function(){ $(this).remove(); });\n\t\t\t\t\t// Setup sortable\n\t\t\t\t\tsetupSortableLists();\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tnew_modal.on(\"click\", \".nav-form-cancel\", function(){\n\t\t\t\t// Hide modal\n\t\t\t\tnew_modal.fadeOut('fast', function(){ $(this).remove(); });\n\t\t\t});\n\n\t\t\treturn new_modal;\n\t\t}\n\n\t\t/**\n\t\t* Setsa up the sortable lists for the nav menus\n\t\t*/\n\t\tfunction setupSortableLists(){\n\n\t\t\tvar horizontal_attrs = {\n\t\t\t\taxis: 'x',\n\t\t\t\titems: \"> li.nav-item\",\n\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\thelper: \"clone\"\n\t\t\t};\n\n\t\t\tvar vertical_attrs = {\n\t\t\t\taxis: 'y',\n\t\t\t\titems: \"> li.nav-item\",\n\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\thelper: \"clone\",\n\t\t\t\tstart: function(event, ui){\n\t\t\t\t\tvar max_width = 0;\n\t\t\t\t\tui.item.parent().find(\"li\").each(function(index, element){\n\t\t\t\t\t\tif( $(element).outerWidth() > max_width )\n\t\t\t\t\t\t\tmax_width = $(element).outerWidth();\n\t\t\t\t\t});\n\t\t\t\t\tui.placeholder.css('width', max_width);\n\t\t\t\t}\n\t\t\t};\n\n\n\t\t\t// Make header menu sortable\n\t\t\tif( $(\"#header-nav-item-list > li\").length > 2 )\n\t\t\t\t$(\"#header-nav-item-list\").sortable(horizontal_attrs);\n\n\t\t\t// Make header schildren lists sortable\n\t\t\t$(\"#header-nav-item-list ul.children\").each(function(index, el){\n\t\t\t\tif( $(el).find(\">li\").length > 2 )\n\t\t\t\t\t$(el).sortable(vertical_attrs);\n\t\t\t});\n\n\t\t\tif( $(\"#footer-nav-item-list > li\").length > 2 )\n\t\t\t\t// Make footer/useful-links menu sortable\n\t\t\t\t$(\"#footer-nav-item-list\").sortable(vertical_attrs);\n\n\t\t}\n\t\t// Do on page load also\n\t\tsetupSortableLists();\n\n\t\t/**\n\t\t* Updates the hidden field containing serialised data of the menus\n\t\t*/\n\t\t$(\"#nav-form\").on(\"submit\", function(e){\n\n\t\t\t// Serialise header\n\t\t\theader_data = [];\n\t\t\t$(\"#header-nav-item-list > li.nav-item\").each(function(index, element){\n\t\t\t\t// Create porperties object\n\t\t\t\tvar item_props = {\n\t\t\t\t\t'label' : $(element).attr('data-label'),\n\t\t\t\t\t'url' : $(element).attr('data-url'),\n\t\t\t\t\t'css_styling' : $(element).attr('data-css-styling'),\n\t\t\t\t\t'css_class' : $(element).attr('data-css-class'),\n\t\t\t\t\t'new_window' : $(element).attr('data-new-window'),\n\t\t\t\t\t'sort_order' : index,\n\t\t\t\t\t'children' : [],\n\t\t\t\t}\n\n\t\t\t\t// If this item has any children add them.\n\t\t\t\tif( $(element).find(\"ul.children > li.nav-item\").length > 0 )\n\t\t\t\t{\n\t\t\t\t\t// COnstruct properties for child\n\t\t\t\t\t$(element).find(\"ul.children > li.nav-item\").each(function(index2, element2){\n\n\t\t\t\t\t\t// Add to parent's property, \"children\"\n\t\t\t\t\t\titem_props.children.push({\n\t\t\t\t\t\t\t'label' : $(element2).attr('data-label'),\n\t\t\t\t\t\t\t'url' : $(element2).attr('data-url'),\n\t\t\t\t\t\t\t'css_styling' : $(element2).attr('data-css-styling'),\n\t\t\t\t\t\t\t'css_class' : $(element2).attr('data-css-class'),\n\t\t\t\t\t\t\t'new_window' : $(element2).attr('data-new-window'),\n\t\t\t\t\t\t\t'sort_order' : index2,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Add to main data array\n\t\t\t\theader_data.push(item_props);\n\t\t\t});\n\n\t\t\t// Serialise footer\n\t\t\tfooter_data = [];\n\t\t\t$(\"#footer-nav-item-list > li.nav-item\").each(function(index, element){\n\t\t\t\t// Create porperties object\n\t\t\t\tfooter_data.push({\n\t\t\t\t\t'label' : $(element).attr('data-label'),\n\t\t\t\t\t'url' : $(element).attr('data-url'),\n\t\t\t\t\t'css_styling' : $(element).attr('data-css-styling'),\n\t\t\t\t\t'css_class' : $(element).attr('data-css-class'),\n\t\t\t\t\t'new_window' : $(element).attr('data-new-window'),\n\t\t\t\t\t'sort_order' : index,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t\n\t\t\t// Store in hidden field\n\t\t\tnav_hidden_data.val(JSON.stringify({\n\t\t\t\t'header' : header_data,\n\t\t\t\t'footer' : footer_data,\n\t\t\t}));\n\n\t\t});\n\n\t\t// Get URL browser lookup data\n\t\tvar url_browser_modal = $(\"#url-browser-modal\").remove().clone();\n\t\tvar url_selector = url_browser_modal.find(\"#urls-selector\");\n\t\tvar lookup_button = $(\"#url-browser\");\n\t\tvar lookup_data = url_browser_modal.find(\"#lookup-data\");\n\t\tvar type_selector = url_browser_modal.find(\"select#type\");\n\n\t\t// On Close, clear the URL selector\n\t\turl_browser_modal.on(\"click\", \".close-btn\", function(){\n\t\t\turl_selector.val('');\n\t\t});\n\n\t\t// Disable selector options that are not available\n\t\ttype_selector.find(\"option:not(:first)\").each(function(index, element){\n\t\t\tif( lookup_data.find(\"option[data-type='\" + $(element).val() + \"']\").length == 0 )\n\t\t\t\t$(element).remove();\n\t\t});\n\n\t\t// Deal with browse URL button\n\t\t$(document).on(\"click\", \"#url-browser\", function(){\n\n\t\t\t// Show modal\n\t\t\t$(\"body\").append(url_browser_modal.fadeIn());\n\t\t\t\n\t\t});\n\n\t\t// When the type selector changes\n\t\t$(document).on(\"change\", \"#url-browser-modal select#type\", function(){\n\t\t\tsortData();\n\t\t});\n\n\t\t// When option selected\n\t\t$(document).on(\"input\", \"#urls-selector\", function(e){\n\t\t\tvar found_option = lookup_data.find(\"option[value='\"+ url_selector.val() + \"']\");\n\t\t\t\n\t\t\tif( found_option.length > 0 ){\n\t\t\t\tactive_popup.find(\"input#url\").val(found_option.attr('data-url'));\n\t\t\t\t$(this).val('');\n\t\t\t\t$(this).parents(\".modal-wrapper\").find(\".close-btn\").trigger(\"click\");\n\t\t\t}\n\t\t});\n\n\t\t// Filters the lookup data\n\t\tfunction sortData(){\n\n\t\t\t// Get type to fetch\n\t\t\tvar type = type_selector.find(\"option:selected\").val();\n\t\t\tlookup_data.find(\"option\").prop('disabled', false);\n\n\t\t\tif(type == 'media'){\n\t\t\t\tlookup_data.find(\"option[data-type!='media']\").prop('disabled', true);\n\t\t\t}\n\t\t\tif(type == 'pages'){\n\t\t\t\tlookup_data.find(\"option[data-type!='pages']\").prop('disabled', true);\n\t\t\t}\n\t\t\tif(type == 'properties'){\n\t\t\t\tlookup_data.find(\"option[data-type!='properties']\").prop('disabled', true);\n\t\t\t}\n\n\t\t\turl_selector.val('');\n\t\t}\n\t}\n})","$(document).ready(function(){\n\n\tvar page_form = $(\"body[id^='pages-new'], body[id^='pages-edit']\" );\n\t// If on page form\n\tif( page_form.length > 0 ){\n\n\t\tvar slug = page_form.find(\"form input[name='page[slug]']\");\n\t\tvar parent_slug = page_form.find(\"form span#parent-slug\");\n\t\tvar slug_edit = page_form.find(\"form input#slug\");\n\n\t\t// On parent select, update the parent slug field\n\t\tpage_form.on(\"change keyup keydown paste\", \"select#parent, input#slug\", function(){\n\t\t\tfixSlugs();\n\t\t});\n\n\t\t// Run on document ready\n\t\tfixSlugsOnReady();\n\n\t\tfunction fixSlugs(){\n\n\t\t\t// Get slug of selected parent\n\t\t\tvar this_slug= page_form.find(\"form select#parent option:selected\").attr('data-slug');\n\n\t\t\t// If not defined\n\t\t\tthis_slug = ( this_slug !== undefined )? this_slug + \"/\" : \"\";\n\n\t\t\t// Set the parent slug to this value (append /)\n\t\t\tparent_slug.text(this_slug);\n\n\t\t\t// Set the hidden actua slug field to the parent slufg plus the provided page slug\n\t\t\tslug.val( this_slug + slug_edit.val() );\n\n\t\t\tconsole.log(slug.val());\n\t\t}\n\n\t\tfunction fixSlugsOnReady(){\n\n\t\t\t// Get slug of selected parent\n\t\t\tvar this_slug= page_form.find(\"form select#parent option:selected\").attr('data-slug');\n\n\t\t\t// If not defined\n\t\t\tthis_slug = ( this_slug !== undefined )? this_slug + \"/\" : \"\";\n\n\t\t\t// Set the parent slug to this value (append /)\n\t\t\tparent_slug.text(this_slug);\n\n\t\t\tslug_edit.val(slug.val().replace(this_slug, \"\"));\n\t\t}\n\n\t}\n\n});","$(document).ready(function(){\n\n\t// If on property page..\n\tif( $(\"body[id^='properties-']\").length > 0 )\n\t{\n\t\t// Setup tags plugin\n\t\t$(\"#tags\").tagsInput({\n   \t\t\t'height':'80px',\n   \t\t\t'width': '100%',\n   \t\t\t'defaultText': '',\n\t\t});\n\n\t\t// Make sure reference code is all caps\n\t\t$(\"#reference-code\").on(\"keyup change paste\", function(){\n\t\t\t$(this).val( $(this).val().toUpperCase() );\n\t\t});\n\n\n\t\t// Files' form\n\t\tif( $(\"body\").attr('id') == 'properties-files' )\n\t\t{\n\t\t\t// Get a copy of the file selector template\n\t\t\tvar file_selector_template = $(\"#file-template\").remove().clone().removeAttr('id');\n\n\t\t\t// Files containers\n\t\t\tvar images_container = $(\"#property-images\");\n\t\t\tvar documents_container = $(\"#property-documents\");\n\n\t\t\t// New image button\n\t\t\tvar new_image_btn = $(\"#add-image\");\n\t\t\tvar new_document_btn = $(\"#add-document\");\n\n\t\t\t// On new image click\n\t\t\tnew_image_btn.on(\"click\", function(){\n\t\t\t\tnewFileSelector(images_container);\n\t\t\t});\n\n\t\t\t// On Delete btn\n\t\t\t$(\"body\").on('click', '.file-selector-wrapper .delete-btn', function(){\n\n\t\t\t\tif( confirm( \"Are you sure you'd like to remove this file?\" )) {\n\t\t\t\t\t$(this).parents('.col-md-3').remove();\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t// On new document click\n\t\t\tnew_document_btn.on(\"click\", function(){\n\t\t\t\tnewFileSelector(documents_container);\n\t\t\t});\n\n\t\t\t// Create new file selector\n\t\t\tfunction newFileSelector(container){\n\n\t\t\t\t// New instance of template\n\t\t\t\tvar new_file_selector = file_selector_template.clone();\n\n\t\t\t\t// Adjust height to match others\n\t\t\t\tnew_file_selector.find(\".file-selector-wrapper\").css('height', getTallestSelectorHeight(images_container));\n\n\t\t\t\t// Change attributes of selector to prevent ID conflicts\n\t\t\t\tnew_file_selector.find(\"input\").attr('id', 'file-selector-' + ( parseInt($(\".file-selector-wrapper\").length) + 1));\n\n\t\t\t\t// If image container, set mime_type to image\n\t\t\t\tif( container.attr('id') == 'property-images' ) {\n\t\t\t\t\tnew_file_selector.find(\".file-selector-label\").attr('data-mime', 'image');\n\t\t\t\t\tnew_file_selector.find(\"input\").attr('name', 'images[]');\n\t\t\t\t}\n\n\t\t\t\t// Else, leave as anything\n\t\t\t\telse {\n\t\t\t\t\tnew_file_selector.find(\".file-selector-label\").attr('data-mime', '');\n\t\t\t\t\tnew_file_selector.find(\"input\").attr('name', 'documents[]');\n\t\t\t\t}\n\n\t\t\t\t// Append to container\n\t\t\t\tcontainer.append(new_file_selector);\n\n\t\t\t\t// \n\t\t\t\tnew_file_selector.find(\".file-selector-label\").trigger(\"click\");\n\t\t\t}\n\n\t\t\t// Get tallest height\n\t\t\tfunction getTallestSelectorHeight(container){\n\n\t\t\t\t// Set height low!\n\t\t\t\tvar height = 0;\n\n\t\t\t\t// Loop through existing file selectors and see if their height is taller, if so, then override the value of height\n\t\t\t\tcontainer.find(\".file-selector-wrapper\").each(function(){\n\t\t\t\t\tif($(this).innerHeight() > height )\n\t\t\t\t\t\theight = $(this).innerHeight() + 4; // 4px added to compensate for border thickness\n\t\t\t\t});\n\n\t\t\t\treturn height;\n\t\t\t}\n\n\t\t}\n\t}\n});","var modal_template = $(\"<div class='modal-wrapper'><div class='modal'><h3>Title</h3><span class='fa fa-times close-btn'></span></div><div class='modal-bg'></div></div>\");\n\n$(document).ready(function(){\n\n    /**\n    * Animate counters\n    */\n    $(\".tile_count div.count\").each(function(element){\n        $(this).attr('count',0).animate({\n            count: $(this).text()\n        }, {\n            duration: 1000,\n            easing: 'swing',\n            step: function (now) {\n                $(this).text(Math.ceil(now));\n            }\n        });\n    });\n\n    /**\n    * Handle code editors\n    */\n    var editors = [];\n    $(\"textarea.code\").each(function(){\n        initialiseCodeEditor( $(this) );\n    });\n    function initialiseCodeEditor( this_el )\n    {\n\n        // Get syntax language\n        var language = ( this_el.attr( 'data-language' ) !== undefined && this_el.attr( 'data-language' ).length > 0 )? this_el.attr( 'data-language' ) : 'html';\n\n        // Should we show errors\n        var show_errors = ( this_el.attr( 'data-show-errors' ) !== undefined && this_el.attr( 'data-show-errors' ).length > 0 )? this_el.attr( 'data-show-errors' ) : 'false';\n        show_errors = ( show_errors == 'true' )? true : false;\n\n        // Hide the textarea\n        this_el.hide();\n\n        // Append editor after\n        this_el.after(\"<div class='code-container'></div>\");\n\n        // New editor instance\n        var editor = ace.edit( this_el.siblings(\".code-container\").get(0) );\n\n        editor.setTheme( 'ace/theme/github' );\n        editor.getSession().setMode( \"ace/mode/\" + language );\n        editor.getSession().setTabSize( 4 );\n        editor.getSession().setUseSoftTabs( true );\n        editor.getSession().setUseWrapMode( false );\n        editor.getSession().setUseWorker( show_errors );\n\n        editor.getSession().setValue( this_el.val() );\n        editor.getSession().on( 'change', function()\n        {\n          this_el.val( editor.getSession().getValue() );\n        });\n\n        editor.setShowPrintMargin(false);\n\n\n        editors.push( editor );\n    }\n\n    /**\n    * Handle slug generators\n    */\n    $(document).on(\"keyup paste change\", \"input[data-slug-generator]\", function(){\n\n        var this_el = $(this);\n        var placement_el = $(\"input[data-slug-placement='\" + $(this).attr('data-slug-generator') + \"']\");\n\n        // If placement found, do slug generation\n        if( placement_el.length > 0 )\n            placement_el.val( this_el.val().toLowerCase().replace(/\\s+/g, '-').replace(/[^\\w\\-]+/g, '').replace(/\\-\\-+/g, '-').replace(/^-+/, '').replace(/-+$/, '') ).trigger(\"change\");\n\n    });\n    \n    // If lost focus on slug, ensure it's in okay format\n    $(document).on(\"blur\", \"input[data-slug-placement]\", function(){\n        $(this).val( $(this).val().toLowerCase().replace(/\\s+/g, '-').replace(/[^\\w\\-]+/g, '').replace(/\\-\\-+/g, '-').replace(/^-+/, '').replace(/-+$/, '') ).trigger(\"change\");\n    });\n\n    /**\n    * Handle delete button confirmation\n    */\n    $( \"a:contains('Delete')\" ).on( \"click\", function(e){\n        var delete_link = $(this);\n        var delete_link_url = delete_link.attr('href');\n\n\n        if( !delete_link.parent().hasClass(\"confirm-delete-wrapper\") )\n        {\n\n            var delete_confirm_wrapper = $(\"<div class='confirm-delete-wrapper inline-block'></div>\");\n            var delete_confirm_popup = $(\"<div class='confirm-delete-popup'></div>\");\n            var yes_link = delete_link.clone().text(\"Yes\").attr('href', '#').removeClass('btn-danger').addClass('btn-success delete-confirm').on(\"click\", function(event){\n                event.preventDefault();\n                if( delete_link.is(\"a\" ) )\n                    window.location = delete_link_url;\n                else\n                    delete_link.trigger(e);\n            });\n            var no_link = delete_link.clone().text(\"No\").attr('href', '#').addClass('delete-confirm').on(\"click\", function(ev){\n                ev.preventDefault();\n                delete_link.parent().find(\".confirm-delete-popup\").animate({\n                    'opacity' : 0,\n                    'margin-top' : -10,\n                }, 300, function(){\n                    $(this).remove();\n                    delete_link.unwrap().addClass('btn-danger').removeClass('btn-info').text(\"Delete\");\n                });\n            });\n            delete_link.attr('href', '#');\n            delete_link.text(\"Are you sure?\").removeClass(\"btn-danger\").addClass(\"btn-info\");\n            delete_link.wrap(delete_confirm_wrapper);\n            delete_confirm_popup.append(yes_link).append(no_link);\n            delete_link.after(delete_confirm_popup);\n            delete_confirm_popup.css({\n                'opacity' : 0,\n                'margin-top' : -10,\n                'margin-left' : (0 - (delete_confirm_popup.width()/2))\n            }).animate({\n                'opacity' : 1,\n                'margin-top' : 0,\n            }, 300);\n\n            e.preventDefault();\n        } else {\n            e.preventDefault();\n        }\n\n    });\n\n    /**\n    * Handle modal close button\n    */\n    $(document).on(\"click\", \".modal .fa-times.close-btn, .modal-bg\", function(){\n        $(this).parents(\".modal-wrapper\").fadeOut('fast', function(){\n            $(this).remove();\n        });\n    })\n\n    /**\n    * Handle flash messages modal\n    */\n    if($(\"#flash-messages-wrapper\").length > 0){\n        var flash_message_wrapper = $(\"#flash-messages-wrapper\");\n\n        // Set new timeout to auto-close the alert box\n        var flash_message_timeout = setTimeout(function(){\n            flash_message_wrapper.fadeOut('fast', function(){\n                flash_message_wrapper.remove()\n            });\n        }, 1000000);\n\n        // If box clicked, hide it also and clear timeout.\n        flash_message_wrapper.on(\"click\", \">div, *\", function(e){\n            // Clear timeout\n            clearTimeout( flash_message_timeout );\n            flash_message_wrapper.fadeOut('fast', function(){\n                flash_message_wrapper.remove();\n            });\n        });\n    }\n\n    /**\n    * Handle WYSIWYG Editors\n    */\n    tinymce.PluginManager.load('powerpaste', '/admin-theme/helpers/powerpaste.min.js');\n    tinymce.init({\n        selector: \".wysiwyg\",\n        content_css: \"/css/style.css\",\n        plugins: [\n            \"advlist autolink lists link image charmap print preview anchor autosave\",\n            \"searchreplace visualblocks code fullscreen textcolor colorpicker importcss\",\n            \"media table contextmenu powerpaste imagetools\",\n        ],\n        powerpaste_html_import: prompt,\n        powerpaste_word_import: prompt,\n        powerpaste_allow_local_images: true,\n        paste_data_images: true,\n        convert_urls: false,\n        importcss_append: true,\n        menu: {\n            file: {title: 'File', items: 'newdocument'},\n            edit: {title: 'Edit', items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'},\n            insert: {title: 'Insert', items: 'link image media | template hr'},\n            view: {title: 'View', items: 'visualaid fullscreen'},\n            format: {title: 'Format', items: 'bold italic underline strikethrough superscript subscript | formats | removeformat'},\n            table: {title: 'Table', items: 'inserttable tableprops deletetable | cell row column'},\n            tools: {title: 'Tools', items: 'spellchecker code'}\n        },\n        toolbar: \"undo redo | styleselect | bold italic underline strikethrough subscript superscript forecolor backcolor removeformat | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | fullscreen\",\n        imagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\n        file_browser_callback: mediaPopup\n    });\n\n    /**\n    * Bootstrap datepickers\n    */\n    $(\"input.datepicker\").datepicker({\n        format: 'yyyy-mm-dd'\n    });\n\n    /**\n    * File selectors\n    */\n    $(document).on(\"click\", \".file-selector-label\", function(){\n        \n        // Find input field for data to be parsed to\n        var input_field = $(this).next(\"input\");\n\n        // Get mime-type\n        mime_type = ( $(this).attr('data-mime') === 'undefined' )? '' : $(this).attr('data-mime');\n\n        // Open media file modal\n        mediaPopup(input_field.attr('id'), input_field.val(), mime_type, window, 'file_selector');\n    });\n\n    /**\n    * Invokes a media popup selector (for TinyMCE or File selector)\n    */\n    function mediaPopup(field, val, type, win, initiator='tinymce') {\n\n        // Mime types accepted based on type we're browsing for.\n        switch(type){\n            case 'image':\n                mimes_accepted = \"image\";\n                break;\n            case 'media':\n                mimes_accepted = \"video\";\n                break;\n            default:\n                mimes_accepted = \"*\";\n                break;\n        }\n\n        // Get URL for the library URL;\n        var media_library_url = $(\"meta[name='library-url']\").attr('content');\n\n        // Create a temporary hidden field to store data and append to body\n        var temp_input = $(\"<textarea style='display:none' id='tmp-\" + Math.random().toString(36).substring(4) + \"'>\" + val + \"</textarea>\");\n\n        // Set the initiator\n        temp_input.attr('data-initiator', initiator);\n\n        // Append to body\n        $(\"body\").append(temp_input);\n\n        // Create modal and adjust styling\n        var new_modal = modal_template.clone().css( {\n            'z-index': parseInt( $(\".mce-floatpanel\").css('z-index') )+1,\n        });\n        new_modal.addClass('media-modal').find(\".modal-bg\").css('background-color', 'rgba(255, 255, 255, 0.7');\n        new_modal.find(\".modal\").css('max-width', '100%');\n\n        // Create iframe to library and adjust properties\n        library_iframe = $(\"<iframe></iframe>\");\n        library_iframe.attr('frameborder', 0).attr('src', media_library_url + \"?view=list&modal=true&include_callback=true&initiator=\" + initiator + \"&mime_type=\" + mimes_accepted + \"&ref_id=\" + temp_input.attr('id')).css({\n            'width' : '100%',\n            'height' : parseInt($(window).innerHeight()) - 100,\n            'min-height' : 400,\n        });\n\n        // Deal with resizing of window\n        $(window).on(\"resize\", function(){\n            library_iframe.css({\n                'height' : parseInt($(window).innerHeight()) - 100,\n            });\n        })\n\n        // Append iframe to modal\n        new_modal.find(\".modal\").append(library_iframe);\n\n        new_modal.find(\".close-btn\").off(\"click\").on(\"click\", function(){\n            new_modal.fadeOut('fast', function(){\n                $(this).remove();\n                temp_input.remove();\n            })\n        });\n\n        $body.append(new_modal);\n\n        // When input value changes\n        temp_input.on(\"change\", function(){\n\n            // Get JSON data\n            var parsed_data = JSON.parse($(this).val());\n\n            // Get field to update\n            var field_updating = $(win.document.getElementById(field));\n\n            // Set value according to initiator\n            if( $(this).attr('data-initiator') == 'tinymce' )\n            {\n                field_updating.val(parsed_data.url);\n                field_updating.parents(\".mce-floatpanel\").find(\"label:contains(Image description)\").next(\"input\").val(parsed_data.alt);\n                temp_input.remove();\n            }\n            if( $(this).attr('data-initiator') == 'file_selector' )\n            {\n                field_updating.val( parsed_data.id );\n                field_updating.prev(\"label\").removeClass(\"btn-info\").addClass(\"btn-warning\").text(\"Change file\");\n                field_updating.parent().find(\".file-selector-preview\").attr('data-preview-url', parsed_data.thumbnail_url).attr('data-id', parsed_data.id).attr('data-title', parsed_data.alt).find(\"img\").attr('src', parsed_data.thumbnail_url).show();\n                field_updating.parent().find(\".file-selector-preview > .file-title\").text(parsed_data.title);\n            }\n        });\n    }\n\n    /**\n    * Fancy checkbox\n    */\n    $(document).on(\"click\", \".fancy-checkbox > label\", function(){\n        $(this).prev(\"input\").prop( \"checked\", function( i, val ) {\n          return !val;\n        });\n    });\n});\n\n/**\n* Easy modal display\n* Accepts a title and array/string of messages\n*/\nfunction showModal( title, messages = [], styling={}) {\n\n    // Clone modal template\n    var new_modal = modal_template.clone();\n\n    // If styling given\n    if( typeof styling == 'object' )\n        new_modal.find(\".modal\").css( styling );\n\n    // Add title\n    new_modal.find(\"h3\").text(title);\n\n    // Add messages\n    if( (typeof messages == 'string' && messages.length > 0) || typeof messages == 'object' )\n    {\n        if( typeof messages == 'string' )\n            new_modal.find(\".modal\").append($(\"<div class='message'>\" + messages + \"</div>\"));\n        else\n            new_modal.find(\".modal\").find('h3').after(messages);\n    }\n    else if( typeof messages == 'object' && messages.length > 0 ) {\n        messages.forEach(function (message){\n            new_modal.find(\".modal\").append($(\"<div class='message'>\" + message + \"</div>\"));\n        });\n    }\n\n    // Append to body\n    $(\"body\").append(new_modal);\n\n    // Return the new modal\n    return new_modal;\n}\n\n/**\n/* Callback form media popup\n* Must be outside $(document).ready to be read by iframe\n*/\nfunction mediaPopupCallback(field_id, value){\n    $(\"#\"+field_id).val(value).trigger(\"change\");\n    $(\".modal-wrapper.media-modal\").find(\".close-btn\").trigger(\"click\");\n}","$(document).ready(function(){\n\n\t// When on subscriptione export page\n\tif( $(\"#subscribers-export\").length > 0 )\n\t{\n\t\tvar preview_btn = $(\"input[type='submit'][value='Preview Results']\");\n\t\tvar export_btn = $(\"input[type='submit'][value='Export All']\");\n\t\tvar number_checkboxes_checked = $(\".filter-option .fancy-checkbox > input:checked\").length;\n\n\n\t\t$(\".fancy-checkbox > label\").on(\"click\", function(){\n\t\t\tvar checkbox = $(this).prev(\"input\");\n\t\t\tvar filter_option = $(this).parents(\".filter-option\");\n\n\t\t\t// If checkbox is going from unchecked to checked (will return false when checking)\n\t\t\tif( !checkbox.is(\":checked\") )\n\t\t\t{\n\t\t\t\t// Remove inactive status\n\t\t\t\tfilter_option.find(\".table-cell:not(:first)\").removeClass('inactive');\n\n\t\t\t\t// Enable any input,select\n\t\t\t\tfilter_option.find(\"input\").prop('disabled', false);\n\t\t\t\tfilter_option.find(\"select\").prop('disabled', false);\n\n\t\t\t\tnumber_checkboxes_checked++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Reset inactive status, and remove any input data\n\t\t\t\tfilter_option.find(\".table-cell:not(:first)\").addClass('inactive');\n\t\t\t\tfilter_option.find(\"input\").val('').prop('disabled', true);\n\t\t\t\tfilter_option.find(\"select\").prop('disabled', true);\n\n\t\t\t\tnumber_checkboxes_checked--;\n\t\t\t}\n\n\t\t\tsetButtonLabels();\n\t\t});\n\n\t\tsetButtonLabels();\n\n\t\tfunction setButtonLabels(){\n\t\t\t// If no checkboxes checked, then hide preview btn\n\t\t\tif( number_checkboxes_checked == 0 ){\n\t\t\t\tpreview_btn.hide();\n\t\t\t\texport_btn.val('Export All');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpreview_btn.show();\n\t\t\t\texport_btn.val('Export Filtered');\n\t\t\t}\n\t\t}\n\t}\n});","/**\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\n\n$current_url = window.location.href.split('#')[0].split('?')[0],\n$body = $('body'),\n$menu_toggle = $('#menu_toggle'),\n$sidebat_menu = $('#sidebar-menu'),\n$sidebar_footer = $('.sidebar-footer'),\n$left_col = $('.left_col'),\n$right_col = $('.right_col'),\n$nav_menu = $('.nav_menu'),\n$footer = $('footer');\n\n$(document).ready(function() {\n    // Sidebar\n    var setContentHeight = function () {\n        // reset height\n        $right_col.css('min-height', $(window).height());\n\n        var bodyHeight = $body.outerHeight(),\n            footerHeight = $body.hasClass('footer_fixed') ? -10 : $footer.height(),\n            leftColHeight = $left_col.eq(1).height() + $sidebar_footer.height(),\n            contentHeight = bodyHeight < leftColHeight ? leftColHeight : bodyHeight;\n\n        // normalize content\n        contentHeight -= $nav_menu.height() + footerHeight;\n\n        $right_col.css('min-height', contentHeight);\n    };\n\n    $sidebat_menu.find('a').on('click', function(ev) {\n        var $li = $(this).parent();\n\n        if ($li.is('.active')) {\n            $li.removeClass('active active-sm');\n            $('ul:first', $li).slideUp(function() {\n                setContentHeight();\n            });\n        } else {\n            // prevent closing menu if we are on child menu\n            if (!$li.parent().is('.child_menu')) {\n                $sidebat_menu.find('li').removeClass('active active-sm');\n                $sidebat_menu.find('li ul').slideUp();\n            }\n            \n            $li.addClass('active');\n\n            $('ul:first', $li).slideDown(function() {\n                setContentHeight();\n            });\n        }\n    });\n\n    // toggle small or large menu\n    $menu_toggle.on('click', function() {\n        if ($body.hasClass('nav-md')) {\n            $sidebat_menu.find('li.active ul').hide();\n            $sidebat_menu.find('li.active').addClass('active-sm').removeClass('active');\n        } else {\n            $sidebat_menu.find('li.active-sm ul').show();\n            $sidebat_menu.find('li.active-sm').addClass('active').removeClass('active-sm');\n        }\n\n        $body.toggleClass('nav-md nav-sm');\n\n        setContentHeight();\n    });\n\n    // check active menu\n    $sidebat_menu.find('a[href=\"' + $current_url + '\"]').parent('li').addClass('current-page');\n\n    $sidebat_menu.find('a').filter(function () {\n        return this.href == $current_url;\n    }).parent('li').addClass('current-page').parents('ul').slideDown(function() {\n        setContentHeight();\n    }).parent().addClass('active');\n\n    // recompute content when resizing\n    $(window).smartresize(function(){  \n        setContentHeight();\n    });\n\n    setContentHeight();\n\n    // fixed sidebar\n    if ($.fn.mCustomScrollbar) {\n        $('.menu_fixed').mCustomScrollbar({\n            autoHideScrollbar: true,\n            theme: 'minimal',\n            mouseWheel:{ preventDefault: true }\n        });\n    }\n    // /Sidebar\n\n    // Progressbar\n    if ($(\".progress .progress-bar\")[0])\n        $('.progress .progress-bar').progressbar();\n    // /Progressbar\n\n\n    // Table\n    var checkState = '';\n    $('table input').on('ifChecked', function () {\n        checkState = '';\n        $(this).parent().parent().parent().addClass('selected');\n        countChecked();\n    });\n    $('table input').on('ifUnchecked', function () {\n        checkState = '';\n        $(this).parent().parent().parent().removeClass('selected');\n        countChecked();\n    });\n    // /Table\n\n\n    // Accordion\n    $(\".expand\").on(\"click\", function () {\n        $(this).next().slideToggle(200);\n        $expand = $(this).find(\">:first-child\");\n\n        if ($expand.text() == \"+\") {\n            $expand.text(\"-\");\n        } else {\n            $expand.text(\"+\");\n        }\n    });\n    // /Accordion\n});"]}